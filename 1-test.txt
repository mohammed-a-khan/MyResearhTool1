# CS Playwright Test Framework - Architecture Diagram

```
+=====================================================================================+
|                     CS PLAYWRIGHT TEST FRAMEWORK v1.10.0                             |
|                 Enterprise-Grade AI-Powered Test Automation Platform                 |
+=====================================================================================+

                              TEST AUTHORING LAYER
 +--------------------------------------------------------------------------+
 |                                                                          |
 |   BDD FORMAT (.feature)           SPEC FORMAT (.spec.ts)                |
 |   +-----------------------+       +---------------------------+          |
 |   | @smoke @regression    |       | describe('Login', () => {|          |
 |   | Feature: User Login   |       |   it('should login', ..  |          |
 |   |   Scenario: Valid     |       |     page.navigate(...)   |          |
 |   |     Given I navigate  |       |     page.fill(...)       |          |
 |   |     When I type "usr" |       |   });                    |          |
 |   |     Then I should see |       | });                      |          |
 |   +-----------------------+       +---------------------------+          |
 |                                                                          |
 |   ZERO-CODE / AI STEPS            JSON DATA SOURCES                     |
 |   +-----------------------+       +---------------------------+          |
 |   | When AI "Click Login" |       | Examples: {"type":"json", |          |
 |   | When AI "Type admin   |       |   "source":"data.json",  |          |
 |   |   into username"      |       |   "filter":"runFlag=Yes"} |         |
 |   +-----------------------+       +---------------------------+          |
 +--------------------------------------------------------------------------+
                                    |
                                    v
                           EXECUTION ENGINE LAYER
 +--------------------------------------------------------------------------+
 |                                                                          |
 |  +------------------+    +-------------------+   +-------------------+   |
 |  | CSBDDEngine      |    | CSBDDRunner       |   | CSSpecRunner      |   |
 |  | - Gherkin Parser |    | - Orchestrator    |   | - describe/it     |   |
 |  | - Tag Filtering  |    | - Retry Logic     |   | - Fixture Inject  |   |
 |  | - Data Sources   |    | - Module Detect   |   | - Parallel Specs  |   |
 |  +--------+---------+    +--------+----------+   +---------+---------+   |
 |           |                       |                         |            |
 |           v                       v                         v            |
 |  +---------------------------------------------------------------+      |
 |  |              STEP DEFINITION RESOLUTION                        |      |
 |  |                                                                |      |
 |  |  1. CSStepRegistry      - @CSBDDStepDef pattern matching     |      |
 |  |  2. CSCucumberDecorators - @Given/@When/@Then compatibility   |      |
 |  |  3. Built-in Steps       - 363+ pre-built steps (API/DB/UI)  |      |
 |  |  4. CSAIStepBDD          - AI "instruction" zero-code steps  |      |
 |  |  5. Intelligent Executor - NLP fallback (no step def needed) |      |
 |  +---------------------------------------------------------------+      |
 |                                                                          |
 |  +------------------+    +-------------------+   +-------------------+   |
 |  | CSScenarioContext |    | CSBDDContext       |   | CSFeatureContext  |   |
 |  | - Step State      |    | - Global State    |   | - Feature Data    |   |
 |  | - Variables       |    | - Page Access     |   | - Background      |   |
 |  | - Evidence        |    | - Browser Mgmt    |   | - Shared State    |   |
 |  +------------------+    +-------------------+   +-------------------+   |
 +--------------------------------------------------------------------------+
                                    |
                    +---------------+----------------+
                    |               |                 |
                    v               v                 v
          TESTING DOMAIN LAYER (Multi-Protocol Support)
 +--------------------------------------------------------------------------+
 |                                                                          |
 |  UI TESTING          API TESTING           DATABASE TESTING              |
 |  +---------------+   +---------------+     +------------------+          |
 |  | Page Objects   |   | CSAPIClient   |     | CSDatabaseRunner |          |
 |  | CSBasePage     |   | CSAPIExecutor |     | QueryExecutor    |          |
 |  | @CSPage        |   | CSAPIRunner   |     | ResultSetParser  |          |
 |  | @CSGetElement  |   |               |     |                  |          |
 |  +-------+-------+   +-------+-------+     +--------+---------+          |
 |          |                    |                      |                    |
 |          v                    v                      v                    |
 |  +---------------+   +---------------+     +------------------+          |
 |  | CSWebElement   |   | Validators:   |     | DB Adapters:     |          |
 |  | - 100+ methods |   | - StatusCode  |     | - Oracle         |          |
 |  | - Self-Healing |   | - JSONPath    |     | - SQL Server     |          |
 |  | - Smart Waits  |   | - Schema      |     | - PostgreSQL     |          |
 |  | - Retry Logic  |   | - Header      |     | - MySQL          |          |
 |  | - Shadow DOM   |   | - Body        |     | - MongoDB        |          |
 |  | - Frame/iframe |   | - Regex       |     | - Redis          |          |
 |  +-------+-------+   | - XML/SOAP    |     +------------------+          |
 |          |            | - ResponseTime|                                   |
 |          |            +---------------+     SOAP TESTING                  |
 |          |                                  +------------------+          |
 |          |            API AUTH:              | CSSoapClient     |          |
 |          |            +---------------+     | WS-Security      |          |
 |          |            | OAuth 2.0     |     | WSDL Support     |          |
 |          |            | AWS Sig V4    |     | XML Validation   |          |
 |          |            | Certificates  |     +------------------+          |
 |          |            | PingFederate  |                                   |
 |          |            +---------------+                                   |
 +----------+-----------------------------------------------------------+---+
            |                                                           |
            v                                                           v
              INTELLIGENCE & HEALING LAYER
 +--------------------------------------------------------------------------+
 |                                                                          |
 |  AI ENGINE                          SMART WAIT ENGINE                    |
 |  +----------------------------+     +----------------------------+       |
 |  | CSIntelligentAI            |     | CSSmartWaitEngine          |       |
 |  |                            |     |                            |       |
 |  |  NLP Engine                |     |  Levels:                   |       |
 |  |  +------------------+     |     |  - off (Playwright only)   |       |
 |  |  | Intent Extraction |     |     |  - minimal (DOM stable)   |       |
 |  |  | Entity Recognition|     |     |  - standard (+ network)   |       |
 |  |  +------------------+     |     |  - strict (+ animations)   |       |
 |  |                            |     |                            |       |
 |  |  DOM Intelligence          |     |  CSDomStabilityMonitor     |       |
 |  |  +------------------+     |     |  CSNetworkIdleTracker      |       |
 |  |  | Tree Analysis     |     |     |  CSAnimationDetector       |       |
 |  |  | Change Detection  |     |     |  CSSpinnerDetector         |       |
 |  |  +------------------+     |     +----------------------------+       |
 |  |                            |                                          |
 |  |  Self-Healing              |     ZERO-CODE STEP ENGINE               |
 |  |  +------------------+     |     +----------------------------+       |
 |  |  | Similarity Engine |     |     | CSAIStepFunction           |       |
 |  |  | Pattern Matcher   |     |     | CSAIStepParser (Grammar)   |       |
 |  |  | Predictive Healer |     |     | CSAIStepGrammar (Rules)    |       |
 |  |  | Learning History  |     |     | CSAccessibilityTreeMatcher |       |
 |  |  | Strategy Optimizer|     |     | CSAIActionExecutor         |       |
 |  |  +------------------+     |     |                            |       |
 |  +----------------------------+     | Supported: click, type,    |       |
 |                                     | select, navigate, verify,  |       |
 |                                     | hover, scroll, wait, drag  |       |
 |                                     +----------------------------+       |
 +--------------------------------------------------------------------------+
                                    |
                                    v
              BROWSER & INFRASTRUCTURE LAYER
 +--------------------------------------------------------------------------+
 |                                                                          |
 |  BROWSER MANAGEMENT              PARALLEL EXECUTION                     |
 |  +----------------------------+  +----------------------------+          |
 |  | CSBrowserManager           |  | ParallelOrchestrator       |          |
 |  | - Launch/Close browsers    |  | - Worker Pool Management   |          |
 |  | - Context isolation        |  | - Test Distribution        |          |
 |  | - Multi-tab support        |  | - Result Aggregation       |          |
 |  | - Auto-restart on crash    |  |                            |          |
 |  +----------------------------+  | WorkerProcess              |          |
 |                                  | - Isolated Execution       |          |
 |  CSBrowserPool                   | - Communication Protocol   |          |
 |  +----------------------------+  +----------------------------+          |
 |  | - Browser reuse across     |                                          |
 |  |   parallel workers         |  NETWORK LAYER                          |
 |  | - Strategies: round-robin, |  +----------------------------+          |
 |  |   LRU, load-balanced       |  | CSNetworkInterceptor       |          |
 |  | - Health monitoring        |  | - Request Mocking          |          |
 |  +----------------------------+  | - HAR Recording            |          |
 |                                  | - Proxy Support            |          |
 |  SUPPORTED BROWSERS:             +----------------------------+          |
 |  Chrome | Firefox | WebKit | Edge | Safari                              |
 |                                                                          |
 |  PLAYWRIGHT ENGINE (v1.57+)                                             |
 |  +-------------------------------------------------------------------+  |
 |  | Browser --> BrowserContext --> Page --> Locator --> Element         |  |
 |  | Video | Screenshots | Traces | HAR | Console Logs | Diagnostics   |  |
 |  +-------------------------------------------------------------------+  |
 +--------------------------------------------------------------------------+
                                    |
                                    v
              CONFIGURATION & DATA LAYER
 +--------------------------------------------------------------------------+
 |                                                                          |
 |  7-LEVEL CONFIGURATION HIERARCHY                                        |
 |  +-------------------------------------------------------------------+  |
 |  |  Priority (High to Low):                                          |  |
 |  |                                                                   |  |
 |  |  1. CLI Arguments          --> Command line overrides             |  |
 |  |  2. Environment Variables  --> OS/CI environment                  |  |
 |  |  3. Project Environment    --> config/{proj}/environments/{env}   |  |
 |  |  4. Project Config         --> config/{proj}/*.env                |  |
 |  |  5. Project Common         --> config/{proj}/common/*.env         |  |
 |  |  6. Common Environment     --> config/common/environments/{env}   |  |
 |  |  7. Common Config          --> config/common/*.env                |  |
 |  |  8. Global Defaults        --> config/global.env (200+ props)     |  |
 |  +-------------------------------------------------------------------+  |
 |                                                                          |
 |  DATA MANAGEMENT                  AUTHENTICATION                        |
 |  +----------------------------+   +----------------------------+         |
 |  | CSDataProvider             |   | CSTokenManager             |         |
 |  | - JSON/CSV/Excel sources   |   | - OAuth 2.0                |         |
 |  | - DB query data            |   | - AWS Signature V4         |         |
 |  | CSDataGenerator            |   | - Client Certificates      |         |
 |  | - Faker.js integration     |   | - PingFederate             |         |
 |  | - Synthetic test data      |   | - Auto-refresh tokens      |         |
 |  +----------------------------+   +----------------------------+         |
 +--------------------------------------------------------------------------+
                                    |
                                    v
              REPORTING & EVIDENCE LAYER
 +--------------------------------------------------------------------------+
 |                                                                          |
 |  REPORTING ENGINE                                                       |
 |  +-------------------------------------------------------------------+  |
 |  |                                                                   |  |
 |  |  CSReporter (Central Hub)                                         |  |
 |  |  - pass() / fail() / info() / warn() / error() / debug()        |  |
 |  |                                                                   |  |
 |  |  +------------------+  +------------------+  +------------------+ |  |
 |  |  | HTML Reporter    |  | Excel Reporter   |  | PDF Reporter     | |  |
 |  |  | - Charts/Graphs  |  | - KPI Dashboards |  | - Executive      | |  |
 |  |  | - Step Details   |  | - Pivot Tables   |  |   Summary        | |  |
 |  |  | - Screenshots    |  | - Trend Analysis |  | - Formatted      | |  |
 |  |  | - AI Insights    |  +------------------+  +------------------+ |  |
 |  |  | - Timelines      |                                             |  |
 |  |  +------------------+  +------------------+  +------------------+ |  |
 |  |                        | Enterprise Rpt   |  | JUnit XML        | |  |
 |  |  +------------------+  | - Multi-project  |  | - CI/CD compat   | |  |
 |  |  | AI Report        |  | - Custom Brand   |  | - Azure DevOps   | |  |
 |  |  | Aggregator       |  | - Aggregation    |  | - Jenkins        | |  |
 |  |  +------------------+  +------------------+  +------------------+ |  |
 |  +-------------------------------------------------------------------+  |
 |                                                                          |
 |  EVIDENCE COLLECTION              MEDIA CAPTURE                         |
 |  +----------------------------+   +----------------------------+         |
 |  | CSEvidenceCollector        |   | Screenshots (always/fail)  |         |
 |  | - Screenshots              |   | Video Recording            |         |
 |  | - Videos                   |   | Network HAR Files          |         |
 |  | - Console Logs             |   | Playwright Traces          |         |
 |  | - Network Data             |   | Console Logs               |         |
 |  | - Diagnostic Info          |   | Page Diagnostics           |         |
 |  +----------------------------+   +----------------------------+         |
 +--------------------------------------------------------------------------+
                                    |
                                    v
              INTEGRATION & ENTERPRISE LAYER
 +--------------------------------------------------------------------------+
 |                                                                          |
 |  AZURE DEVOPS                     MCP SERVER (Claude AI)                |
 |  +----------------------------+   +----------------------------+         |
 |  | CSADOIntegration           |   | CSMCPServer               |         |
 |  | - Test Result Publishing   |   | - 13 Tool Categories      |         |
 |  | - Work Item Linking        |   | - Browser/BDD/DB/ADO      |         |
 |  | - Test Plan Management     |   | - Codegen/Analytics       |         |
 |  | - Build/Release Pipelines  |   | - AI Agent Orchestration  |         |
 |  +----------------------------+   +----------------------------+         |
 |                                                                          |
 |  SUITE ORCHESTRATION              PERFORMANCE TESTING                   |
 |  +----------------------------+   +----------------------------+         |
 |  | CSSuiteOrchestrator        |   | CSPerformanceTestRunner    |         |
 |  | - Multi-project execution  |   | - Virtual User Simulation  |         |
 |  | - Dependency ordering      |   | - Load Profiles            |         |
 |  | - Consolidated reporting   |   | - Response Time Analysis   |         |
 |  | - test-suite.yaml config   |   | - Core Web Vitals          |         |
 |  +----------------------------+   +----------------------------+         |
 |                                                                          |
 |  LIVE DASHBOARD                   CODE GENERATION                       |
 |  +----------------------------+   +----------------------------+         |
 |  | CSLiveDashboard            |   | CodegenOrchestrator        |         |
 |  | - Real-time test status    |   | - Record & Generate        |         |
 |  | - WebSocket updates        |   | - AI-powered locators      |         |
 |  | - Progress tracking        |   | - Page Object generation   |         |
 |  +----------------------------+   +----------------------------+         |
 +--------------------------------------------------------------------------+


                    DESIGN PATTERNS USED
 +--------------------------------------------------------------------------+
 |  Singleton   : ConfigurationManager, BrowserManager, Reporter            |
 |  Decorator   : @CSPage, @CSGetElement, @CSBDDStepDef, @Given/@When/@Then |
 |  Factory     : CSPageFactory, CSElementFactory, CSDatabase.create()      |
 |  Registry    : CSStepRegistry, CSPageRegistry, CSMCPToolRegistry         |
 |  Strategy    : AI Healing, Wait Levels, Browser Pool Strategies          |
 |  Observer    : Event-based result tracking, Live Dashboard               |
 |  Builder     : CSRequestBuilder, CSSoapEnvelopeBuilder                   |
 |  Chain of Resp: API Request Chaining, Validator Pipeline                 |
 +--------------------------------------------------------------------------+
```

# CS Playwright Test Framework - Demo Call Script (10-15 min)

---

## Introduction (1 min)

Hi everyone. Today I'll give a quick overview of the CS Playwright Test Framework — our in-house, enterprise-grade test automation platform built on top of Microsoft Playwright.

It's currently at version 1.10.0. It covers UI testing, API testing, database validation, AI-powered self-healing, code generation, and enterprise reporting — all in one unified framework.

Let me walk you through the key highlights.

---

## How Tests Are Written (2 min)

We support three ways to write tests:

**First — BDD format.** Testers write Gherkin feature files — Given/When/Then — with full Cucumber compatibility. We support tags, scenario outlines, backgrounds, and data-driven testing. A unique capability is our data source support — test data can come from JSON, CSV, Excel, or even live database queries, with row-level filtering right in the Examples section.

**Second — Spec format.** For teams preferring describe/it style, we support that too with fixture injection and parallel execution.

**Third — Zero-Code AI steps.** A tester can write `When AI "Click the Login button"` — no step definition, no locator needed. Our built-in NLP engine and accessibility tree matcher figure out which element to interact with. This runs entirely locally — no external LLM or API calls.

---

## What's Under the Hood (2 min)

The execution engine has a **5-level step resolution chain**:

1. Custom step definitions using our `@CSBDDStepDef` decorator
2. Standard Cucumber `@Given/@When/@Then` decorators — full compatibility
3. **461 built-in step definitions** — covering API, database, and UI operations. Teams can start testing immediately without writing a single step definition.
4. AI zero-code steps — grammar-based NLP parsing
5. Intelligent fallback — even if no step matches, the NLP engine tries to understand and execute the instruction

For UI testing, our `CSWebElement` wraps Playwright's locator with **210+ methods** — click, type, select, drag, scroll, shadow DOM, iframes, file uploads, and more. Every action goes through our smart wait engine automatically.

For API testing — full REST and SOAP support with **10 built-in validators**, OAuth 2.0, AWS Signature V4, client certificates, and PingFederate authentication.

For database testing — **7 adapters**: Oracle, SQL Server, PostgreSQL, MySQL, MongoDB, Redis. Run queries, validate data, compare UI against database — all from BDD steps.

---

## AI and Self-Healing (2 min)

This is what sets us apart.

**Self-Healing** — When a locator breaks because a developer changed an element's ID or class, our self-healing engine kicks in automatically. It uses similarity matching, pattern recognition, and accessibility tree analysis to find the element. It maintains a learning history — so if it healed an element before, it remembers and applies it instantly next time. All transparent to the tester.

**Smart Wait Engine** — Instead of fragile sleep statements, we have 4 configurable levels:
- **Off** — raw Playwright speed
- **Minimal** — adds DOM stability and spinner detection
- **Standard** — recommended default, adds network idle and animation awareness
- **Strict** — everything enabled, most reliable for complex enterprise apps

The engine monitors DOM changes, pending network calls, CSS animations, and loading spinners — automatically deciding when the page is ready.

---

## Configuration (1 min)

We use a **7-level configuration hierarchy** — critical for enterprise adoption.

CLI arguments override environment variables, which override project environment config, which override project config, and so on down to global defaults with **700+ configurable properties**.

This means each team, each project, each environment can have its own settings without affecting anyone else. One framework, many teams.

---

## Reporting and Evidence (1-2 min)

**5 report formats** — HTML with charts and embedded screenshots, Excel with KPI dashboards, PDF for executive summaries, Enterprise reports for multi-project aggregation, and JUnit XML for CI/CD pipelines.

Every test automatically collects evidence — screenshots, video recordings, network HAR files, Playwright traces, console logs, and page diagnostics. All embedded directly in the HTML report.

We also have an AI Report Aggregator that summarizes self-healing actions and recommends locator improvements.

---

## Enterprise Integration (2 min)

**Azure DevOps** — Native integration. Test results publish automatically to Test Plans, link to work items, and integrate with build and release pipelines.

**MCP Server** — Our newest feature. We expose **228 tools across 13 categories** through the Model Context Protocol. This lets Claude AI directly write tests, execute them, analyze results, and fix failing tests through our framework. AI-powered test automation end to end.

**Suite Orchestration** — Run multiple projects from a single YAML config with dependency ordering and consolidated reporting. Auto-detects CI/CD environments.

**Code Generation** — Record user interactions, and the framework generates Page Object classes and BDD feature files with optimized locators automatically.

**Parallel Execution** — Worker pool with browser reuse and 4 allocation strategies. Full test isolation, automatic result aggregation.

**Live Dashboard** — Real-time test status via WebSocket updates.

---

## By the Numbers (1 min)

Quick summary of the framework's scale:

| Capability | Count |
|---|---|
| Built-in BDD steps | 461 |
| Element methods | 210+ |
| MCP tools | 228 |
| Config properties | 700+ |
| Database adapters | 7 |
| API validators | 10 |
| Report formats | 5 |
| Smart wait levels | 4 |
| Browsers supported | 5 |
| Importable modules | 30+ |
| Design patterns used | 8 |
| External LLM dependency | Zero |

---

## Closing (30 sec)

This isn't just a test runner — it's a complete automation platform. From authoring to execution, self-healing to reporting, single tests to multi-project enterprise suites — everything integrated and production-ready.

The goal is to reduce the time teams spend writing and maintaining tests while increasing reliability. With zero-code AI steps, self-healing, and intelligent code generation, we're making testing faster, smarter, and more maintainable.

Thank you. Happy to take questions.

---

## Q&A Cheat Sheet

**How is this different from plain Playwright?**
Playwright is a browser automation library. We add BDD, 461 built-in steps, AI self-healing, smart waits, database testing, API testing, enterprise reporting, parallel execution, code generation, and AI agent integration on top.

**Does the AI need external API calls?**
No. All AI features run locally — grammar-based parsing and DOM analysis. No LLM, no API keys.

**How does self-healing work?**
When a locator fails, the framework tries similarity matching, pattern recognition, and accessibility tree analysis. It finds the element, completes the action, and remembers the fix for next time.

**Can different teams use different configs?**
Yes. 7-level hierarchy — each project and environment overrides independently.

**What CI/CD tools work?**
Azure DevOps natively, plus Jenkins, GitHub Actions, and anything supporting JUnit XML.


