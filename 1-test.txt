// Resolve the actual <select> element:
                // - If matched element is an <option>, navigate UP to parent <select>
                // - If matched element is a container, drill DOWN or check SIBLINGS for <select>
                // Legacy table layout: <tr><td>Label:</td><td><select>...</select></td></tr>
                let selectLocator = element!.locator;
                try {
                    const tagName = await selectLocator.evaluate((el: Element) => el.tagName.toLowerCase()).catch(() => '');
                    if (tagName === 'option' || tagName === 'optgroup') {
                        const parentSelect = selectLocator.locator('xpath=ancestor::select');
                        if (await parentSelect.count() > 0) {
                            CSReporter.debug('CSAIActionExecutor: Matched <option> — navigating up to parent <select>');
                            selectLocator = parentSelect.first();
                        }
                    } else if (tagName === 'select') {
                        // Already a <select> — use as-is
                    } else {
                        // Try inside the matched element first
                        const childSelect = selectLocator.locator('select').first();
                        if (await childSelect.count() > 0) {
                            CSReporter.debug('CSAIActionExecutor: Matched container — drilling down to child <select>');
                            selectLocator = childSelect;
                        } else {
                            // Table layout: label is in one <td>, <select> is in a sibling <td>
                            // Check next sibling, then parent <tr> descendants
                            const siblingSelect = selectLocator.locator('xpath=following-sibling::td[1]//select').first();
                            if (await siblingSelect.count() > 0) {
                                CSReporter.debug('CSAIActionExecutor: Table layout — found <select> in next sibling cell');
                                selectLocator = siblingSelect;
                            } else {
                                const rowSelect = selectLocator.locator('xpath=ancestor::tr[1]//select').first();
                                if (await rowSelect.count() > 0) {
                                    CSReporter.debug('CSAIActionExecutor: Table layout — found <select> in parent row');
                                    selectLocator = rowSelect;
                                }
                            }
                        }
                    }
