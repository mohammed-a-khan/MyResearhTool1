# CS Playwright TypeScript Framework — Copilot Instructions

> Convert Selenium/Java/QAF scripts OR create new test scripts. Code must be execution-ready on first attempt.

**MANDATORY**: Also refer to `.github/code-examples.md` for detailed code examples.

---

## 1. MANDATORY RULES (Never Skip)

| Rule | Description |
|------|-------------|
| **RULE 1** | Use CORRECT module-specific imports — NEVER single barrel import. See Section 12. |
| **RULE 2** | CSReporter uses STATIC methods — `CSReporter.info()`. NEVER `getInstance()`. |
| **RULE 3** | Page classes MUST implement `initializeElements()` — Required abstract method. |
| **RULE 4** | NEVER redeclare inherited properties — `config`, `browserManager`, `page`, `url`, `elements` are `protected` in CSBasePage. |
| **RULE 5** | NEVER create index.ts or barrel files — Each file standalone. |
| **RULE 6** | All element locators MUST be in page classes — Never in steps/specs. |
| **RULE 7** | All DB queries MUST be in .env files — Never hardcoded. |
| **RULE 8** | Never use raw Playwright APIs — No `page.locator()`, `page.click()`, `page.goto()`. |
| **RULE 9** | Config uses `environments/` subfolder — `config/<project>/environments/dev.env`. |
| **RULE 10** | Check framework utilities first — 310+ methods across 8 classes. |
| **RULE 11** | Use JSON for test data — Not Excel. |
| **RULE 12** | NO duplicate method names — Search ALL classes/packages before creating any method. |
| **RULE 13** | NO duplicate step definitions — Search ALL step files before creating any @CSBDDStepDef. |

### Pre-Implementation Checklist (MANDATORY)

Before creating ANY method or step definition:

1. **Search for existing methods**: Use codebase search to find methods with similar names or functionality across ALL page classes, helpers, and utilities
2. **Search for existing steps**: Use codebase search to find step definitions with similar patterns across ALL step files
3. **Reuse if exists**: If a similar method/step exists, reuse it or extend it — DO NOT create duplicates
4. **Unique naming**: Only create new methods/steps if NO existing implementation covers the need
5. **Consistent naming**: Follow existing naming conventions in the codebase

**Search Commands Before Implementation:**
```bash
# Search for method names across all TypeScript files
grep -r "methodName" --include="*.ts" test/<project>/

# Search for step patterns across all step files
grep -r "step pattern text" --include="*.steps.ts" test/<project>/steps/
```

---

## 2. Project Structure

```
test/<project>/
├── pages/           # Page objects - NO index.ts
├── steps/           # BDD step definitions (.steps.ts)
├── features/        # BDD Gherkin files (.feature)
├── specs/           # Spec style tests (.spec.ts)
├── data/            # JSON test data files
└── helpers/         # Project-specific helpers

config/<project>/
├── common/          # common.env, <project>-db-queries.env
├── environments/    # dev.env, sit.env, uat.env, prod.env
└── global.env
```

**File Naming Conventions (STRICT):**

| Type | Pattern | Example | WRONG |
|------|---------|---------|-------|
| Page class | `<Module>Page.ts` (PascalCase) | `LoginPage.ts`, `UserProfilePage.ts` | `loginPage.ts` |
| Step file | `<area>.steps.ts` (kebab-case) | `user-login.steps.ts`, `order-management.steps.ts` | `UserLoginSteps.java` |
| Feature | `<feature>.feature` (kebab-case) | `user-login.feature` | `UserLogin.feature` |
| Spec | `<feature>.spec.ts` (kebab-case) | `user-login.spec.ts` | `UserLoginSpec.ts` |
| Data | `<feature>-data.json` (kebab-case) | `user-login-data.json` | `userLoginData.json` |

**CRITICAL**: All files are TypeScript (.ts) — NEVER .java. Step files use kebab-case, NOT PascalCase.

---

## 3. Page Object Pattern

**Key Points:**
- Extend `CSBasePage`, use `@CSPage('identifier')` decorator
- Use `@CSGetElement({ xpath/css, description, waitForVisible, alternativeLocators })` for elements
- MUST implement `protected initializeElements(): void { CSReporter.debug('...'); }`
- DO NOT redeclare inherited properties (`config`, `browserManager`, `page`, `url`, `elements`)
- Use `CSElementFactory.createByXPath/CSS/Text()` for dynamic elements

**See**: `code-examples.md` Section 1 for complete example.

---

## 4. @CSGetElement Options

| Option | Type | Description |
|--------|------|-------------|
| `xpath` | string | XPath locator |
| `css` | string | CSS selector |
| `description` | string | Element description for reporting |
| `waitForVisible` | boolean | Wait for visibility on access |
| `waitForEnabled` | boolean | Wait for enabled state |
| `alternativeLocators` | string[] | Fallbacks (prefix: `css:`, `xpath:`, `text:`) |
| `selfHeal` | boolean | Enable AI self-healing |

---

## 5. CSWebElement Methods

**Actions**: `click()`, `dblclick()`, `fill(value)`, `clear()`, `type(text)`, `press(key)`, `selectOption(value/{label}/{index})`, `check()`, `uncheck()`, `hover()`, `focus()`, `setInputFiles()`, `dragTo()`

**With Timeout**: `clickWithTimeout()`, `fillWithTimeout()`, `clearWithTimeout()`

**State**: `isVisible()`, `isEnabled()`, `isChecked()`, `isDisabled()`, `isHidden()`, `isEditable()`

**Data**: `textContent()`, `innerText()`, `inputValue()`, `getAttribute()`, `innerHTML()`, `count()`, `allTextContents()`

**Waits**: `waitForVisible()`, `waitForHidden()`, `waitForEnabled()`, `waitForDisabled()`, `waitForStable()`

---

## 6. BDD Style

**Step Definitions**: Use `@StepDefinitions` class decorator, `@CSBDDStepDef('pattern')` method decorator, `@Page('name')` for page injection.

**Parameters**: `{string}`, `{int}`, `{float}`

**Hooks**: `@CSBefore({ tags })`, `@CSAfter({ tags })`, `@CSBeforeStep()`, `@CSAfterStep()`

**Context**: `CSScenarioContext.getInstance()` for `setVariable()`/`getVariable()`

**See**: `code-examples.md` Section 2-3 for complete examples.

---

## 7. BDD Feature Files

```gherkin
@regression @feature-name
Feature: Feature Title

  Background:
    Given I navigate to the application

  @smoke
  Scenario: Test case name
    When I do something
    Then I verify result

  @data-driven
  Scenario Outline: Data-driven test
    When I use "<param1>" and "<param2>"
    Then I verify "<expected>"

    Examples: {"type": "json", "source": "test/<project>/data/file.json", "path": "$", "filter": "runFlag=Yes"}
```

**CRITICAL**: When using `Examples:` with JSON/CSV/database data source, MUST use `Scenario Outline:` — NOT `Scenario:`. Parameters use `<paramName>` syntax.

**Tags**: `@smoke`, `@regression`, `@wip`, `@TestPlanId:123`, `@TestSuiteId:456`, `@TestCaseId:789`

---

## 8. Spec Style

**Key Points:**
- Import from `@.../spec`: `describe`, `test`, `beforeAll`, `afterAll`, `beforeEach`, `afterEach`
- Auto-injected fixtures: page objects, `config`, `ctx`, `data`, `reporter`, `assert`, `expect`, `navigate`, `browserManager`, `db`, `api`
- Use `test.step('name', async () => {})` for structured reporting
- Execution modes: `describe.serial()`, `describe.parallel()`, `describe.workflow()`
- Dependencies: `{ dependsOn: '@TC001' }` or `{ dependsOn: ['@TC001', '@TC002'] }`
- Test variants: `test.skip()`, `test.only()`, `test.fixme()`, `test.fail()`, `test.slow()`

**Data Sources**: `dataSource: { type: 'inline'|'json'|'csv'|'database'|'api', ... }`

**See**: `code-examples.md` Sections 4-6 for complete examples.

---

## 9. Browser Management

```typescript
// Get instance
const browserManager = CSBrowserManager.getInstance();

// Navigation (ALWAYS use this instead of page.goto)
await browserManager.navigateAndWaitReady(url);
await browserManager.navigateAndWaitReady(url, {
    waitForSpinner: true,
    spinnerSelector: '.loading',
    timeout: 30000
});

// Get current page
const page = browserManager.getPage();
const pages = browserManager.getPages();
const pageCount = browserManager.getPageCount();

// Multi-page/tab handling
await browserManager.switchToPage(index);      // Switch to page by index
await browserManager.switchToLatestPage();     // Switch to most recently opened page
await browserManager.switchToMainPage();       // Switch back to first/main page
const currentIndex = browserManager.getCurrentPageIndex();

// Browser lifecycle
await browserManager.launch('chromium');       // Launch browser (chromium/firefox/webkit)
await browserManager.restartBrowser();         // Restart browser
await browserManager.closePage();              // Close current page
await browserManager.closeContext();           // Close browser context
await browserManager.closeBrowser();           // Close browser
await browserManager.close();                  // Close everything

// Multi-browser support
await browserManager.switchBrowser('firefox'); // Switch to different browser
const browserType = browserManager.getCurrentBrowserType();

// Context management
const context = browserManager.getContext();
await browserManager.clearContextAndReauthenticate();

// Wait for spinners/loading
await browserManager.waitForSpinnersToDisappear(timeout);
```

**NEVER use**: `page.goto()` — Always use `browserManager.navigateAndWaitReady()`
**NEVER use**: `page.waitForSelector()` for spinners — Use `waitForSpinnersToDisappear()`

---

## 10. Assertions

**CSAssert** (getInstance required, methods are async):
```typescript
const assert = CSAssert.getInstance();
await assert.assertTrue(condition, message);
await assert.assertEqual(actual, expected, message);
await assert.assertContains(text, substring, message);
```

**CSExpect** (Playwright-style):
```typescript
import { expect } from '@.../assertions';
await expect(element).toBeVisible();
await expect(element).toHaveText('text');
```

---

## 11. Database Operations

**Config** (`environments/dev.env`): `DB_<ALIAS>_TYPE`, `DB_<ALIAS>_HOST`, `DB_<ALIAS>_PORT`, `DB_<ALIAS>_DATABASE`, `DB_<ALIAS>_USERNAME`, `DB_<ALIAS>_PASSWORD`

**Named Queries** (`common/<project>-db-queries.env`): `DB_QUERY_<NAME>=SELECT ... WHERE col = ?`

**CSDBUtils Methods**:
- `executeQuery()`, `executeNamedQuery()`, `executeSingleValue<T>()`, `executeSingleRow()`, `executeSingleRowOrNull()`
- `exists()`, `count()`, `extractColumn<T>()`, `getMap<K,V>()`
- `executeUpdate()`, `executeInsertAndGetId()`, `executeTransaction()`
- `closeConnection()`, `closeAllConnections()`

**See**: `code-examples.md` Section 9 for complete examples.

---

## 12. API Testing

**CSAPIClient**: `get()`, `post()`, `put()`, `patch()`, `delete()`

**12 Auth Types**: `basic`, `bearer`, `apikey`, `oauth2`, `digest`, `jwt`, `aws`, `ntlm`, `hawk`, `certificate`, `ping`, `custom`

**SOAP**: Use `CSSoapClient`, not CSAPIClient. WS-Security types: `UsernameToken`, `BinarySecurityToken`, `SAMLAssertion`, `Timestamp`, `Signature`

**See**: `code-examples.md` Section 10 for complete examples.

---

## 13. Utility Classes (310+ Methods)

**CRITICAL: Before using ANY utility class, you MUST:**
1. **Read the framework source** — Check actual method signatures in the utility class
2. **Use EXACT method names** — Do NOT guess or make up method names
3. **Match parameters** — Use correct parameter types and order
4. **DO NOT create wrappers** — If framework has the method, use it directly

**WRONG vs CORRECT Examples:**

| WRONG (Made Up) | CORRECT (Actual Framework Method) |
|-----------------|-----------------------------------|
| `CSDateTimeUtility.formatDate(date, 'yyyy-MM-dd')` | `CSDateTimeUtility.format(date, 'YYYY-MM-DD')` |
| `CSDateTimeUtility.getCurrentDate()` | `CSDateTimeUtility.now()` |
| `CSStringUtility.isNullOrEmpty(str)` | `CSStringUtility.isEmpty(str)` |
| `CSArrayUtility.removeDuplicates(arr)` | `CSArrayUtility.unique(arr)` |

**Before converting date/string/array operations:**
1. Check what method exists in the utility class
2. Check the method signature (parameters, return type)
3. Use the EXACT method name — do not invent similar names

| Class | Methods |
|-------|---------|
| **CSStringUtility** | `isEmpty`, `isBlank`, `toCamelCase`, `toSnakeCase`, `capitalize`, `trim`, `pad`, `split`, `join`, `contains`, `base64Encode/Decode` |
| **CSDateTimeUtility** | `parse`, `format`, `addDays/Months/Years`, `diffInDays`, `isBefore`, `isAfter`, `startOfDay`, `addBusinessDays`, `isWeekend`, `now`, `today` |
| **CSArrayUtility** | `unique`, `chunk`, `flatten`, `groupBy`, `intersection`, `union`, `difference`, `sortBy`, `sum`, `average`, `min`, `max` |
| **CSMapUtility** | `fromObject`, `toObject`, `filter`, `merge`, `deepMerge`, `pick`, `omit`, `keys`, `values` |
| **CSCsvUtility** | `read`, `write`, `parse`, `filter`, `sort`, `merge`, `toJSON`, `toExcel` |
| **CSExcelUtility** | `read`, `write`, `readSheet`, `getSheetNames`, `toCSV`, `toJSON` (Heavy - direct import) |

**If unsure about a method, search the framework code first. DO NOT guess.**

---

## 14. QAF Excel to JSON Conversion

**CRITICAL: DO NOT MISS ANY COLUMN DATA. Every single column from Excel MUST appear in JSON.**

**QAF Format** (TD_Key markers wrap EACH data set — multiple data sets in one Excel):
```
| TD_Key  | col1  | col2  | col3  | col4  | col5   |         |
|         | data1 | data2 | data3 | data4 | data5  |         |
|         | data6 | data7 | data8 | data9 | data10 | TD_Key  |

| TD_Key2 | col1   | col2   | col3   | col4   | col5   |         |
|         | data11 | data12 | data13 | data14 | data15 |         |
|         | data16 | data17 | data18 | data19 | data20 | TD_Key2 |
```

**Convert to JSON** (EACH TD_Key block becomes separate JSON or nested structure):

**Option 1: Separate JSON files per TD_Key**
- `feature-data-TD_Key.json`:
```json
[
  { "col1": "data1", "col2": "data2", "col3": "data3", "col4": "data4", "col5": "data5", "runFlag": "Yes" },
  { "col1": "data6", "col2": "data7", "col3": "data8", "col4": "data9", "col5": "data10", "runFlag": "Yes" }
]
```
- `feature-data-TD_Key2.json`:
```json
[
  { "col1": "data11", "col2": "data12", "col3": "data13", "col4": "data14", "col5": "data15", "runFlag": "Yes" },
  { "col1": "data16", "col2": "data17", "col3": "data18", "col4": "data19", "col5": "data20", "runFlag": "Yes" }
]
```

**Option 2: Single JSON with nested structure (use with path parameter)**
```json
{
  "TD_Key": [
    { "col1": "data1", "col2": "data2", "col3": "data3", "col4": "data4", "col5": "data5", "runFlag": "Yes" },
    { "col1": "data6", "col2": "data7", "col3": "data8", "col4": "data9", "col5": "data10", "runFlag": "Yes" }
  ],
  "TD_Key2": [
    { "col1": "data11", "col2": "data12", "col3": "data13", "col4": "data14", "col5": "data15", "runFlag": "Yes" },
    { "col1": "data16", "col2": "data17", "col3": "data18", "col4": "data19", "col5": "data20", "runFlag": "Yes" }
  ]
}
```
Usage: `Examples: {"type": "json", "source": "data/file.json", "path": "$.TD_Key", "filter": "runFlag=Yes"}`

**Each TD_Key block = separate data set. Count rows per block. NO rows should be missing.**

**MANDATORY Conversion Rules:**
1. **Count columns FIRST** — Count ALL columns between TD_Key markers in Excel header row
2. **ALL columns to JSON** — Every single column header becomes a JSON key. NO exceptions
3. **Preserve column order** — Maintain same order as Excel for readability
4. **Empty cells = empty string** — If cell is empty, use `""` not skip the key
5. **Headers → camelCase** — Convert header names to camelCase (e.g., "User Name" → "userName")
6. **Add runFlag** — Add `"runFlag": "Yes"` to each object
7. **Boolean values** — Convert "true"/"false"/"yes"/"no" strings to JSON booleans

**MANDATORY Post-Conversion Audit:**
After generating EACH JSON file, perform this audit:

| Check | Action |
|-------|--------|
| Column count match | Excel columns (excluding TD_Key) = JSON keys count |
| All headers present | Every Excel header appears as JSON key |
| Row count match | Excel data rows = JSON array length |
| No data loss | Spot-check 3 random rows for all values |
| Empty cells handled | Empty Excel cells = `""` in JSON |

**If audit fails, regenerate the JSON file. DO NOT proceed with missing data.**

**See**: `code-examples.md` Section 12 for complete examples.

---

## 15. Java Utility Class Migration

**CommonFunctions / Custom Utility Classes:**
- DO NOT migrate entire utility classes blindly unless user explicitly specifies
- Analyze which methods are actually USED in the Java files being converted
- ONLY migrate the required methods that are used
- Place migrated methods in a project helper class: `test/<project>/helpers/<Project>Helper.ts`
- Before migrating ANY method, check if framework already has equivalent — use framework method instead

**Java Date Utility Classes → CSDateTimeUtility:**
- DO NOT migrate custom date utility classes
- Map ALL Java date methods to `CSDateTimeUtility` framework methods:

| Java Date Method Pattern | CS Framework Equivalent |
|--------------------------|------------------------|
| `getCurrentDate()`, `getToday()` | `CSDateTimeUtility.now()` or `CSDateTimeUtility.today()` |
| `formatDate(date, format)` | `CSDateTimeUtility.format(date, format)` |
| `addDays(date, n)` | `CSDateTimeUtility.addDays(date, n)` |
| `addMonths(date, n)` | `CSDateTimeUtility.addMonths(date, n)` |
| `getDateDifference()`, `daysBetween()` | `CSDateTimeUtility.diffInDays()` |
| `parseDate(str, format)` | `CSDateTimeUtility.parse(str, format)` |
| `isWeekend(date)` | `CSDateTimeUtility.isWeekend(date)` |
| `addBusinessDays(date, n)` | `CSDateTimeUtility.addBusinessDays(date, n)` |

**Java String Utility Classes → CSStringUtility:**
- Map Java string utility methods to `CSStringUtility` framework methods
- Do NOT create custom string helpers if framework has the method

**RULE: If framework has equivalent method, USE IT. Do NOT migrate custom utilities.**

---

## 16. Selenium → CS Playwright Mapping

| Selenium/Java | CS Playwright TypeScript |
|---------------|--------------------------|
| `@FindBy(xpath="...")` | `@CSGetElement({ xpath: "..." })` |
| `WebElement` | `CSWebElement` |
| `element.sendKeys(text)` | `await element.fill(text)` |
| `element.getText()` | `await element.textContent()` |
| `element.isDisplayed()` | `await element.isVisible()` |
| `Select(el).selectByVisibleText(t)` | `await element.selectOption({ label: t })` |
| `driver.get(url)` | `await browserManager.navigateAndWaitReady(url)` |
| `@QAFTestStep("...")` | `@CSBDDStepDef('...')` |
| `Reporter.log(msg)` | `CSReporter.info(msg)` |
| `Assert.assertTrue(c, m)` | `await assert.assertTrue(c, m)` |
| `'${varName}'` in feature file | `"<varName>"` — DOUBLE quotes, angle brackets |

**CRITICAL - Feature File Parameters:**
- Selenium/Java: `Given user logs in with '${UserName}'` (single quotes, `${}` syntax)
- CS Playwright: `Given user logs in with "<UserName>"` (DOUBLE quotes, `<>` syntax)
- ALWAYS convert single quotes to DOUBLE quotes for parameters in feature files

---

## 17. Common Mistakes to AVOID

| WRONG | CORRECT |
|-------|---------|
| Single barrel import `from '@.../cs-playwright-test-framework'` | Module-specific imports |
| `from '.../context'` | Use `/bdd` for CSScenarioContext |
| `from '.../assert'` | Use `/assertions` |
| `from '.../utils'` | Use `/utilities` |
| `CSReporter.getInstance().info()` | `CSReporter.info()` — static |
| `CSAssert.assertTrue()` (static) | `CSAssert.getInstance().assertTrue()` |
| `private config: ...` in page | NEVER redeclare — inherited as `protected` |
| Missing `initializeElements()` | MUST implement in every page |
| Creating `index.ts` files | NEVER create |
| `config/<project>/dev/dev.env` | `config/<project>/environments/dev.env` |
| `page.goto(url)` | `browserManager.navigateAndWaitReady(url)` |
| Hardcoded SQL | Put in `<project>-db-queries.env` |
| Locators in steps/specs | ALL locators in page classes |
| `api.setSOAPSecurity()` | Use `CSSoapClient` |
| `'<param>'` single quotes in feature | `"<param>"` DOUBLE quotes for parameters |
| `'${varName}'` Java syntax | `"<varName>"` angle brackets with double quotes |
| `CSDBUtils from .../database` | Use `.../database-utils` — avoids MongoDB/Redis deps |

---

## 18. Correct Imports (Optimized for Fast Step Loading)

**CRITICAL: Incorrect imports cause slow step loading. Follow these patterns exactly.**

**Import Order (MUST follow):**
1. Framework imports (grouped by module)
2. External libraries (if needed)
3. Local page imports
4. Local helper imports

### Step Definition File Imports (Recommended Pattern):
```typescript
// BDD decorators and context - group related items
import { CSBDDStepDef, Page, StepDefinitions } from '@mdakhan.mak/cs-playwright-test-framework/bdd';
import { CSBDDContext, CSScenarioContext } from '@mdakhan.mak/cs-playwright-test-framework/bdd';

// Reporter (STATIC methods)
import { CSReporter } from '@mdakhan.mak/cs-playwright-test-framework/reporter';

// Utilities (only import what you need)
import { CSValueResolver } from '@mdakhan.mak/cs-playwright-test-framework/utilities';

// Local pages
import { LoginPage } from '../pages/LoginPage';
import { DashboardPage } from '../pages/DashboardPage';

// Local helpers
import { MyProjectDatabaseHelper } from '../helpers/MyProjectDatabaseHelper';
```

### Page Class Imports:
```typescript
// Core - page decorators and base class
import { CSBasePage, CSPage, CSGetElement } from '@mdakhan.mak/cs-playwright-test-framework/core';

// Element types
import { CSWebElement, CSElementFactory } from '@mdakhan.mak/cs-playwright-test-framework/element';

// Reporter
import { CSReporter } from '@mdakhan.mak/cs-playwright-test-framework/reporter';
```

### Database Helper Imports:
```typescript
// Use lightweight path - avoids MongoDB/Redis dependencies
import { CSDBUtils } from '@mdakhan.mak/cs-playwright-test-framework/database-utils';

// Config for named queries
import { CSConfigurationManager } from '@mdakhan.mak/cs-playwright-test-framework/core';
```

### WRONG Import Patterns (Cause Slow Loading):
```typescript
// WRONG - Importing everything from one barrel
import { CSBasePage, CSReporter, CSDBUtils, CSBDDStepDef } from '@mdakhan.mak/cs-playwright-test-framework';

// WRONG - Full database path for just CSDBUtils
import { CSDBUtils } from '@mdakhan.mak/cs-playwright-test-framework/database';

// WRONG - Scattered imports from same module
import { CSBDDStepDef } from '@mdakhan.mak/cs-playwright-test-framework/bdd';
import { StepDefinitions } from '@mdakhan.mak/cs-playwright-test-framework/bdd';
import { Page } from '@mdakhan.mak/cs-playwright-test-framework/bdd';
```

### Module Reference:
| Module Path | Exports |
|-------------|---------|
| `/bdd` | `StepDefinitions`, `CSBDDStepDef`, `Page`, `CSBefore`, `CSAfter`, `CSScenarioContext`, `CSBDDContext` |
| `/core` | `CSBasePage`, `CSPage`, `CSGetElement`, `CSConfigurationManager` |
| `/element` | `CSWebElement`, `CSElementFactory` |
| `/reporter` | `CSReporter` (STATIC) |
| `/browser` | `CSBrowserManager` |
| `/assertions` | `CSAssert`, `expect` |
| `/database-utils` | `CSDBUtils` (lightweight) |
| `/utilities` | `CSValueResolver`, `CSStringUtility`, `CSDateTimeUtility`, `CSCsvUtility` |
| `/api` | `CSAPIClient`, `CSSoapClient` |
| `/spec` | `describe`, `test`, `beforeEach`, `afterEach`, `beforeAll`, `afterAll` |

**Heavy Utilities (use require to avoid loading at startup):**
```typescript
// Only when needed - avoids loading at step file import
const { CSExcelUtility } = require('@mdakhan.mak/cs-playwright-test-framework/dist/utils/CSExcelUtility');
```

---

## 19. CLI Commands

```bash
# BDD
npx cs-playwright-test --project=<project> --features=test/<project>/features/*.feature --tags="@smoke"

# Spec
npx cs-playwright-test --project=<project> --specs=test/<project>/specs/**/*.spec.ts
npx cs-playwright-test --project=<project> --specs=... --test="test name"
npx cs-playwright-test --project=<project> --specs=... --grep="pattern"

# Options
--env=sit|uat|prod --browser=chromium|firefox|webkit --headed|--headless
--parallel --workers=4 --retries=2 --timeout=60000 --debug --lazy-steps

# Generate fixtures
npx cs-playwright-test generate-fixtures --project=<project>
```


