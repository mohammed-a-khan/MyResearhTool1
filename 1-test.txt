// Edge IE Compatibility Mode for persistent context
        // When using an existing Edge profile (BROWSER_USE_EXISTING_PROFILE or BROWSER_USER_DATA_DIR),
        // the profile's Enterprise Site List may auto-switch URLs to IE mode (Trident engine).
        // Without these flags, Playwright's CDP connection breaks when Edge switches to IE mode.
        // --internet-explorer-integration=iemode: enables the IE mode integration
        // --ie-mode-test: keeps the CDP bridge alive so Playwright retains control in IE mode
        if (browserType === 'edge' && this.config.getBoolean('BROWSER_EDGE_IE_MODE', false)) {
            contextOptions.args.push('--internet-explorer-integration=iemode');
            contextOptions.args.push('--ie-mode-test');
            contextOptions.args.push('--no-first-run');
            if (!contextOptions.timeout || contextOptions.timeout < 60000) {
                contextOptions.timeout = 60000;
            }
            CSReporter.info('Edge IE Compatibility Mode enabled (persistent context)');
        }
