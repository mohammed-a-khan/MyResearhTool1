Footer.tsx
------------------------
import React, { useState, useEffect } from 'react';
import './Footer.css';
import { CSConstants } from '../../core/utils/CSConstants';

interface FooterProps {
  /** Additional class name for the footer component */
  className?: string;
  /** Shows the version number */
  showVersion?: boolean;
  /** Shows the copyright information */
  showCopyright?: boolean;
  /** Shows links in the footer */
  showLinks?: boolean;
  /** Custom links to be displayed in the footer */
  links?: Array<{
    label: string;
    url: string;
    target?: '_blank' | '_self' | '_parent' | '_top';
  }>;
  /** Callback for logging errors */
  onError?: (error: Error) => void;
}

/**
 * Footer component for the CSTestForge application
 * 
 * Displays copyright information, version information, and navigation links
 */
const Footer: React.FC<FooterProps> = ({
  className = '',
  showVersion = true,
  showCopyright = true,
  showLinks = true,
  links = [],
  onError
}) => {
  const [frameworkVersion, setFrameworkVersion] = useState<string>(CSConstants.FRAMEWORK_VERSION);
  const [currentYear, setCurrentYear] = useState<number>(new Date().getFullYear());
  
  // Default links if none are provided
  const defaultLinks = [
    { label: 'Documentation', url: '/documentation', target: '_self' as const },
    { label: 'Support', url: '/support', target: '_self' as const },
    { label: 'GitHub', url: 'https://github.com/cstestforge/cstestforge', target: '_blank' as const }
  ];
  
  // Use provided links or fall back to defaults
  const footerLinks = links.length > 0 ? links : defaultLinks;
  
  useEffect(() => {
    try {
      // Get updated version info from config if available
      if (window.CSTestForgeConfig && window.CSTestForgeConfig.version) {
        setFrameworkVersion(window.CSTestForgeConfig.version);
      }
      
      // Always use current year for copyright
      setCurrentYear(new Date().getFullYear());
    } catch (error) {
      if (onError && error instanceof Error) {
        onError(error);
      } else {
        console.error('Error in Footer component:', error);
      }
    }
  }, [onError]);
  
  return (
    <footer className={`cs-footer ${className}`}>
      <div className="cs-footer-container">
        {showCopyright && (
          <div className="cs-footer-copyright">
            <span>Â© {currentYear} CSTestForge. All rights reserved.</span>
          </div>
        )}
        
        {showVersion && (
          <div className="cs-footer-version">
            <span>Version {frameworkVersion}</span>
          </div>
        )}
        
        {showLinks && (
          <div className="cs-footer-links">
            <ul>
              {footerLinks.map((link, index) => (
                <li key={`footer-link-${index}`}>
                  <a 
                    href={link.url} 
                    target={link.target || '_self'}
                    rel={link.target === '_blank' ? 'noopener noreferrer' : undefined}
                  >
                    {link.label}
                  </a>
                </li>
              ))}
            </ul>
          </div>
        )}
      </div>
    </footer>
  );
};

export default Footer;


Footer.css
-------------------------------

.cs-footer {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 60px;
  background-color: #2a2a2a;
  color: #ffffff;
  width: 100%;
  font-size: 14px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  z-index: 100;
}

.cs-footer-container {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  max-width: 1200px;
  padding: 0 20px;
}

.cs-footer-copyright {
  display: flex;
  align-items: center;
}

.cs-footer-version {
  color: rgba(255, 255, 255, 0.7);
  font-size: 12px;
}

.cs-footer-links ul {
  display: flex;
  list-style: none;
  margin: 0;
  padding: 0;
}

.cs-footer-links li {
  margin-left: 20px;
}

.cs-footer-links a {
  color: rgba(255, 255, 255, 0.7);
  text-decoration: none;
  transition: color 0.2s ease;
}

.cs-footer-links a:hover {
  color: #C54B8C; /* Primary brand color */
  text-decoration: none;
}

/* Responsive styles */
@media (max-width: 768px) {
  .cs-footer-container {
    flex-direction: column;
    align-items: center;
    padding: 15px 20px;
  }
  
  .cs-footer {
    height: auto;
  }
  
  .cs-footer-copyright {
    margin-bottom: 10px;
    text-align: center;
  }
  
  .cs-footer-version {
    margin-bottom: 10px;
  }
  
  .cs-footer-links ul {
    flex-wrap: wrap;
    justify-content: center;
  }
  
  .cs-footer-links li {
    margin: 5px 10px;
  }
}

Sidebar.tsx
-----------------------------

import React, { useState, useEffect, useCallback } from 'react';
import { useLocation, useNavigate } from 'react-router-dom';
import './Sidebar.css';

// Types for sidebar items
export interface SidebarItem {
  id: string;
  label: string;
  icon?: string;
  route?: string;
  items?: SidebarItem[];
  badge?: {
    value: string | number;
    variant?: 'primary' | 'success' | 'warning' | 'danger' | 'info';
  };
  disabled?: boolean;
  divider?: boolean;
  onClick?: () => void;
}

interface SidebarProps {
  /** List of items to display in the sidebar */
  items: SidebarItem[];
  /** Whether the sidebar is collapsed */
  collapsed?: boolean;
  /** Called when collapse state changes */
  onCollapseChange?: (collapsed: boolean) => void;
  /** Additional CSS class */
  className?: string;
  /** Custom logo component or URL */
  logo?: React.ReactNode | string;
  /** Logo text to display next to the logo */
  logoText?: string;
  /** Color theme for the sidebar */
  theme?: 'light' | 'dark';
  /** Whether to show the collapse button */
  showCollapseButton?: boolean;
  /** Position of the sidebar */
  position?: 'left' | 'right';
}

/**
 * Sidebar component for the CSTestForge application
 * 
 * Features:
 * - Collapsible navigation menu
 * - Nested menu items
 * - Badge support for notifications
 * - Active route highlighting
 * - Responsive design
 */
const Sidebar: React.FC<SidebarProps> = ({
  items,
  collapsed = false,
  onCollapseChange,
  className = '',
  logo,
  logoText = 'CSTestForge',
  theme = 'dark',
  showCollapseButton = true,
  position = 'left'
}) => {
  // State for sidebar collapsed status
  const [isCollapsed, setIsCollapsed] = useState<boolean>(collapsed);
  // Track expanded menu sections
  const [expandedItems, setExpandedItems] = useState<Record<string, boolean>>({});
  // Active route tracking
  const location = useLocation();
  const navigate = useNavigate();
  
  // Create CSS classes based on props
  const sidebarClasses = [
    'cs-sidebar',
    `cs-sidebar-${theme}`,
    `cs-sidebar-${position}`,
    isCollapsed ? 'cs-sidebar-collapsed' : '',
    className
  ].filter(Boolean).join(' ');
  
  // Check if an item matches the current route
  const isActiveRoute = useCallback((route?: string): boolean => {
    if (!route) return false;
    // Exact match
    if (location.pathname === route) return true;
    // Parent route match
    if (route !== '/' && location.pathname.startsWith(route)) return true;
    return false;
  }, [location.pathname]);
  
  // Toggle sidebar collapsed state
  const toggleCollapse = () => {
    const newState = !isCollapsed;
    setIsCollapsed(newState);
    if (onCollapseChange) {
      onCollapseChange(newState);
    }
  };
  
  // Toggle expanded state of an item
  const toggleExpand = (itemId: string) => {
    setExpandedItems(prev => ({
      ...prev,
      [itemId]: !prev[itemId]
    }));
  };
  
  // Handle item click
  const handleItemClick = (item: SidebarItem) => {
    // Execute custom click handler if provided
    if (item.onClick) {
      item.onClick();
    }
    
    // Navigate to route if provided
    if (item.route) {
      navigate(item.route);
    }
    
    // Toggle expand if the item has children
    if (item.items && item.items.length > 0) {
      toggleExpand(item.id);
    }
  };
  
  // Expand parents of active route on mount
  useEffect(() => {
    const newExpandedItems: Record<string, boolean> = {};
    
    // Helper function to check if an item or its children match the active route
    const checkItemAndChildren = (items: SidebarItem[]): boolean => {
      for (const item of items) {
        if (isActiveRoute(item.route)) {
          return true;
        }
        
        if (item.items && item.items.length > 0) {
          const hasActiveChild = checkItemAndChildren(item.items);
          if (hasActiveChild) {
            newExpandedItems[item.id] = true;
            return true;
          }
        }
      }
      return false;
    };
    
    checkItemAndChildren(items);
    setExpandedItems(newExpandedItems);
  }, [items, isActiveRoute]);
  
  // Handle window resize for responsive behavior
  useEffect(() => {
    const handleResize = () => {
      if (window.innerWidth < 768 && !isCollapsed) {
        setIsCollapsed(true);
        if (onCollapseChange) {
          onCollapseChange(true);
        }
      }
    };
    
    window.addEventListener('resize', handleResize);
    return () => {
      window.removeEventListener('resize', handleResize);
    };
  }, [isCollapsed, onCollapseChange]);
  
  // Render a single sidebar item
  const renderItem = (item: SidebarItem, level = 0) => {
    const isActive = isActiveRoute(item.route);
    const isExpanded = expandedItems[item.id];
    const hasChildren = item.items && item.items.length > 0;
    
    const itemClasses = [
      'cs-sidebar-item',
      `cs-sidebar-level-${level}`,
      isActive ? 'cs-sidebar-item-active' : '',
      item.disabled ? 'cs-sidebar-item-disabled' : '',
      hasChildren ? 'cs-sidebar-item-has-children' : ''
    ].filter(Boolean).join(' ');
    
    // For dividers
    if (item.divider) {
      return <div key={item.id} className="cs-sidebar-divider"></div>;
    }
    
    return (
      <div key={item.id} className={itemClasses}>
        <div 
          className="cs-sidebar-item-content"
          onClick={() => !item.disabled && handleItemClick(item)}
        >
          {item.icon && (
            <span className="cs-sidebar-item-icon">
              <i className={item.icon}></i>
            </span>
          )}
          
          {(!isCollapsed || level > 0) && (
            <span className="cs-sidebar-item-label">{item.label}</span>
          )}
          
          {item.badge && !isCollapsed && (
            <span className={`cs-sidebar-item-badge cs-badge-${item.badge.variant || 'primary'}`}>
              {item.badge.value}
            </span>
          )}
          
          {hasChildren && !isCollapsed && (
            <span className={`cs-sidebar-item-arrow ${isExpanded ? 'expanded' : ''}`}>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 9L12 15L18 9" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
              </svg>
            </span>
          )}
        </div>
        
        {hasChildren && isExpanded && !isCollapsed && (
          <div className="cs-sidebar-submenu">
            {item.items.map(subItem => renderItem(subItem, level + 1))}
          </div>
        )}
      </div>
    );
  };
  
  // Render logo component
  const renderLogo = () => {
    if (!logo && !logoText) return null;
    
    return (
      <div className="cs-sidebar-header">
        {typeof logo === 'string' ? (
          <img src={logo} alt={logoText} className="cs-sidebar-logo" />
        ) : (
          logo
        )}
        
        {!isCollapsed && logoText && (
          <div className="cs-sidebar-logo-text">{logoText}</div>
        )}
        
        {showCollapseButton && (
          <button 
            className="cs-sidebar-collapse-btn" 
            onClick={toggleCollapse}
            aria-label={isCollapsed ? 'Expand sidebar' : 'Collapse sidebar'}
          >
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d={isCollapsed 
                ? "M8 4L16 12L8 20" 
                : "M16 4L8 12L16 20"} 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
              />
            </svg>
          </button>
        )}
      </div>
    );
  };
  
  return (
    <div className={sidebarClasses}>
      {renderLogo()}
      <div className="cs-sidebar-content">
        {items.map(item => renderItem(item))}
      </div>
    </div>
  );
};

export default Sidebar;

Sidebar.css
---------------------------------
:root {
  --cs-primary-color: #C54B8C; /* Primary brand color */
  --cs-primary-hover: #aa3d76;
  --cs-sidebar-width: 260px;
  --cs-sidebar-collapsed-width: 70px;
  --cs-sidebar-dark-bg: #1e1e2d;
  --cs-sidebar-light-bg: #ffffff;
  --cs-sidebar-dark-text: #b5b5c3;
  --cs-sidebar-light-text: #464e5f;
  --cs-sidebar-dark-active: #1a1a27;
  --cs-sidebar-light-active: #f3f6f9;
  --cs-sidebar-dark-border: rgba(255, 255, 255, 0.1);
  --cs-sidebar-light-border: #eff2f5;
  --cs-sidebar-transition: all 0.3s ease;
  --cs-sidebar-box-shadow: 0 0.5rem 1.5rem 0.5rem rgba(0, 0, 0, 0.075);
}

.cs-sidebar {
  display: flex;
  flex-direction: column;
  width: var(--cs-sidebar-width);
  height: 100vh;
  position: fixed;
  top: 0;
  transition: var(--cs-sidebar-transition);
  overflow-y: auto;
  overflow-x: hidden;
  z-index: 1000;
  box-shadow: var(--cs-sidebar-box-shadow);
}

/* Dark theme styles */
.cs-sidebar-dark {
  background-color: var(--cs-sidebar-dark-bg);
  color: var(--cs-sidebar-dark-text);
}

/* Light theme styles */
.cs-sidebar-light {
  background-color: var(--cs-sidebar-light-bg);
  color: var(--cs-sidebar-light-text);
}

/* Position styles */
.cs-sidebar-left {
  left: 0;
  border-right: 1px solid;
}

.cs-sidebar-right {
  right: 0;
  border-left: 1px solid;
}

.cs-sidebar-dark.cs-sidebar-left {
  border-right-color: var(--cs-sidebar-dark-border);
}

.cs-sidebar-light.cs-sidebar-left {
  border-right-color: var(--cs-sidebar-light-border);
}

.cs-sidebar-dark.cs-sidebar-right {
  border-left-color: var(--cs-sidebar-dark-border);
}

.cs-sidebar-light.cs-sidebar-right {
  border-left-color: var(--cs-sidebar-light-border);
}

/* Collapsed state */
.cs-sidebar-collapsed {
  width: var(--cs-sidebar-collapsed-width);
}

/* Header section containing logo and collapse button */
.cs-sidebar-header {
  display: flex;
  align-items: center;
  padding: 1rem;
  height: 70px;
  position: relative;
}

.cs-sidebar-logo {
  max-height: 32px;
  max-width: 32px;
  margin-right: 0.5rem;
}

.cs-sidebar-logo-text {
  font-size: 1.25rem;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.cs-sidebar-collapse-btn {
  position: absolute;
  right: 0.75rem;
  top: 50%;
  transform: translateY(-50%);
  background: transparent;
  border: none;
  color: inherit;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: var(--cs-sidebar-transition);
}

.cs-sidebar-dark .cs-sidebar-collapse-btn:hover {
  background-color: rgba(255, 255, 255, 0.1);
}

.cs-sidebar-light .cs-sidebar-collapse-btn:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

/* Main content area */
.cs-sidebar-content {
  flex: 1;
  padding: 0.5rem 0;
}

/* Divider styles */
.cs-sidebar-divider {
  height: 1px;
  margin: 0.5rem 1rem;
}

.cs-sidebar-dark .cs-sidebar-divider {
  background-color: var(--cs-sidebar-dark-border);
}

.cs-sidebar-light .cs-sidebar-divider {
  background-color: var(--cs-sidebar-light-border);
}

/* Item styles */
.cs-sidebar-item {
  position: relative;
  transition: var(--cs-sidebar-transition);
}

.cs-sidebar-item-content {
  display: flex;
  align-items: center;
  padding: 0.75rem 1.5rem;
  cursor: pointer;
  transition: var(--cs-sidebar-transition);
  position: relative;
}

.cs-sidebar-item-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  margin-right: 0.75rem;
}

.cs-sidebar-item-label {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.cs-sidebar-item-badge {
  min-width: 20px;
  height: 20px;
  border-radius: 10px;
  font-size: 0.75rem;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 0.5rem;
  margin-left: 0.5rem;
}

.cs-badge-primary {
  background-color: var(--cs-primary-color);
  color: white;
}

.cs-badge-success {
  background-color: #0abb87;
  color: white;
}

.cs-badge-warning {
  background-color: #ffb822;
  color: white;
}

.cs-badge-danger {
  background-color: #fd397a;
  color: white;
}

.cs-badge-info {
  background-color: #5578eb;
  color: white;
}

.cs-sidebar-item-arrow {
  display: flex;
  margin-left: 0.5rem;
  transition: transform 0.3s ease;
}

.cs-sidebar-item-arrow.expanded {
  transform: rotate(-180deg);
}

/* Submenu styles */
.cs-sidebar-submenu {
  overflow: hidden;
  transition: var(--cs-sidebar-transition);
}

.cs-sidebar-level-0 .cs-sidebar-submenu {
  margin-left: 1rem;
}

.cs-sidebar-level-1 .cs-sidebar-submenu {
  margin-left: 1.5rem;
}

.cs-sidebar-level-2 .cs-sidebar-submenu {
  margin-left: 2rem;
}

/* Item state styles */
.cs-sidebar-item-disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.cs-sidebar-item-disabled .cs-sidebar-item-content {
  cursor: not-allowed;
}

/* Active item styles */
.cs-sidebar-item-active > .cs-sidebar-item-content {
  font-weight: 600;
}

.cs-sidebar-dark .cs-sidebar-item-active > .cs-sidebar-item-content {
  background-color: var(--cs-sidebar-dark-active);
  color: var(--cs-primary-color);
}

.cs-sidebar-light .cs-sidebar-item-active > .cs-sidebar-item-content {
  background-color: var(--cs-sidebar-light-active);
  color: var(--cs-primary-color);
}

/* Hover effects */
.cs-sidebar-item:not(.cs-sidebar-item-disabled):hover > .cs-sidebar-item-content {
  color: var(--cs-primary-color);
}

.cs-sidebar-dark .cs-sidebar-item:not(.cs-sidebar-item-disabled):hover > .cs-sidebar-item-content {
  background-color: var(--cs-sidebar-dark-active);
}

.cs-sidebar-light .cs-sidebar-item:not(.cs-sidebar-item-disabled):hover > .cs-sidebar-item-content {
  background-color: var(--cs-sidebar-light-active);
}

/* Responsive adjustments */
@media (max-width: 991.98px) {
  .cs-sidebar {
    transform: translateX(-100%);
  }
  
  .cs-sidebar-right {
    transform: translateX(100%);
  }
  
  .cs-sidebar.show {
    transform: translateX(0);
  }
  
  .cs-sidebar-backdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: rgba(0, 0, 0, 0.3);
    z-index: 999;
  }
}

/* Level-specific adjustments */
.cs-sidebar-level-1 .cs-sidebar-item-content {
  padding-left: 2.5rem;
}

.cs-sidebar-level-2 .cs-sidebar-item-content {
  padding-left: 3.5rem;
}

/* Collapsed state specific styles */
.cs-sidebar-collapsed .cs-sidebar-item-content {
  justify-content: center;
  padding: 0.75rem;
}

.cs-sidebar-collapsed .cs-sidebar-item-icon {
  margin-right: 0;
}

.cs-sidebar-collapsed .cs-sidebar-item-arrow,
.cs-sidebar-collapsed .cs-sidebar-item-badge {
  display: none;
}

.cs-sidebar-collapsed .cs-sidebar-level-0 .cs-sidebar-submenu {
  position: absolute;
  left: var(--cs-sidebar-collapsed-width);
  top: 0;
  width: 200px;
  border-radius: 0 0.25rem 0.25rem 0;
  z-index: 1001;
  margin-left: 0;
}

.cs-sidebar-collapsed.cs-sidebar-dark .cs-sidebar-level-0 .cs-sidebar-submenu {
  background-color: var(--cs-sidebar-dark-bg);
  box-shadow: var(--cs-sidebar-box-shadow);
}

.cs-sidebar-collapsed.cs-sidebar-light .cs-sidebar-level-0 .cs-sidebar-submenu {
  background-color: var(--cs-sidebar-light-bg);
  box-shadow: var(--cs-sidebar-box-shadow);
}

PageContainer.tsx
-------------------------------------------
import React, { useState, useEffect } from 'react';
import './PageContainer.css';

interface PageContainerProps {
  /** Main content */
  children: React.ReactNode;
  /** Page title */
  title?: string;
  /** Page subtitle or description */
  subtitle?: string;
  /** Whether to show breadcrumbs */
  showBreadcrumbs?: boolean;
  /** Breadcrumb items */
  breadcrumbs?: Array<{
    label: string;
    path?: string;
  }>;
  /** Whether the page container is fluid (full width) */
  fluid?: boolean;
  /** Additional CSS class */
  className?: string;
  /** Content for the page header actions area */
  actions?: React.ReactNode;
  /** Whether to show a loading indicator */
  loading?: boolean;
  /** Error message to display */
  error?: string;
  /** Callback when retry button is clicked */
  onRetry?: () => void;
  /** The sidebar width to offset the content */
  sidebarWidth?: number;
  /** Whether the sidebar is collapsed */
  sidebarCollapsed?: boolean;
  /** Whether the sidebar is fixed */
  sidebarFixed?: boolean;
}

/**
 * PageContainer component for the CSTestForge application
 * 
 * Wraps page content with standard layout elements including:
 * - Page title and subtitle
 * - Breadcrumbs navigation
 * - Loading and error states
 * - Responsive adjustments for sidebar
 */
const PageContainer: React.FC<PageContainerProps> = ({
  children,
  title,
  subtitle,
  showBreadcrumbs = false,
  breadcrumbs = [],
  fluid = false,
  className = '',
  actions,
  loading = false,
  error,
  onRetry,
  sidebarWidth = 260,
  sidebarCollapsed = false,
  sidebarFixed = true
}) => {
  // Calculate content padding based on sidebar state
  const [contentStyle, setContentStyle] = useState<React.CSSProperties>({});
  
  // Update content style when sidebar state changes
  useEffect(() => {
    if (sidebarFixed) {
      const actualSidebarWidth = sidebarCollapsed ? 70 : sidebarWidth;
      setContentStyle({
        paddingLeft: `${actualSidebarWidth}px`
      });
    } else {
      setContentStyle({});
    }
  }, [sidebarFixed, sidebarCollapsed, sidebarWidth]);
  
  // Render breadcrumbs navigation
  const renderBreadcrumbs = () => {
    if (!showBreadcrumbs || breadcrumbs.length === 0) return null;
    
    return (
      <div className="cs-breadcrumbs">
        <ul>
          {breadcrumbs.map((crumb, index) => (
            <li key={`breadcrumb-${index}`} className={index === breadcrumbs.length - 1 ? 'active' : ''}>
              {index !== breadcrumbs.length - 1 && crumb.path ? (
                <a href={crumb.path}>{crumb.label}</a>
              ) : (
                <span>{crumb.label}</span>
              )}
              
              {index < breadcrumbs.length - 1 && (
                <span className="cs-breadcrumb-separator">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 18L15 12L9 6" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
              )}
            </li>
          ))}
        </ul>
      </div>
    );
  };
  
  // Render page header with title, subtitle, and actions
  const renderPageHeader = () => {
    if (!title && !subtitle && !actions) return null;
    
    return (
      <div className="cs-page-header">
        <div className="cs-page-header-titles">
          {title && <h1 className="cs-page-title">{title}</h1>}
          {subtitle && <p className="cs-page-subtitle">{subtitle}</p>}
        </div>
        
        {actions && (
          <div className="cs-page-header-actions">
            {actions}
          </div>
        )}
      </div>
    );
  };
  
  // Error message display
  const renderError = () => {
    if (!error) return null;
    
    return (
      <div className="cs-page-error">
        <div className="cs-error-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M12 8V12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M12 16H12.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        </div>
        <h2 className="cs-error-title">Error</h2>
        <p className="cs-error-message">{error}</p>
        {onRetry && (
          <button className="cs-retry-button" onClick={onRetry}>
            Retry
          </button>
        )}
      </div>
    );
  };
  
  // Loading spinner
  const renderLoading = () => {
    if (!loading) return null;
    
    return (
      <div className="cs-page-loading">
        <div className="cs-loading-spinner">
          <div className="cs-spinner-ring"></div>
          <div className="cs-spinner-ring"></div>
          <div className="cs-spinner-ring"></div>
        </div>
        <p className="cs-loading-text">Loading...</p>
      </div>
    );
  };
  
  // Combine CSS classes
  const containerClasses = [
    'cs-page-container',
    fluid ? 'cs-container-fluid' : 'cs-container',
    className
  ].filter(Boolean).join(' ');
  
  return (
    <div className={containerClasses} style={contentStyle}>
      {renderBreadcrumbs()}
      {renderPageHeader()}
      
      <div className="cs-page-content">
        {loading && renderLoading()}
        {error && renderError()}
        {!loading && !error && children}
      </div>
    </div>
  );
};

export default PageContainer;

PageContainer.css
---------------------------------------------------
:root {
  --cs-primary-color: #C54B8C; /* Primary brand color */
  --cs-primary-hover: #aa3d76;
  --cs-text-color: #212121;
  --cs-text-secondary: #666666;
  --cs-bg-color: #f5f5f5;
  --cs-border-color: #e6e6e6;
  --cs-error-color: #f44336;
  --cs-container-padding: 2rem;
  --cs-header-margin: 2rem;
  --cs-transition: all 0.3s ease;
}

.cs-page-container {
  min-height: 100vh;
  background-color: var(--cs-bg-color);
  color: var(--cs-text-color);
  transition: var(--cs-transition);
  display: flex;
  flex-direction: column;
  padding-top: 70px; /* Account for fixed header */
  padding-bottom: 2rem;
}

/* Container width styles */
.cs-container {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 var(--cs-container-padding);
}

.cs-container-fluid {
  width: 100%;
  padding: 0 var(--cs-container-padding);
}

/* Breadcrumbs styles */
.cs-breadcrumbs {
  padding: 1rem 0;
  border-bottom: 1px solid var(--cs-border-color);
  margin-bottom: var(--cs-header-margin);
}

.cs-breadcrumbs ul {
  display: flex;
  list-style: none;
  margin: 0;
  padding: 0;
  flex-wrap: wrap;
}

.cs-breadcrumbs li {
  display: flex;
  align-items: center;
  color: var(--cs-text-secondary);
  font-size: 0.875rem;
}

.cs-breadcrumbs li.active {
  color: var(--cs-text-color);
  font-weight: 500;
}

.cs-breadcrumbs a {
  color: var(--cs-text-secondary);
  text-decoration: none;
  transition: var(--cs-transition);
}

.cs-breadcrumbs a:hover {
  color: var(--cs-primary-color);
  text-decoration: none;
}

.cs-breadcrumb-separator {
  margin: 0 0.5rem;
  color: var(--cs-text-secondary);
  display: flex;
  align-items: center;
}

/* Page header styles */
.cs-page-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: var(--cs-header-margin);
  flex-wrap: wrap;
}

.cs-page-header-titles {
  margin-right: 1rem;
  margin-bottom: 1rem;
}

.cs-page-title {
  margin: 0 0 0.5rem 0;
  font-size: 1.75rem;
  font-weight: 600;
  color: var(--cs-text-color);
  line-height: 1.2;
}

.cs-page-subtitle {
  margin: 0;
  font-size: 1rem;
  color: var(--cs-text-secondary);
  line-height: 1.5;
}

.cs-page-header-actions {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1rem;
}

/* Page content styles */
.cs-page-content {
  flex: 1;
  position: relative;
}

/* Loading state styles */
.cs-page-loading {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  min-height: 200px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: rgba(255, 255, 255, 0.8);
  z-index: 10;
}

.cs-loading-spinner {
  position: relative;
  width: 60px;
  height: 60px;
}

.cs-spinner-ring {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: 4px solid transparent;
  border-top-color: var(--cs-primary-color);
  border-radius: 50%;
  animation: spin 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
}

.cs-spinner-ring:nth-child(1) {
  animation-delay: -0.45s;
}

.cs-spinner-ring:nth-child(2) {
  animation-delay: -0.3s;
}

.cs-spinner-ring:nth-child(3) {
  animation-delay: -0.15s;
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

.cs-loading-text {
  margin-top: 1rem;
  font-size: 1rem;
  color: var(--cs-text-secondary);
}

/* Error state styles */
.cs-page-error {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  text-align: center;
  min-height: 300px;
}

.cs-error-icon {
  color: var(--cs-error-color);
  margin-bottom: 1rem;
}

.cs-error-title {
  font-size: 1.5rem;
  font-weight: 600;
  margin: 0 0 0.5rem 0;
  color: var(--cs-error-color);
}

.cs-error-message {
  font-size: 1rem;
  color: var(--cs-text-secondary);
  margin: 0 0 1.5rem 0;
  max-width: 600px;
}

.cs-retry-button {
  background-color: var(--cs-primary-color);
  color: white;
  border: none;
  border-radius: 4px;
  padding: 0.5rem 1rem;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: var(--cs-transition);
}

.cs-retry-button:hover {
  background-color: var(--cs-primary-hover);
}

/* Responsive adjustments */
@media (max-width: 991.98px) {
  .cs-page-container {
    padding-left: 0 !important; /* Override the inline style when in mobile view */
  }
  
  .cs-page-header {
    flex-direction: column;
    align-items: flex-start;
  }
  
  .cs-page-header-actions {
    margin-top: 1rem;
  }
  
  .cs-container, .cs-container-fluid {
    padding: 0 1rem;
  }
}

@media (max-width: 575.98px) {
  .cs-page-title {
    font-size: 1.5rem;
  }
  
  .cs-container, .cs-container-fluid {
    padding: 0 0.75rem;
  }
  
  .cs-breadcrumbs {
    display: none; /* Hide breadcrumbs on very small screens */
  }
}

FrameSelector.tsx
----------------------------------------------------

import React, { useState, useEffect, useCallback } from 'react';
import './FrameworkSelector.css';

// Enum for framework types
export enum FrameworkType {
  SELENIUM = 'selenium',
  PLAYWRIGHT = 'playwright',
}

// Enum for language types
export enum LanguageType {
  JAVA = 'java',
  TYPESCRIPT = 'typescript',
}

// Enum for test types
export enum TestType {
  TESTNG = 'testng',
  BDD = 'bdd',
}

// Framework configuration interface
export interface FrameworkConfig {
  framework: FrameworkType;
  language: LanguageType;
  testType: TestType;
}

interface FrameworkSelectorProps {
  /** Initial selected framework configuration */
  initialConfig?: FrameworkConfig;
  /** Callback when configuration changes */
  onConfigChange?: (config: FrameworkConfig) => void;
  /** CSS class to add */
  className?: string;
  /** Whether to show the visual selector */
  visualSelector?: boolean;
  /** Callback for validation errors */
  onValidationError?: (error: string) => void;
  /** Whether the component is in a loading state */
  loading?: boolean;
  /** Error message to display */
  error?: string;
  /** Whether the selector is disabled */
  disabled?: boolean;
}

/**
 * Framework Selector Component
 * 
 * Allows users to select their preferred test framework (Selenium/Playwright),
 * programming language (Java/TypeScript), and testing approach (TestNG/BDD).
 */
const FrameworkSelector: React.FC<FrameworkSelectorProps> = ({
  initialConfig,
  onConfigChange,
  className = '',
  visualSelector = true,
  onValidationError,
  loading = false,
  error,
  disabled = false,
}) => {
  // Default configuration
  const defaultConfig: FrameworkConfig = {
    framework: FrameworkType.SELENIUM,
    language: LanguageType.JAVA,
    testType: TestType.TESTNG,
  };
  
  // Current selected configuration
  const [config, setConfig] = useState<FrameworkConfig>(initialConfig || defaultConfig);
  
  // Validation error state
  const [validationError, setValidationError] = useState<string>('');
  
  // Validate configuration
  const validateConfig = useCallback((newConfig: FrameworkConfig): string => {
    // All combinations are valid in this implementation
    return '';
  }, []);
  
  // Handle framework change
  const handleFrameworkChange = (framework: FrameworkType) => {
    if (disabled || loading) return;
    
    const newConfig = { ...config, framework };
    const error = validateConfig(newConfig);
    
    if (error) {
      setValidationError(error);
      if (onValidationError) {
        onValidationError(error);
      }
      return;
    }
    
    setValidationError('');
    setConfig(newConfig);
    
    if (onConfigChange) {
      onConfigChange(newConfig);
    }
  };
  
  // Handle language change
  const handleLanguageChange = (language: LanguageType) => {
    if (disabled || loading) return;
    
    const newConfig = { ...config, language };
    const error = validateConfig(newConfig);
    
    if (error) {
      setValidationError(error);
      if (onValidationError) {
        onValidationError(error);
      }
      return;
    }
    
    setValidationError('');
    setConfig(newConfig);
    
    if (onConfigChange) {
      onConfigChange(newConfig);
    }
  };
  
  // Handle test type change
  const handleTestTypeChange = (testType: TestType) => {
    if (disabled || loading) return;
    
    const newConfig = { ...config, testType };
    const error = validateConfig(newConfig);
    
    if (error) {
      setValidationError(error);
      if (onValidationError) {
        onValidationError(error);
      }
      return;
    }
    
    setValidationError('');
    setConfig(newConfig);
    
    if (onConfigChange) {
      onConfigChange(newConfig);
    }
  };
  
  // Initialize with initial config
  useEffect(() => {
    if (initialConfig) {
      const error = validateConfig(initialConfig);
      
      if (error) {
        setValidationError(error);
        if (onValidationError) {
          onValidationError(error);
        }
      } else {
        setConfig(initialConfig);
      }
    }
  }, [initialConfig, validateConfig, onValidationError]);
  
  // Framework selection buttons
  const renderFrameworkButtons = () => {
    return (
      <div className="cs-framework-buttons">
        <button
          type="button"
          className={`cs-framework-button ${config.framework === FrameworkType.SELENIUM ? 'active' : ''}`}
          onClick={() => handleFrameworkChange(FrameworkType.SELENIUM)}
          disabled={disabled || loading}
          aria-pressed={config.framework === FrameworkType.SELENIUM}
        >
          <div className="cs-framework-icon selenium-icon"></div>
          <span>Selenium</span>
        </button>
        
        <button
          type="button"
          className={`cs-framework-button ${config.framework === FrameworkType.PLAYWRIGHT ? 'active' : ''}`}
          onClick={() => handleFrameworkChange(FrameworkType.PLAYWRIGHT)}
          disabled={disabled || loading}
          aria-pressed={config.framework === FrameworkType.PLAYWRIGHT}
        >
          <div className="cs-framework-icon playwright-icon"></div>
          <span>Playwright</span>
        </button>
      </div>
    );
  };
  
  // Language selection buttons
  const renderLanguageButtons = () => {
    return (
      <div className="cs-language-buttons">
        <button
          type="button"
          className={`cs-language-button ${config.language === LanguageType.JAVA ? 'active' : ''}`}
          onClick={() => handleLanguageChange(LanguageType.JAVA)}
          disabled={disabled || loading}
          aria-pressed={config.language === LanguageType.JAVA}
        >
          <div className="cs-language-icon java-icon"></div>
          <span>Java</span>
        </button>
        
        <button
          type="button"
          className={`cs-language-button ${config.language === LanguageType.TYPESCRIPT ? 'active' : ''}`}
          onClick={() => handleLanguageChange(LanguageType.TYPESCRIPT)}
          disabled={disabled || loading}
          aria-pressed={config.language === LanguageType.TYPESCRIPT}
        >
          <div className="cs-language-icon typescript-icon"></div>
          <span>TypeScript</span>
        </button>
      </div>
    );
  };
  
  // Test type selection buttons
  const renderTestTypeButtons = () => {
    return (
      <div className="cs-test-type-buttons">
        <button
          type="button"
          className={`cs-test-type-button ${config.testType === TestType.TESTNG ? 'active' : ''}`}
          onClick={() => handleTestTypeChange(TestType.TESTNG)}
          disabled={disabled || loading}
          aria-pressed={config.testType === TestType.TESTNG}
        >
          <div className="cs-test-type-icon testng-icon"></div>
          <span>TestNG</span>
        </button>
        
        <button
          type="button"
          className={`cs-test-type-button ${config.testType === TestType.BDD ? 'active' : ''}`}
          onClick={() => handleTestTypeChange(TestType.BDD)}
          disabled={disabled || loading}
          aria-pressed={config.testType === TestType.BDD}
        >
          <div className="cs-test-type-icon bdd-icon"></div>
          <span>BDD</span>
        </button>
      </div>
    );
  };
  
  // Visual selector (showing framework logos and icons)
  const renderVisualSelector = () => {
    if (!visualSelector) return null;
    
    return (
      <div className="cs-visual-selector">
        <div className="cs-selector-section">
          <h3 className="cs-selector-title">Testing Framework</h3>
          {renderFrameworkButtons()}
        </div>
        
        <div className="cs-selector-section">
          <h3 className="cs-selector-title">Programming Language</h3>
          {renderLanguageButtons()}
        </div>
        
        <div className="cs-selector-section">
          <h3 className="cs-selector-title">Testing Approach</h3>
          {renderTestTypeButtons()}
        </div>
      </div>
    );
  };
  
  // Dropdown selector (alternative to visual selector)
  const renderDropdownSelector = () => {
    if (visualSelector) return null;
    
    return (
      <div className="cs-dropdown-selector">
        <div className="cs-dropdown-group">
          <label htmlFor="framework-select">Testing Framework</label>
          <select
            id="framework-select"
            className="cs-dropdown"
            value={config.framework}
            onChange={(e) => handleFrameworkChange(e.target.value as FrameworkType)}
            disabled={disabled || loading}
          >
            <option value={FrameworkType.SELENIUM}>Selenium</option>
            <option value={FrameworkType.PLAYWRIGHT}>Playwright</option>
          </select>
        </div>
        
        <div className="cs-dropdown-group">
          <label htmlFor="language-select">Programming Language</label>
          <select
            id="language-select"
            className="cs-dropdown"
            value={config.language}
            onChange={(e) => handleLanguageChange(e.target.value as LanguageType)}
            disabled={disabled || loading}
          >
            <option value={LanguageType.JAVA}>Java</option>
            <option value={LanguageType.TYPESCRIPT}>TypeScript</option>
          </select>
        </div>
        
        <div className="cs-dropdown-group">
          <label htmlFor="test-type-select">Testing Approach</label>
          <select
            id="test-type-select"
            className="cs-dropdown"
            value={config.testType}
            onChange={(e) => handleTestTypeChange(e.target.value as TestType)}
            disabled={disabled || loading}
          >
            <option value={TestType.TESTNG}>TestNG</option>
            <option value={TestType.BDD}>BDD (Cucumber)</option>
          </select>
        </div>
      </div>
    );
  };
  
  // Selected configuration summary
  const renderConfigSummary = () => {
    return (
      <div className="cs-config-summary">
        <h3 className="cs-summary-title">Selected Configuration</h3>
        <div className="cs-summary-content">
          <div className="cs-summary-item">
            <span className="cs-summary-label">Framework:</span>
            <span className="cs-summary-value">{config.framework === FrameworkType.SELENIUM ? 'Selenium' : 'Playwright'}</span>
          </div>
          <div className="cs-summary-item">
            <span className="cs-summary-label">Language:</span>
            <span className="cs-summary-value">{config.language === LanguageType.JAVA ? 'Java' : 'TypeScript'}</span>
          </div>
          <div className="cs-summary-item">
            <span className="cs-summary-label">Testing Approach:</span>
            <span className="cs-summary-value">{config.testType === TestType.TESTNG ? 'TestNG' : 'BDD (Cucumber)'}</span>
          </div>
        </div>
      </div>
    );
  };
  
  // Error message
  const renderError = () => {
    const errorMessage = error || validationError;
    if (!errorMessage) return null;
    
    return (
      <div className="cs-framework-error">
        <span className="cs-error-icon">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M12 8V12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M12 16H12.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        </span>
        <span className="cs-error-message">{errorMessage}</span>
      </div>
    );
  };
  
  // Loading indicator
  const renderLoading = () => {
    if (!loading) return null;
    
    return (
      <div className="cs-framework-loading">
        <div className="cs-loading-spinner"></div>
        <span className="cs-loading-message">Loading framework configuration...</span>
      </div>
    );
  };
  
  return (
    <div className={`cs-framework-selector ${className} ${disabled ? 'disabled' : ''}`}>
      {renderVisualSelector()}
      {renderDropdownSelector()}
      {renderConfigSummary()}
      {renderError()}
      {renderLoading()}
    </div>
  );
};

export default FrameworkSelector;

FrameworkSelector.css
-----------------------------------------------------
:root {
  --cs-primary-color: #C54B8C; /* Primary brand color */
  --cs-primary-hover: #aa3d76;
  --cs-primary-light: rgba(197, 75, 140, 0.1);
  --cs-text-color: #333333;
  --cs-text-secondary: #666666;
  --cs-border-color: #e0e0e0;
  --cs-bg-color: #ffffff;
  --cs-bg-secondary: #f8f9fa;
  --cs-error-color: #f44336;
  --cs-disabled-bg: #f5f5f5;
  --cs-disabled-text: #aaaaaa;
  --cs-transition: all 0.3s ease;
  --cs-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  --cs-button-radius: 8px;
}

/* Main container */
.cs-framework-selector {
  display: flex;
  flex-direction: column;
  background-color: var(--cs-bg-color);
  border-radius: 12px;
  box-shadow: var(--cs-shadow);
  padding: 2rem;
  margin-bottom: 2rem;
  position: relative;
  max-width: 900px;
}

/* Disabled state */
.cs-framework-selector.disabled {
  opacity: 0.7;
  pointer-events: none;
}

/* Section styles */
.cs-selector-section {
  margin-bottom: 2rem;
}

.cs-selector-title, 
.cs-summary-title {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--cs-text-color);
  margin: 0 0 1rem 0;
}

/* Visual selector styles */
.cs-visual-selector {
  width: 100%;
}

/* Button groups */
.cs-framework-buttons,
.cs-language-buttons,
.cs-test-type-buttons {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
}

/* Button styles */
.cs-framework-button,
.cs-language-button,
.cs-test-type-button {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: var(--cs-bg-secondary);
  border: 2px solid var(--cs-border-color);
  border-radius: var(--cs-button-radius);
  padding: 1.5rem;
  min-width: 140px;
  cursor: pointer;
  transition: var(--cs-transition);
  text-align: center;
  font-weight: 500;
  color: var(--cs-text-color);
}

/* Button hover state */
.cs-framework-button:hover,
.cs-language-button:hover,
.cs-test-type-button:hover {
  border-color: var(--cs-primary-color);
  background-color: var(--cs-primary-light);
}

/* Button active state */
.cs-framework-button.active,
.cs-language-button.active,
.cs-test-type-button.active {
  border-color: var(--cs-primary-color);
  background-color: var(--cs-primary-light);
  color: var(--cs-primary-color);
}

/* Button disabled state */
.cs-framework-button:disabled,
.cs-language-button:disabled,
.cs-test-type-button:disabled {
  background-color: var(--cs-disabled-bg);
  border-color: var(--cs-border-color);
  color: var(--cs-disabled-text);
  cursor: not-allowed;
}

/* Icon styles */
.cs-framework-icon,
.cs-language-icon,
.cs-test-type-icon {
  width: 60px;
  height: 60px;
  margin-bottom: 1rem;
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
}

/* Framework icons */
.selenium-icon {
  background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDMyIDMyIj48cGF0aCBkPSJNMCAwaDMydjMyaC0zMnptMCAwIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0iTTE2IDI5Ljk2MWMtNy43MjYgMC0xNC0iIGZpbGw9IiMwMGMxODUiLz48cGF0aCBkPSJNMTYgOGEyIDIgMCAxIDAgMC00IDIgMiAwIDAgMCAwIDR6bTAgMCIgZmlsbD0iIzQzQjAyQSIvPjxwYXRoIGQ9Ik0yNC40MSAyOGgtMTYuODJsOC40MS0xNC41ODJ6bTAgMCIgZmlsbD0iI0YyNkIzQSIvPjxwYXRoIGQ9Ik0xNiA4bDguNDEgMTQuNTgyaC0xNi44MnptMCAwIiBmaWxsPSIjQjAyQTRFIi8+PC9zdmc+");
}

.playwright-icon {
  background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDI1NiAyNTYiPjxwYXRoIGZpbGw9IiMxRTg4RTUiIGQ9Ik0xMjggMGM3MC43NCAwIDEyOCA1Ny4yOCAxMjggMTI4YzAgNzAuNzQtNTcuMjYgMTI4LTEyOCAxMjhjLTcwLjcyIDAtMTI4LTU3LjI2LTEyOC0xMjhDMCA1Ny4yOCA1Ny4yOCAwIDEyOCAweiIgLz48cGF0aCBmaWxsPSIjMUIxRjI0IiBkPSJNOTguNzk4IDYwLjI4M0w2OCAxMTEuMDU4bDI1Ljc2NCA0NS41MzhoLTMxLjk5OWwtMjUuMTM1LTQ1LjUzOEw5OC43OTggNjAuMjgzek0xMjAuMiA2MC4yODNoNjcuNzk5bC0zMS44NjggNTAuODE1IDMxLjg2OCA0NS40OTlIOTQuODM1bDMxLjg2OC00Ni4xMjRMMTIwLjIgNjAuMjgzeiIgLz48L3N2Zz4=");
}

/* Language icons */
.java-icon {
  background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDEyOCAxMjgiPjxwYXRoIGZpbGw9IiNFNzZGMDAiIGQ9Ik00Ny42MTcgOTguMTJzLTQuNzY3IDIuNzc0IDMuMzk3IDMuNzFjOS44OTIgMS4xMyAxNC45NDcuOTY4IDI1Ljg0NS0xLjA5MiAwIDAgMi44NzEgMS43OTUgNi44NzMgMy4zNTEtMjQuNDM5IDEwLjQ3LTU1LjMwOC0uNjA3LTM2LjExNS01Ljk2OXptLTIuOTg4LTEzLjY2NXMtNS4zNDggMy45NTkgMi44MjMgNC44MDVjMTAuNTY3IDEuMDkxIDE4LjkxIDEuMTggMzMuMzU0LTEuNiAwIDAgMS45OTMgMi4wMjUgNS4xMzIgMy4xMzEtMjkuNTQyIDguNjQtNjIuNDQ2LjY4LTQxLjMwOS02LjMzNnoiLz48cGF0aCBmaWxsPSIjNTM4MkExIiBkPSJNNjkuODAyIDYxLjI3MWM2LjAyNSA2LjkzNS0xLjU4MSAxMy4xNy0xLjU4MSAxMy4xN3MxNS4yODktNy44OTEgOC4yNjktMTcuNzc3Yy02LjU1OS05LjIxNS0xMS41ODctMTMuNzkyIDE1LjYzNS0yOS41OCAwIDAtNDIuNzMxIDEwLjY3LTIyLjMyMyAzNC4xODd6Ii8+PHBhdGggZmlsbD0iI0U3NkYwMCIgZD0iTTEwMi4xMjMgMTA4LjIyOXM1LjM0OCA1LjQ2Mi01LjU5MSA5LjY5N2MtMjAuMjY2IDcuODctNzYuODMxNy4xOTEtNjIuMTE3LTEuNzQxIDUuNjIxLS43MzYgMTEuNzUyLTUuODMyIDE4LjA2My03LjQ3MyA1LjEzMi0xLjM1IDE0LjM2My0uODI2IDE0LjM2My0uODI2cy00LjE5OS0yLjIxNC05Ljg2Ni0zLjc0OGMtMTAuOTctMi45NTktNDUuNDcwOCAxLjQ2NC0zNi43NTggOC41NTEgMjMuNTU1IDE5LjA0OCA4OS43OTQ3IDEwLjM2MiA4Mi4wOTktMTEuNzUxeiIvPjxwYXRoIGZpbGw9IiNFNzZGMDAiIGQ9Ik00OC40MyA3MC4yMDNzLTMwLjQyMyA3LjI0Ni0xMC43NjMgOS44NzRjOC4zMDUgMS4xMDUgMjQuNjU0Ljg1OCAzOS45MDQtLjQzIDYuNTc0LS41NDUgMTMuMTU5LTEuNzAyIDEzLjE1OS0xLjcwMnMtMi4zMTcgMC45NjEtMy45ODggMi4wODZjLTE2LjE3MSA0LjI1Mi01MS43NjQgMi4yNzMtNDEuOTIyLTIuMDc1IDguMzE3LTMuNjk0IDMuNjEtNy41NDIgMy42MS03Ljc1M3oiLz48cGF0aCBmaWxsPSIjNTM4MkExIiBkPSJNODMuNzQgOTcuMDEyYzE2LjQ0OC0xLjQ0NyAxMC40NzctNi40MTcgMTAuNDc3LTYuNDE3IDIuNzQ3IDMuODk4LTUuMzA0IDYuODUxLTEzLjc3NSA5LjE1Ny03LjA3MSAxLjkzNi0xNC45NzYgMi4yNzEtMjQuNDMyIDEuNTE2IDAtLjAzNiAxLjIyOS0xLjA3NiA4LjkxLTEuMDc2IDYuNDIzLS4xIDE1LjEzNS0uNDE2IDE4LjgyLTMuMTh6Ii8+PHBhdGggZmlsbD0iIzUzODJBMSIgZD0iTTU0Ljg0NiAxMjQuMTUzYzE1Ljg3NCAwIDQwLjMxOS0yLjk1OSA0MC44NzYtNi4xOTggMCAwLTEuMTA0IDIuMi05LjI2IDMuOTF2LS4xMDZjLTE0LjQyOCAyLjgzLTMyLjUyOCAyLjUwNS00Mi45OTIuNzQzYzAtLjAwNCAxLjQ0NyAxLjIgMTEuMzc2IDEuNjUxeiIvPjxwYXRoIGZpbGw9IiNFNzZGMDAiIGQ9Ik02MC41MyA3Mi4yNTVjLTMuNzk1LTIuNzU4LTkuMzA3LTUuMTUzLTkuMzA3LTUuMTUzcy0yMy4zIDUuOTgzLTE1LjYzOSAxMi4xNmMzLjE0OSAyLjU0IDkuODggMy43MzcgMTYuNDUyIDMuMzMzIDQuNTQzLS4zNDYgOS43NjktMS44NjYgOS43NjktMS44NjZzLTEuNzExIDEuMTQtMi45NDYgMi4zNDZjLTEwLjYzIDYuMTY0LTMwLjg5NiAzLjMwMS0yNC45OTYtMy4wMjggNS4wODYtNS40NTEgMjYuNjY3LTcuNzkyIDI2LjY2Ny03Ljc5MnoiLz48cGF0aCBmaWxsPSIjNTM4MkExIiBkPSJNNTQuNDU3IDAlcy05LjIwNyA5LjIwOCA5LjIwNCAxOC41MDVjMTQuNDU3IDkuMjA4IDguNDY3IDM2LjAyNTctMS4xNTMgMjEuNTg2LTQuNjUtNi4xNCAzLjM0NC0xMS41NTg3IDQuODA1LTE3LjM3OEM2OC4zNSAxMS4yOTUzIDU0LjQ1NyAwIDU0LjQ1NyAweiIvPjxwYXRoIGZpbGw9IiNFNzZGMDAiIGQ9Ik03MS40Ni0uMTE4MWMtLjAzMiAwLS4wNjEuMDMwMy0uMDg3LjAzMDMgMC0uMDA0OC0uMDYuMDQ4My0uMDYuMDQ4MzAgMC0uMDA0OC0uMDE5LjAyNDItLjAyNS4wMzAzLS4wMzIuMDI0Ni0uMDYuMDUyLS4wODYuMDc3YTIuNzkzIDIuNzkzIDAgMCAwLS4wODYuMDg3MmMtLjAyNy4wMjkzLS4wNDcuMDUxLS4wNy4wODExLS4wMjMuMDI5Mi0uMDQ5LjA1NzktLjA2OS4wOTAyLS4xMTcuMTEtLjIzLjI0MTYtLjMzLjM5MTEtLjE3Ni4yMDU0LS4zMTEuMzg0LS40MDQuNjA1NC0uMDk3LjIwMDYtLjE2My40NTc2LS4xNjMuNzQ3NiAwIDAgLjAyMi4xNDkuMDU4LjI0MTYuMDM5LjA5OS4wOTIuMTY4LjE1NC4yNDc0LjA1OC4wNzUuMTIzLjE0NzYuMTg4LjIyMjcuMDQyLjA0MzQuMDg0LjA5MTEuMTI5LjEzNDYuMDc0LjA4OS4xNi4xNzYuMjUyLjI1MzguMDk1LjA4MzIuMTk5LjE1NjIuMzA3LjIzMy43MjMuNTE0IDEuNy44NTc2IDIuNzU2IDEuMTE1NiAxLjA1MS4yNTc2IDIuMTgxLjQyMzQgMy4yMjkuNTYzYTMwLjQ3OSAzMC40NzkgMCAwIDAgMi4xNTYuMTcyMmMuMjEyLjAwNi40MTguMDM2Ni42My4wMzY2LjA1OCAwIC4xMDktLjAxMjEuMTYzLS4wMTIxLjA0NyAwIC4wODYuMDEyMS4xMjkuMDEyMS4wNDIgMCAuMDkyLS4wMDY5LjEzNC0uMDEyMWE1LjgxIDUuODEgMCAwIDAgLjI2NS0uMDI0MmMuMDg0LS4wMDYuMTc0LS4wMjI1LjI1Mi0uMDMwMy4wNzktLjAxMi4xNTMtLjAyNDIuMjI2LS4wNDE1LjE0LS4wMjQyLjI3MS0uMDU0Mi4zODktLjA4NC4wMy0uMDA2LjA1Ni0uMDE4Mi4wODEtLjAyNDMuMDI3LS4wMTIxLjA2MS0uMDEyMS4wODgtLjAyNDFhMy4xNzcgMy4xNzcgMCAwIDAgLjU1OC0uMTg2OGMuMTYzLS4wNzM4LjMxOS0uMTU2Mi40NTItLjI2MzMuMDIyLS4wMTgyLjA1LS4wMzYzLjA3NC0uMDUyNy4wMTUgMCAxLjE2Mi0xLjAwNDUuMDk3LTMuMjM3NC0xLjA1NyAyLjU2MTktMy44NDkuNzAyMy01LjQzOC42NjAzLTEuNTg1LS4wNDE1LjQxLS42NjM0IDIuOTk3LS45MzEgMi4zNjctLjIzNTguMzg0LS41ODkxLjM4NC0uNTg5MSAwIDAtLjA3MSAwLS4xNi0uMDEyMS0uMDkxLS4wMTIxLS4xNzktLjAzMDItLjI4MS0uMDQ4My0uMTAyLS4wMTgyLS4yMDktLjAzNjMtLjMyNC0uMDU0My0uMTE0LS4wMjQyLS4yMzMtLjA0MjQtLjM1OS0uMDYwNC0uMTI0LS4wMjQyLS4yNTQtLjA0MjMtLjM5LS4wNjA0LS4xMzktLjAxODItLjI3OS0uMDM2NC0uNDIzLS4wNTQ0LS4xNDYtLjAxMjEtLjI5Mi0uMDI0Mi0uNDQxLS4wMzY0LS4xNDItLjAwNjEtLjI5NS0uMDEyMS0uNDM4LS4wMTgxLS4xNTQgMC0uMy0uMDA2LS40NDctLjAwNi0uMTEzIDAtLjIzNC4wMTgyLS4zNDIuMDEyMWguLS4wMTJjLS4wMzQgMC0uMDcxLS4wMTgyLS4xMDItLjAxMjFhMS4zODYgMS4zODYgMCAwIDAtLjMzOC4wNDIzYy0uMDU1LjAxODItLjEwMi4wMzY0LS4xNDYuMDYwNC0uMDYzLjAzMDMtLjExLjA2MDQtLjE1OC4wOTAyLS4xOTcuMTAxNC0uMzMuMjQxNS0uNDA5LjQzLTEuMDU2LS4yMzM4LTEuMDE0LS4yNDAzLTEuMDE0LS4yNDA3eiIvPjwvc3ZnPg==");
}

.typescript-icon {
  background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDUxMiA1MTIiPjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiByeD0iNTAiIGZpbGw9IiMzMTc4YzYiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTMxNiAxOTYuODNWMTY4aC0yMDR2MjI0aDIwNHYtMzAuMTdoLTE3MC4xNnYtNTQuNzFoMTQwLjE0di0yOWgtMTQwLjE0di01My4yOWgxNzAuMTZ6bTI4LjAwOC0yOGg0NC4wNjJsODAuODI4IDExNS45NiA4MC44MjgtMTE1Ljk2aDQ0LjA2MnYyMjRoLTMzLjg0NHYtMTYyLjc4NmwtNzcuMjggMTA3LjA0aC0yNy41MzJsLTc3LjI4LTEwNy4wNHYxNjIuNzg2aC0zMy44NDR2LTIyNHoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=");
}

/* Test type icons */
.testng-icon {
  background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMiIgZmlsbD0iIzRCODdDNSIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xNy41IDZIMTNWMThoMS44NzVWMTIuNzVIMTcuNWMxLjYyNSAwIDIuNjI1LTEuMTIgMi42MjUtMy40UzE5LjEyNSA2IDE3LjUgNnptLS4xMjMgNUgxNC44NzVWNy43NWgyLjUwMmMuODM2IDAgLjk5OCAxLjAwMi45OTggMS42MjVTMTguMjEyIDExIDE3LjM3NyAxMXpNNiA2djEuNzVoMi44NVYxOEgxMC42VjcuNzVIMTMuNVY2SDZ6Ii8+PC9zdmc+");
}

.bdd-icon {
  background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMiIgZmlsbD0iIzE4QTg0OSIvPjxwYXRoIGQ9Ik02IDcuNWMwLS44MjguNjcyLTEuNSAxLjUtMS41aDkuMTQzYy44MjggMCAxLjUuNjcyIDEuNSAxLjVWOWMwIC44MjgtLjY3MiAxLjUtMS41IDEuNWgtLjIxNGMtLjgyOCAwLTEuNS42NzItMS41IDEuNXYyLjE0M2MwIC44MjgtLjY3MiAxLjUtMS41IDEuNWgtLjIxNEgxMmgtMi43ODZoLS4yMTRjLS44MjggMC0xLjUtLjY3Mi0xLjUtMS41VjEyYzAtLjgyOC0uNjcyLTEuNS0xLjUtMS41SDs5LjVjLS44MjggMC0xLjUtLjY3Mi0xLjUtMS41IDAtLjgyOC0uNjcyLTEuNS0xLjUtMS41SDZ2eiIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg==");
}

/* Buttons span label */
.cs-framework-button span,
.cs-language-button span,
.cs-test-type-button span {
  margin-top: 0.5rem;
  font-size: 1rem;
}

/* Configuration summary section */
.cs-config-summary {
  margin-top: 2rem;
  padding: 1.5rem;
  background-color: var(--cs-bg-secondary);
  border-radius: var(--cs-button-radius);
  border: 1px solid var(--cs-border-color);
}

.cs-summary-content {
  margin-top: 1rem;
}

.cs-summary-item {
  display: flex;
  align-items: center;
  margin-bottom: 0.75rem;
}

.cs-summary-label {
  font-weight: 500;
  margin-right: 0.5rem;
  color: var(--cs-text-secondary);
  min-width: 130px;
}

.cs-summary-value {
  color: var(--cs-primary-color);
  font-weight: 600;
}

/* Dropdown selector styles */
.cs-dropdown-selector {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.cs-dropdown-group {
  display: flex;
  flex-direction: column;
}

.cs-dropdown-group label {
  font-weight: 500;
  margin-bottom: 0.5rem;
  color: var(--cs-text-color);
}

.cs-dropdown {
  padding: 0.75rem 1rem;
  border: 1px solid var(--cs-border-color);
  border-radius: 4px;
  background-color: var(--cs-bg-color);
  color: var(--cs-text-color);
  font-size: 1rem;
  transition: var(--cs-transition);
  appearance: none;
  background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJmZWF0aGVyIGZlYXRoZXItY2hldnJvbi1kb3duIj48cG9seWxpbmUgcG9pbnRzPSI2IDkgMTIgMTUgMTggOSI+PC9wb2x5bGluZT48L3N2Zz4=");
  background-repeat: no-repeat;
  background-position: right 1rem center;
  background-size: 16px;
}

.cs-dropdown:hover {
  border-color: var(--cs-primary-color);
}

.cs-dropdown:focus {
  outline: none;
  border-color: var(--cs-primary-color);
  box-shadow: 0 0 0 2px var(--cs-primary-light);
}

.cs-dropdown:disabled {
  background-color: var(--cs-disabled-bg);
  color: var(--cs-disabled-text);
  cursor: not-allowed;
}

/* Error message styles */
.cs-framework-error {
  display: flex;
  align-items: center;
  margin-top: 1.5rem;
  padding: 1rem;
  background-color: rgba(244, 67, 54, 0.1);
  border-radius: 4px;
  border: 1px solid var(--cs-error-color);
  color: var(--cs-error-color);
}

.cs-error-icon {
  margin-right: 0.75rem;
  display: flex;
  align-items: center;
}

.cs-error-message {
  font-size: 0.9rem;
}

/* Loading styles */
.cs-framework-loading {
  display: flex;
  align-items: center;
  margin-top: 1.5rem;
  padding: 1rem;
  background-color: rgba(33, 150, 243, 0.1);
  border-radius: 4px;
  border: 1px solid #2196f3;
  color: #2196f3;
}

.cs-loading-spinner {
  width: 20px;
  height: 20px;
  border: 2px solid #2196f3;
  border-radius: 50%;
  border-top-color: transparent;
  animation: spin 1s linear infinite;
  margin-right: 0.75rem;
}

.cs-loading-message {
  font-size: 0.9rem;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* Responsive styles */
@media (max-width: 768px) {
  .cs-framework-selector {
    padding: 1.5rem;
  }
  
  .cs-framework-buttons,
  .cs-language-buttons,
  .cs-test-type-buttons {
    justify-content: center;
  }
  
  .cs-framework-button,
  .cs-language-button,
  .cs-test-type-button {
    min-width: 120px;
    padding: 1rem;
  }
  
  .cs-framework-icon,
  .cs-language-icon,
  .cs-test-type-icon {
    width: 45px;
    height: 45px;
  }
  
  .cs-summary-item {
    flex-direction: column;
    align-items: flex-start;
    margin-bottom: 1rem;
  }
  
  .cs-summary-label {
    margin-bottom: 0.25rem;
  }
}

src/components/framework/FrameworkConfig.tsx
--------------------------------------------------
import React, { useState, useEffect, useCallback } from 'react';
import './FrameworkConfig.css';
import { FrameworkType, LanguageType, TestType, FrameworkConfig } from './FrameworkSelector';

interface BrowserConfig {
  name: string;
  version: string;
  headless: boolean;
}

interface EnvironmentConfig {
  name: string;
  baseUrl: string;
  timeout: number;
  retryCount: number;
  screenshotOnFailure: boolean;
  reportPath: string;
  videoRecording: boolean;
}

interface AdvancedConfig {
  implicitWait: number;
  pageLoadTimeout: number;
  scriptTimeout: number;
  pollingInterval: number;
  customCapabilities: Record<string, any>;
  enableTracing: boolean;
  enableNetworkCapture: boolean;
  customData: Record<string, any>;
}

interface DataProviderConfig {
  type: 'excel' | 'csv' | 'json' | 'database';
  path?: string;
  connectionString?: string;
  query?: string;
  sheet?: string;
}

export interface FullFrameworkConfig extends FrameworkConfig {
  browsers: BrowserConfig[];
  environment: EnvironmentConfig;
  advanced: AdvancedConfig;
  dataProvider: DataProviderConfig | null;
}

interface FrameworkConfigProps {
  /** The current framework configuration */
  config: FrameworkConfig;
  /** Default configuration values to pre-populate fields */
  defaultConfig?: Partial<FullFrameworkConfig>;
  /** Callback when configuration changes */
  onConfigChange?: (config: FullFrameworkConfig) => void;
  /** CSS class to add */
  className?: string;
  /** Error message to display */
  error?: string;
  /** Whether the component is in a loading state */
  loading?: boolean;
  /** Whether the configuration form is disabled */
  disabled?: boolean;
  /** Whether to show all config sections by default */
  expandAll?: boolean;
  /** Browser options available for selection */
  availableBrowsers?: Array<{ name: string; versions: string[] }>;
}

/**
 * Framework Configuration Component
 * 
 * Allows users to configure detailed settings for their selected test framework,
 * including browser settings, environment configuration, advanced options, and
 * data provider configuration.
 */
const FrameworkConfigComponent: React.FC<FrameworkConfigProps> = ({
  config,
  defaultConfig,
  onConfigChange,
  className = '',
  error,
  loading = false,
  disabled = false,
  expandAll = false,
  availableBrowsers = [
    { name: 'Chrome', versions: ['latest', '112', '111', '110'] },
    { name: 'Firefox', versions: ['latest', '112', '111', '110'] },
    { name: 'Edge', versions: ['latest', '112', '111', '110'] },
    { name: 'Safari', versions: ['latest', '16', '15', '14'] }
  ]
}) => {
  // Default configuration values
  const defaultFullConfig: FullFrameworkConfig = {
    ...config,
    browsers: [
      {
        name: 'Chrome',
        version: 'latest',
        headless: false
      }
    ],
    environment: {
      name: 'DEV',
      baseUrl: 'http://localhost:3000',
      timeout: 30000,
      retryCount: 2,
      screenshotOnFailure: true,
      reportPath: './reports',
      videoRecording: false
    },
    advanced: {
      implicitWait: 10000,
      pageLoadTimeout: 60000,
      scriptTimeout: 30000,
      pollingInterval: 500,
      customCapabilities: {},
      enableTracing: false,
      enableNetworkCapture: false,
      customData: {}
    },
    dataProvider: null
  };

  // Merged configuration (default + provided values)
  const mergedConfig: FullFrameworkConfig = {
    ...defaultFullConfig,
    ...defaultConfig,
    // Preserve the base framework config
    framework: config.framework,
    language: config.language,
    testType: config.testType
  };

  // Current configuration state
  const [fullConfig, setFullConfig] = useState<FullFrameworkConfig>(mergedConfig);
  
  // Expanded sections state
  const [expandedSections, setExpandedSections] = useState({
    browsers: expandAll,
    environment: expandAll,
    advanced: expandAll,
    dataProvider: expandAll
  });
  
  // Custom data keys and values
  const [customDataKeys, setCustomDataKeys] = useState<string[]>([]);
  const [customDataValues, setCustomDataValues] = useState<string[]>([]);
  
  // Custom capabilities keys and values
  const [customCapabilitiesKeys, setCustomCapabilitiesKeys] = useState<string[]>([]);
  const [customCapabilitiesValues, setCustomCapabilitiesValues] = useState<string[]>([]);
  
  // Data provider enabled state
  const [dataProviderEnabled, setDataProviderEnabled] = useState<boolean>(!!mergedConfig.dataProvider);
  
  // Validation state
  const [validationErrors, setValidationErrors] = useState<Record<string, string>>({});
  
  // Update full config when base config changes
  useEffect(() => {
    setFullConfig(prev => ({
      ...prev,
      framework: config.framework,
      language: config.language,
      testType: config.testType
    }));
  }, [config]);
  
  // Initialize custom data arrays from object
  useEffect(() => {
    if (fullConfig.advanced.customData) {
      const keys = Object.keys(fullConfig.advanced.customData);
      const values = keys.map(key => String(fullConfig.advanced.customData[key]));
      setCustomDataKeys(keys);
      setCustomDataValues(values);
    }
    
    if (fullConfig.advanced.customCapabilities) {
      const keys = Object.keys(fullConfig.advanced.customCapabilities);
      const values = keys.map(key => String(fullConfig.advanced.customCapabilities[key]));
      setCustomCapabilitiesKeys(keys);
      setCustomCapabilitiesValues(values);
    }
  }, []);
  
  // Validate configuration
  const validateConfig = useCallback((config: FullFrameworkConfig): Record<string, string> => {
    const errors: Record<string, string> = {};
    
    // Validate timeout values
    if (config.environment.timeout <= 0) {
      errors.timeout = 'Timeout must be greater than 0';
    }
    
    if (config.advanced.implicitWait < 0) {
      errors.implicitWait = 'Implicit wait must be non-negative';
    }
    
    if (config.advanced.pageLoadTimeout <= 0) {
      errors.pageLoadTimeout = 'Page load timeout must be greater than 0';
    }
    
    if (config.advanced.scriptTimeout <= 0) {
      errors.scriptTimeout = 'Script timeout must be greater than 0';
    }
    
    // Validate base URL
    try {
      new URL(config.environment.baseUrl);
    } catch (e) {
      errors.baseUrl = 'Base URL must be a valid URL';
    }
    
    // Validate data provider configuration
    if (config.dataProvider) {
      if (config.dataProvider.type === 'excel' || config.dataProvider.type === 'csv' || config.dataProvider.type === 'json') {
        if (!config.dataProvider.path) {
          errors.dataProviderPath = 'File path is required';
        }
      } else if (config.dataProvider.type === 'database') {
        if (!config.dataProvider.connectionString) {
          errors.connectionString = 'Connection string is required';
        }
        if (!config.dataProvider.query) {
          errors.query = 'Query is required';
        }
      }
    }
    
    return errors;
  }, []);
  
  // Update configuration and validate
  const updateConfig = useCallback((updatedConfig: FullFrameworkConfig) => {
    const errors = validateConfig(updatedConfig);
    setValidationErrors(errors);
    setFullConfig(updatedConfig);
    
    if (Object.keys(errors).length === 0 && onConfigChange) {
      onConfigChange(updatedConfig);
    }
  }, [onConfigChange, validateConfig]);
  
  // Toggle section expansion
  const toggleSection = (section: keyof typeof expandedSections) => {
    setExpandedSections(prev => ({
      ...prev,
      [section]: !prev[section]
    }));
  };
  
  // Add browser
  const addBrowser = () => {
    const updatedConfig = { ...fullConfig };
    updatedConfig.browsers.push({
      name: availableBrowsers[0].name,
      version: 'latest',
      headless: false
    });
    updateConfig(updatedConfig);
  };
  
  // Remove browser
  const removeBrowser = (index: number) => {
    if (fullConfig.browsers.length <= 1) return;
    
    const updatedConfig = { ...fullConfig };
    updatedConfig.browsers.splice(index, 1);
    updateConfig(updatedConfig);
  };
  
  // Update browser
  const updateBrowser = (index: number, field: keyof BrowserConfig, value: string | boolean) => {
    const updatedConfig = { ...fullConfig };
    
    if (field === 'headless') {
      updatedConfig.browsers[index][field] = value as boolean;
    } else {
      updatedConfig.browsers[index][field] = value as string;
    }
    
    updateConfig(updatedConfig);
  };
  
  // Update environment
  const updateEnvironment = <K extends keyof EnvironmentConfig>(
    field: K, 
    value: EnvironmentConfig[K]
  ) => {
    const updatedConfig = { ...fullConfig };
    updatedConfig.environment[field] = value;
    updateConfig(updatedConfig);
  };
  
  // Update advanced config
  const updateAdvanced = <K extends keyof AdvancedConfig>(
    field: K, 
    value: AdvancedConfig[K]
  ) => {
    const updatedConfig = { ...fullConfig };
    updatedConfig.advanced[field] = value;
    updateConfig(updatedConfig);
  };
  
  // Update data provider
  const updateDataProvider = <K extends keyof DataProviderConfig>(
    field: K, 
    value: DataProviderConfig[K]
  ) => {
    if (!fullConfig.dataProvider) return;
    
    const updatedConfig = { ...fullConfig };
    if (updatedConfig.dataProvider) {
      updatedConfig.dataProvider[field] = value;
    }
    updateConfig(updatedConfig);
  };
  
  // Toggle data provider
  const toggleDataProvider = (enabled: boolean) => {
    setDataProviderEnabled(enabled);
    
    const updatedConfig = { ...fullConfig };
    if (enabled) {
      updatedConfig.dataProvider = {
        type: 'excel',
        path: '',
        sheet: 'Sheet1'
      };
    } else {
      updatedConfig.dataProvider = null;
    }
    
    updateConfig(updatedConfig);
  };
  
  // Update custom data
  const updateCustomData = () => {
    const customData: Record<string, any> = {};
    
    customDataKeys.forEach((key, index) => {
      if (key.trim()) {
        const value = customDataValues[index];
        
        // Try to parse as number or boolean
        if (value === 'true') {
          customData[key] = true;
        } else if (value === 'false') {
          customData[key] = false;
        } else if (!isNaN(Number(value))) {
          customData[key] = Number(value);
        } else {
          customData[key] = value;
        }
      }
    });
    
    const updatedConfig = { ...fullConfig };
    updatedConfig.advanced.customData = customData;
    updateConfig(updatedConfig);
  };
  
  // Update custom capabilities
  const updateCustomCapabilities = () => {
    const customCapabilities: Record<string, any> = {};
    
    customCapabilitiesKeys.forEach((key, index) => {
      if (key.trim()) {
        const value = customCapabilitiesValues[index];
        
        // Try to parse as number or boolean
        if (value === 'true') {
          customCapabilities[key] = true;
        } else if (value === 'false') {
          customCapabilities[key] = false;
        } else if (!isNaN(Number(value))) {
          customCapabilities[key] = Number(value);
        } else {
          customCapabilities[key] = value;
        }
      }
    });
    
    const updatedConfig = { ...fullConfig };
    updatedConfig.advanced.customCapabilities = customCapabilities;
    updateConfig(updatedConfig);
  };
  
  // Add custom data field
  const addCustomDataField = () => {
    setCustomDataKeys([...customDataKeys, '']);
    setCustomDataValues([...customDataValues, '']);
  };
  
  // Remove custom data field
  const removeCustomDataField = (index: number) => {
    const updatedKeys = [...customDataKeys];
    const updatedValues = [...customDataValues];
    
    updatedKeys.splice(index, 1);
    updatedValues.splice(index, 1);
    
    setCustomDataKeys(updatedKeys);
    setCustomDataValues(updatedValues);
    
    // Update config after state is updated
    setTimeout(updateCustomData, 0);
  };
  
  // Add custom capability field
  const addCustomCapabilityField = () => {
    setCustomCapabilitiesKeys([...customCapabilitiesKeys, '']);
    setCustomCapabilitiesValues([...customCapabilitiesValues, '']);
  };
  
  // Remove custom capability field
  const removeCustomCapabilityField = (index: number) => {
    const updatedKeys = [...customCapabilitiesKeys];
    const updatedValues = [...customCapabilitiesValues];
    
    updatedKeys.splice(index, 1);
    updatedValues.splice(index, 1);
    
    setCustomCapabilitiesKeys(updatedKeys);
    setCustomCapabilitiesValues(updatedValues);
    
    // Update config after state is updated
    setTimeout(updateCustomCapabilities, 0);
  };
  
  // Update custom data key
  const updateCustomDataKey = (index: number, value: string) => {
    const updatedKeys = [...customDataKeys];
    updatedKeys[index] = value;
    setCustomDataKeys(updatedKeys);
  };
  
  // Update custom data value
  const updateCustomDataValue = (index: number, value: string) => {
    const updatedValues = [...customDataValues];
    updatedValues[index] = value;
    setCustomDataValues(updatedValues);
  };
  
  // Update custom capability key
  const updateCustomCapabilityKey = (index: number, value: string) => {
    const updatedKeys = [...customCapabilitiesKeys];
    updatedKeys[index] = value;
    setCustomCapabilitiesKeys(updatedKeys);
  };
  
  // Update custom capability value
  const updateCustomCapabilityValue = (index: number, value: string) => {
    const updatedValues = [...customCapabilitiesValues];
    updatedValues[index] = value;
    setCustomCapabilitiesValues(updatedValues);
  };
  
  // Render browser configuration
  const renderBrowserConfig = () => {
    return (
      <div className="cs-config-section">
        <div 
          className="cs-config-header" 
          onClick={() => toggleSection('browsers')}
        >
          <h3 className="cs-config-title">Browser Configuration</h3>
          <span className={`cs-config-arrow ${expandedSections.browsers ? 'expanded' : ''}`}>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M6 9L12 15L18 9" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            </svg>
          </span>
        </div>
        
        {expandedSections.browsers && (
          <div className="cs-config-content">
            {fullConfig.browsers.map((browser, index) => (
              <div key={`browser-${index}`} className="cs-browser-config">
                <div className="cs-browser-header">
                  <h4 className="cs-browser-title">Browser {index + 1}</h4>
                  {fullConfig.browsers.length > 1 && (
                    <button 
                      type="button" 
                      className="cs-remove-browser"
                      onClick={() => removeBrowser(index)}
                      disabled={disabled || loading}
                    >
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 6L6 18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                        <path d="M6 6L18 18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                      </svg>
                    </button>
                  )}
                </div>
                
                <div className="cs-form-group">
                  <label htmlFor={`browser-name-${index}`}>Browser</label>
                  <select
                    id={`browser-name-${index}`}
                    className="cs-select"
                    value={browser.name}
                    onChange={(e) => updateBrowser(index, 'name', e.target.value)}
                    disabled={disabled || loading}
                  >
                    {availableBrowsers.map((b) => (
                      <option key={b.name} value={b.name}>
                        {b.name}
                      </option>
                    ))}
                  </select>
                </div>
                
                <div className="cs-form-group">
                  <label htmlFor={`browser-version-${index}`}>Version</label>
                  <select
                    id={`browser-version-${index}`}
                    className="cs-select"
                    value={browser.version}
                    onChange={(e) => updateBrowser(index, 'version', e.target.value)}
                    disabled={disabled || loading}
                  >
                    {availableBrowsers
                      .find((b) => b.name === browser.name)
                      ?.versions.map((version) => (
                        <option key={version} value={version}>
                          {version}
                        </option>
                      ))}
                  </select>
                </div>
                
                <div className="cs-form-group cs-checkbox-group">
                  <input
                    type="checkbox"
                    id={`browser-headless-${index}`}
                    checked={browser.headless}
                    onChange={(e) => updateBrowser(index, 'headless', e.target.checked)}
                    disabled={disabled || loading}
                  />
                  <label htmlFor={`browser-headless-${index}`}>Run in headless mode</label>
                </div>
              </div>
            ))}
            
            <button
              type="button"
              className="cs-add-browser"
              onClick={addBrowser}
              disabled={disabled || loading}
            >
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 6V18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                <path d="M6 12H18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
              </svg>
              Add Browser
            </button>
          </div>
        )}
      </div>
    );
  };
  
  // Render environment configuration
  const renderEnvironmentConfig = () => {
    const env = fullConfig.environment;
    
    return (
      <div className="cs-config-section">
        <div 
          className="cs-config-header" 
          onClick={() => toggleSection('environment')}
        >
          <h3 className="cs-config-title">Environment Configuration</h3>
          <span className={`cs-config-arrow ${expandedSections.environment ? 'expanded' : ''}`}>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M6 9L12 15L18 9" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            </svg>
          </span>
        </div>
        
        {expandedSections.environment && (
          <div className="cs-config-content">
            <div className="cs-form-group">
              <label htmlFor="env-name">Environment Name</label>
              <input
                type="text"
                id="env-name"
                className="cs-input"
                value={env.name}
                onChange={(e) => updateEnvironment('name', e.target.value)}
                disabled={disabled || loading}
              />
            </div>
            
            <div className="cs-form-group">
              <label htmlFor="base-url">Base URL</label>
              <input
                type="text"
                id="base-url"
                className={`cs-input ${validationErrors.baseUrl ? 'cs-input-error' : ''}`}
                value={env.baseUrl}
                onChange={(e) => updateEnvironment('baseUrl', e.target.value)}
                disabled={disabled || loading}
              />
              {validationErrors.baseUrl && (
                <div className="cs-input-error-message">{validationErrors.baseUrl}</div>
              )}
            </div>
            
            <div className="cs-form-row">
              <div className="cs-form-group">
                <label htmlFor="timeout">Timeout (ms)</label>
                <input
                  type="number"
                  id="timeout"
                  className={`cs-input ${validationErrors.timeout ? 'cs-input-error' : ''}`}
                  value={env.timeout}
                  onChange={(e) => updateEnvironment('timeout', parseInt(e.target.value, 10))}
                  min="0"
                  disabled={disabled || loading}
                />
                {validationErrors.timeout && (
                  <div className="cs-input-error-message">{validationErrors.timeout}</div>
                )}
              </div>
              
              <div className="cs-form-group">
                <label htmlFor="retry-count">Retry Count</label>
                <input
                  type="number"
                  id="retry-count"
                  className="cs-input"
                  value={env.retryCount}
                  onChange={(e) => updateEnvironment('retryCount', parseInt(e.target.value, 10))}
                  min="0"
                  disabled={disabled || loading}
                />
              </div>
            </div>
            
            <div className="cs-form-group">
              <label htmlFor="report-path">Report Path</label>
              <input
                type="text"
                id="report-path"
                className="cs-input"
                value={env.reportPath}
                onChange={(e) => updateEnvironment('reportPath', e.target.value)}
                disabled={disabled || loading}
              />
            </div>
            
            <div className="cs-form-row cs-checkbox-row">
              <div className="cs-form-group cs-checkbox-group">
                <input
                  type="checkbox"
                  id="screenshot-on-failure"
                  checked={env.screenshotOnFailure}
                  onChange={(e) => updateEnvironment('screenshotOnFailure', e.target.checked)}
                  disabled={disabled || loading}
                />
                <label htmlFor="screenshot-on-failure">Screenshot on Failure</label>
              </div>
              
              <div className="cs-form-group cs-checkbox-group">
                <input
                  type="checkbox"
                  id="video-recording"
                  checked={env.videoRecording}
                  onChange={(e) => updateEnvironment('videoRecording', e.target.checked)}
                  disabled={disabled || loading}
                />
                <label htmlFor="video-recording">Video Recording</label>
              </div>
            </div>
          </div>
        )}
      </div>
    );
  };
  
  // Render advanced configuration
  const renderAdvancedConfig = () => {
    const adv = fullConfig.advanced;
    
    return (
      <div className="cs-config-section">
        <div 
          className="cs-config-header" 
          onClick={() => toggleSection('advanced')}
        >
          <h3 className="cs-config-title">Advanced Configuration</h3>
          <span className={`cs-config-arrow ${expandedSections.advanced ? 'expanded' : ''}`}>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M6 9L12 15L18 9" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            </svg>
          </span>
        </div>
        
        {expandedSections.advanced && (
          <div className="cs-config-content">
            <div className="cs-form-row">
              <div className="cs-form-group">
                <label htmlFor="implicit-wait">Implicit Wait (ms)</label>
                <input
                  type="number"
                  id="implicit-wait"
                  className={`cs-input ${validationErrors.implicitWait ? 'cs-input-error' : ''}`}
                  value={adv.implicitWait}
                  onChange={(e) => updateAdvanced('implicitWait', parseInt(e.target.value, 10))}
                  min="0"
                  disabled={disabled || loading}
                />
                {validationErrors.implicitWait && (
                  <div className="cs-input-error-message">{validationErrors.implicitWait}</div>
                )}
              </div>
              
              <div className="cs-form-group">
                <label htmlFor="polling-interval">Polling Interval (ms)</label>
                <input
                  type="number"
                  id="polling-interval"
                  className="cs-input"
                  value={adv.pollingInterval}
                  onChange={(e) => updateAdvanced('pollingInterval', parseInt(e.target.value, 10))}
                  min="0"
                  disabled={disabled || loading}
                />
              </div>
            </div>
            
            <div className="cs-form-row">
              <div className="cs-form-group">
                <label htmlFor="page-load-timeout">Page Load Timeout (ms)</label>
                <input
                  type="number"
                  id="page-load-timeout"
                  className={`cs-input ${validationErrors.pageLoadTimeout ? 'cs-input-error' : ''}`}
                  value={adv.pageLoadTimeout}
                  onChange={(e) => updateAdvanced('pageLoadTimeout', parseInt(e.target.value, 10))}
                  min="0"
                  disabled={disabled || loading}
                />
                {validationErrors.pageLoadTimeout && (
                  <div className="cs-input-error-message">{validationErrors.pageLoadTimeout}</div>
                )}
              </div>
              
              <div className="cs-form-group">
                <label htmlFor="script-timeout">Script Timeout (ms)</label>
                <input
                  type="number"
                  id="script-timeout"
                  className={`cs-input ${validationErrors.scriptTimeout ? 'cs-input-error' : ''}`}
                  value={adv.scriptTimeout}
                  onChange={(e) => updateAdvanced('scriptTimeout', parseInt(e.target.value, 10))}
                  min="0"
                  disabled={disabled || loading}
                />
                {validationErrors.scriptTimeout && (
                  <div className="cs-input-error-message">{validationErrors.scriptTimeout}</div>
                )}
              </div>
            </div>
            
            <div className="cs-form-row cs-checkbox-row">
              <div className="cs-form-group cs-checkbox-group">
                <input
                  type="checkbox"
                  id="enable-tracing"
                  checked={adv.enableTracing}
                  onChange={(e) => updateAdvanced('enableTracing', e.target.checked)}
                  disabled={disabled || loading}
                />
                <label htmlFor="enable-tracing">Enable Tracing</label>
              </div>
              
              <div className="cs-form-group cs-checkbox-group">
                <input
                  type="checkbox"
                  id="enable-network-capture"
                  checked={adv.enableNetworkCapture}
                  onChange={(e) => updateAdvanced('enableNetworkCapture', e.target.checked)}
                  disabled={disabled || loading}
                />
                <label htmlFor="enable-network-capture">Enable Network Capture</label>
              </div>
            </div>
            
            <div className="cs-form-section">
              <h4 className="cs-form-section-title">Custom Capabilities</h4>
              
              {customCapabilitiesKeys.map((key, index) => (
                <div key={`capability-${index}`} className="cs-key-value-row">
                  <div className="cs-form-group">
                    <input
                      type="text"
                      className="cs-input"
                      placeholder="Capability Key"
                      value={key}
                      onChange={(e) => updateCustomCapabilityKey(index, e.target.value)}
                      onBlur={updateCustomCapabilities}
                      disabled={disabled || loading}
                    />
                  </div>
                  
                  <div className="cs-form-group">
                    <input
                      type="text"
                      className="cs-input"
                      placeholder="Capability Value"
                      value={customCapabilitiesValues[index]}
                      onChange={(e) => updateCustomCapabilityValue(index, e.target.value)}
                      onBlur={updateCustomCapabilities}
                      disabled={disabled || loading}/>
                  </div>
                  
                  <button
                    type="button"
                    className="cs-remove-row"
                    onClick={() => removeCustomCapabilityField(index)}
                    disabled={disabled || loading}
                  >
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M18 6L6 18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                      <path d="M6 6L18 18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    </svg>
                  </button>
                </div>
              ))}
              
              <button
                type="button"
                className="cs-add-row"
                onClick={addCustomCapabilityField}
                disabled={disabled || loading}
              >
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 6V18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  <path d="M6 12H18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
                Add Capability
              </button>
            </div>
            
            <div className="cs-form-section">
              <h4 className="cs-form-section-title">Custom Data</h4>
              
              {customDataKeys.map((key, index) => (
                <div key={`data-${index}`} className="cs-key-value-row">
                  <div className="cs-form-group">
                    <input
                      type="text"
                      className="cs-input"
                      placeholder="Data Key"
                      value={key}
                      onChange={(e) => updateCustomDataKey(index, e.target.value)}
                      onBlur={updateCustomData}
                      disabled={disabled || loading}
                    />
                  </div>
                  
                  <div className="cs-form-group">
                    <input
                      type="text"
                      className="cs-input"
                      placeholder="Data Value"
                      value={customDataValues[index]}
                      onChange={(e) => updateCustomDataValue(index, e.target.value)}
                      onBlur={updateCustomData}
                      disabled={disabled || loading}
                    />
                  </div>
                  
                  <button
                    type="button"
                    className="cs-remove-row"
                    onClick={() => removeCustomDataField(index)}
                    disabled={disabled || loading}
                  >
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M18 6L6 18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                      <path d="M6 6L18 18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    </svg>
                  </button>
                </div>
              ))}
              
              <button
                type="button"
                className="cs-add-row"
                onClick={addCustomDataField}
                disabled={disabled || loading}
              >
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 6V18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  <path d="M6 12H18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
                Add Custom Data
              </button>
            </div>
          </div>
        )}
      </div>
    );
  };
  
  // Render data provider configuration
  const renderDataProviderConfig = () => {
    return (
      <div className="cs-config-section">
        <div 
          className="cs-config-header" 
          onClick={() => toggleSection('dataProvider')}
        >
          <h3 className="cs-config-title">Data Provider Configuration</h3>
          <span className={`cs-config-arrow ${expandedSections.dataProvider ? 'expanded' : ''}`}>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M6 9L12 15L18 9" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            </svg>
          </span>
        </div>
        
        {expandedSections.dataProvider && (
          <div className="cs-config-content">
            <div className="cs-form-group cs-checkbox-group">
              <input
                type="checkbox"
                id="enable-data-provider"
                checked={dataProviderEnabled}
                onChange={(e) => toggleDataProvider(e.target.checked)}
                disabled={disabled || loading}
              />
              <label htmlFor="enable-data-provider">Enable Data Provider</label>
            </div>
            
            {dataProviderEnabled && fullConfig.dataProvider && (
              <>
                <div className="cs-form-group">
                  <label htmlFor="data-provider-type">Data Provider Type</label>
                  <select
                    id="data-provider-type"
                    className="cs-select"
                    value={fullConfig.dataProvider.type}
                    onChange={(e) => updateDataProvider('type', e.target.value as any)}
                    disabled={disabled || loading}
                  >
                    <option value="excel">Excel</option>
                    <option value="csv">CSV</option>
                    <option value="json">JSON</option>
                    <option value="database">Database</option>
                  </select>
                </div>
                
                {(fullConfig.dataProvider.type === 'excel' || 
                  fullConfig.dataProvider.type === 'csv' || 
                  fullConfig.dataProvider.type === 'json') && (
                  <>
                    <div className="cs-form-group">
                      <label htmlFor="data-provider-path">File Path</label>
                      <input
                        type="text"
                        id="data-provider-path"
                        className={`cs-input ${validationErrors.dataProviderPath ? 'cs-input-error' : ''}`}
                        value={fullConfig.dataProvider.path || ''}
                        onChange={(e) => updateDataProvider('path', e.target.value)}
                        disabled={disabled || loading}
                      />
                      {validationErrors.dataProviderPath && (
                        <div className="cs-input-error-message">{validationErrors.dataProviderPath}</div>
                      )}
                    </div>
                    
                    {fullConfig.dataProvider.type === 'excel' && (
                      <div className="cs-form-group">
                        <label htmlFor="data-provider-sheet">Sheet Name</label>
                        <input
                          type="text"
                          id="data-provider-sheet"
                          className="cs-input"
                          value={fullConfig.dataProvider.sheet || ''}
                          onChange={(e) => updateDataProvider('sheet', e.target.value)}
                          disabled={disabled || loading}
                        />
                      </div>
                    )}
                  </>
                )}
                
                {fullConfig.dataProvider.type === 'database' && (
                  <>
                    <div className="cs-form-group">
                      <label htmlFor="data-provider-connection">Connection String</label>
                      <input
                        type="text"
                        id="data-provider-connection"
                        className={`cs-input ${validationErrors.connectionString ? 'cs-input-error' : ''}`}
                        value={fullConfig.dataProvider.connectionString || ''}
                        onChange={(e) => updateDataProvider('connectionString', e.target.value)}
                        disabled={disabled || loading}
                      />
                      {validationErrors.connectionString && (
                        <div className="cs-input-error-message">{validationErrors.connectionString}</div>
                      )}
                    </div>
                    
                    <div className="cs-form-group">
                      <label htmlFor="data-provider-query">Query</label>
                      <textarea
                        id="data-provider-query"
                        className={`cs-textarea ${validationErrors.query ? 'cs-input-error' : ''}`}
                        value={fullConfig.dataProvider.query || ''}
                        onChange={(e) => updateDataProvider('query', e.target.value)}
                        rows={3}
                        disabled={disabled || loading}
                      />
                      {validationErrors.query && (
                        <div className="cs-input-error-message">{validationErrors.query}</div>
                      )}
                    </div>
                  </>
                )}
              </>
            )}
          </div>
        )}
      </div>
    );
  };
  
  // Render error message
  const renderError = () => {
    if (!error) return null;
    
    return (
      <div className="cs-config-error">
        <span className="cs-error-icon">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M12 8V12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M12 16H12.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        </span>
        <span className="cs-error-message">{error}</span>
      </div>
    );
  };
  
  // Render loading state
  const renderLoading = () => {
    if (!loading) return null;
    
    return (
      <div className="cs-config-loading">
        <div className="cs-loading-spinner"></div>
        <span className="cs-loading-message">Loading configuration...</span>
      </div>
    );
  };
  
  return (
    <div className={`cs-framework-config ${className} ${disabled ? 'disabled' : ''}`}>
      {renderBrowserConfig()}
      {renderEnvironmentConfig()}
      {renderAdvancedConfig()}
      {renderDataProviderConfig()}
      {renderError()}
      {renderLoading()}
    </div>
  );
};

export default FrameworkConfigComponent;


FrameworkConfig.css
------------------------

:root {
  --cs-primary-color: #C54B8C; /* Primary brand color */
  --cs-primary-hover: #aa3d76;
  --cs-primary-light: rgba(197, 75, 140, 0.1);
  --cs-text-color: #333333;
  --cs-text-secondary: #666666;
  --cs-border-color: #e0e0e0;
  --cs-bg-color: #ffffff;
  --cs-bg-secondary: #f8f9fa;
  --cs-error-color: #f44336;
  --cs-success-color: #4caf50;
  --cs-warning-color: #ff9800;
  --cs-disabled-bg: #f5f5f5;
  --cs-disabled-text: #aaaaaa;
  --cs-transition: all 0.3s ease;
  --cs-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  --cs-radius: 8px;
}

/* Main container */
.cs-framework-config {
  display: flex;
  flex-direction: column;
  background-color: var(--cs-bg-color);
  border-radius: var(--cs-radius);
  box-shadow: var(--cs-shadow);
  padding: 0;
  margin-bottom: 2rem;
  position: relative;
  max-width: 900px;
}

/* Disabled state */
.cs-framework-config.disabled {
  opacity: 0.7;
  pointer-events: none;
}

/* Section styles */
.cs-config-section {
  border-bottom: 1px solid var(--cs-border-color);
}

.cs-config-section:last-child {
  border-bottom: none;
}

.cs-config-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1.25rem 1.5rem;
  cursor: pointer;
  transition: var(--cs-transition);
}

.cs-config-header:hover {
  background-color: var(--cs-bg-secondary);
}

.cs-config-title {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--cs-text-color);
}

.cs-config-arrow {
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.3s ease;
}

.cs-config-arrow.expanded {
  transform: rotate(180deg);
}

.cs-config-content {
  padding: 1.5rem;
  border-top: 1px solid var(--cs-border-color);
}

/* Browser configuration styles */
.cs-browser-config {
  background-color: var(--cs-bg-secondary);
  border-radius: var(--cs-radius);
  padding: 1.25rem;
  margin-bottom: 1rem;
}

.cs-browser-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.cs-browser-title {
  margin: 0;
  font-size: 1rem;
  font-weight: 600;
  color: var(--cs-text-color);
}

.cs-remove-browser {
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  color: var(--cs-text-secondary);
  cursor: pointer;
  padding: 0.25rem;
  border-radius: 50%;
  transition: var(--cs-transition);
}

.cs-remove-browser:hover {
  background-color: rgba(244, 67, 54, 0.1);
  color: var(--cs-error-color);
}

.cs-add-browser,
.cs-add-row {
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: 1px dashed var(--cs-border-color);
  color: var(--cs-primary-color);
  padding: 0.75rem;
  border-radius: var(--cs-radius);
  cursor: pointer;
  width: 100%;
  font-weight: 500;
  transition: var(--cs-transition);
}

.cs-add-browser svg,
.cs-add-row svg {
  margin-right: 0.5rem;
}

.cs-add-browser:hover,
.cs-add-row:hover {
  background-color: var(--cs-primary-light);
  border-color: var(--cs-primary-color);
}

/* Form styles */
.cs-form-group {
  margin-bottom: 1rem;
}

.cs-form-group:last-child {
  margin-bottom: 0;
}

.cs-form-group label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 500;
  color: var(--cs-text-color);
}

.cs-input,
.cs-select,
.cs-textarea {
  width: 100%;
  padding: 0.75rem 1rem;
  font-size: 0.95rem;
  line-height: 1.5;
  color: var(--cs-text-color);
  background-color: var(--cs-bg-color);
  border: 1px solid var(--cs-border-color);
  border-radius: 4px;
  transition: var(--cs-transition);
}

.cs-textarea {
  resize: vertical;
  min-height: 100px;
}

.cs-input:focus,
.cs-select:focus,
.cs-textarea:focus {
  outline: none;
  border-color: var(--cs-primary-color);
  box-shadow: 0 0 0 2px var(--cs-primary-light);
}

.cs-input:disabled,
.cs-select:disabled,
.cs-textarea:disabled {
  background-color: var(--cs-disabled-bg);
  cursor: not-allowed;
}

.cs-input-error {
  border-color: var(--cs-error-color);
}

.cs-input-error:focus {
  box-shadow: 0 0 0 2px rgba(244, 67, 54, 0.1);
}

.cs-input-error-message {
  color: var(--cs-error-color);
  font-size: 0.85rem;
  margin-top: 0.25rem;
}

.cs-select {
  appearance: none;
  background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJmZWF0aGVyIGZlYXRoZXItY2hldnJvbi1kb3duIj48cG9seWxpbmUgcG9pbnRzPSI2IDkgMTIgMTUgMTggOSI+PC9wb2x5bGluZT48L3N2Zz4=");
  background-repeat: no-repeat;
  background-position: right 1rem center;
  background-size: 16px;
  padding-right: 2.5rem;
}

/* Checkbox styles */
.cs-checkbox-group {
  display: flex;
  align-items: center;
}

.cs-checkbox-group input[type="checkbox"] {
  margin-right: 0.5rem;
  width: 18px;
  height: 18px;
  cursor: pointer;
}

.cs-checkbox-group label {
  margin-bottom: 0;
  cursor: pointer;
}

/* Form layout helpers */
.cs-form-row {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
}

.cs-form-row > .cs-form-group {
  flex: 1;
  margin-bottom: 0;
}

.cs-form-row.cs-checkbox-row {
  display: flex;
  flex-wrap: wrap;
  gap: 1.5rem;
}

.cs-form-row.cs-checkbox-row > .cs-form-group {
  flex: initial;
}

/* Form sections */
.cs-form-section {
  margin-top: 1.5rem;
  padding-top: 1.5rem;
  border-top: 1px solid var(--cs-border-color);
}

.cs-form-section-title {
  margin: 0 0 1rem 0;
  font-size: 1rem;
  font-weight: 600;
  color: var(--cs-text-color);
}

/* Key-value pair rows */
.cs-key-value-row {
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
  margin-bottom: 0.75rem;
}

.cs-key-value-row > .cs-form-group {
  flex: 1;
  margin-bottom: 0;
}

.cs-key-value-row .cs-form-group:first-child {
  flex: 0.4;
}

.cs-key-value-row .cs-form-group:nth-child(2) {
  flex: 0.6;
}

.cs-remove-row {
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  color: var(--cs-text-secondary);
  cursor: pointer;
  padding: 0.25rem;
  border-radius: 50%;
  transition: var(--cs-transition);
  margin-top: 0.75rem;
}

.cs-remove-row:hover {
  background-color: rgba(244, 67, 54, 0.1);
  color: var(--cs-error-color);
}

/* Status indicators */
.cs-config-error,
.cs-config-loading {
  display: flex;
  align-items: center;
  padding: 1rem 1.5rem;
  border-top: 1px solid var(--cs-border-color);
}

.cs-config-error {
  background-color: rgba(244, 67, 54, 0.1);
  color: var(--cs-error-color);
}

.cs-config-loading {
  background-color: rgba(33, 150, 243, 0.1);
  color: #2196f3;
}

.cs-error-icon,
.cs-loading-spinner {
  margin-right: 0.75rem;
}

.cs-loading-spinner {
  width: 20px;
  height: 20px;
  border: 2px solid #2196f3;
  border-radius: 50%;
  border-top-color: transparent;
  animation: spin 1s linear infinite;
}

.cs-error-message,
.cs-loading-message {
  font-size: 0.95rem;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* Responsive styles */
@media (max-width: 768px) {
  .cs-form-row {
    flex-direction: column;
    gap: 1rem;
  }
  
  .cs-form-row > .cs-form-group {
    margin-bottom: 0;
  }
  
  .cs-key-value-row {
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .cs-key-value-row > .cs-form-group {
    width: 100%;
  }
  
  .cs-key-value-row .cs-form-group:first-child,
  .cs-key-value-row .cs-form-group:nth-child(2) {
    flex: 1;
  }
  
  .cs-remove-row {
    align-self: center;
    margin-top: 0;
  }
  
  .cs-browser-config {
    padding: 1rem;
  }
  
  .cs-config-content {
    padding: 1rem;
  }
}


RecorderComponent.tsx
----------------------------------------------

import React, { useState, useEffect, useRef, useCallback } from 'react';
import './RecorderComponent.css';
import ActionToolbar from './ActionToolbar';
import BrowserFrame from './BrowserFrame';
import StepsList from './StepsList';
import ElementHighlighter from './ElementHighlighter';

export interface ElementInfo {
  id?: string;
  tagName: string;
  type?: string;
  name?: string;
  text?: string;
  value?: string;
  placeholder?: string;
  className?: string;
  xpath?: string;
  selector?: string;
  attributes: Record<string, string>;
  location: {
    x: number;
    y: number;
    width: number;
    height: number;
  };
  frameId?: string;
  frameLocation?: {
    x: number;
    y: number;
  };
}

export interface RecordingAction {
  id: string;
  type: 'click' | 'input' | 'select' | 'hover' | 'navigate' | 'wait' | 'assert' | 'custom' | 'conditional' | 'loop' | 'dataDriven';
  element?: ElementInfo;
  value?: string;
  targetUrl?: string;
  condition?: string;
  subActions?: RecordingAction[];
  waitCondition?: string;
  waitTimeout?: number;
  assertType?: 'visible' | 'text' | 'value' | 'attribute' | 'exists' | 'enabled' | 'selected';
  assertValue?: string;
  assertAttribute?: string;
  customCode?: string;
  timestamp: number;
  framePath?: string[];
  description?: string;
  screenshot?: string;
  variables?: Record<string, string>;
  loopType?: 'for' | 'while' | 'forEach';
  loopCondition?: string;
  loopVariable?: string;
  loopStart?: number;
  loopEnd?: number;
  loopStep?: number;
  loopItems?: string;
  dataProvider?: {
    type: 'excel' | 'csv' | 'json' | 'database';
    path?: string;
    sheet?: string;
    query?: string;
    connectionString?: string;
  };
  children?: RecordingAction[];
}

export interface RecordingSession {
  id: string;
  url: string;
  actions: RecordingAction[];
  name: string;
  createdAt: number;
  updatedAt: number;
  framework: 'selenium' | 'playwright';
  language: 'java' | 'typescript';
  testType: 'testng' | 'bdd';
}

export interface RecordingOptions {
  captureScreenshots: boolean;
  highlightElements: boolean;
  recordMouseMoves: boolean;
  recordKeystrokes: boolean;
  smartLocators: boolean;
  recordHovers: boolean;
  recordAssertions: boolean;
  recordNavigations: boolean;
  recordWaits: boolean;
  recordFrames: boolean;
  recordIframes: boolean;
  interceptNetwork: boolean;
  captureConsole: boolean;
  slowMotion: boolean;
  slowMotionDelay: number;
  headless: boolean;
}

interface RecorderComponentProps {
  /** Initial recording session data */
  initialSession?: RecordingSession;
  /** Initial URL to navigate to */
  initialUrl?: string;
  /** Recording options */
  options?: Partial<RecordingOptions>;
  /** Callback for when the recording is saved */
  onSave?: (session: RecordingSession) => void;
  /** Callback for when recording is started */
  onStart?: () => void;
  /** Callback for when recording is stopped */
  onStop?: () => void;
  /** Callback for when recording is cleared */
  onClear?: () => void;
  /** Callback for errors */
  onError?: (error: Error) => void;
  /** If true, recording is active */
  isRecording?: boolean;
  /** CSS class name */
  className?: string;
  /** Framework in use */
  framework?: 'selenium' | 'playwright';
  /** Programming language in use */
  language?: 'java' | 'typescript';
  /** Test type in use */
  testType?: 'testng' | 'bdd';
  /** Whether the component is in a loading state */
  loading?: boolean;
  /** Error message to display */
  error?: string;
}

/**
 * The main recorder component for the CSTestForge application.
 * 
 * Features:
 * - Browser interaction recording
 * - Step management (add, edit, delete, reorder)
 * - Element highlighting
 * - Smart locator generation
 * - Advanced action recording (conditions, loops, etc.)
 * - Screenshots
 * - Variable management
 * - Cross-iframe recording
 */
const RecorderComponent: React.FC<RecorderComponentProps> = ({
  initialSession,
  initialUrl = 'about:blank',
  options,
  onSave,
  onStart,
  onStop,
  onClear,
  onError,
  isRecording: externalIsRecording,
  className = '',
  framework = 'selenium',
  language = 'java',
  testType = 'testng',
  loading = false,
  error
}) => {
  // Default recording options
  const defaultOptions: RecordingOptions = {
    captureScreenshots: true,
    highlightElements: true,
    recordMouseMoves: false,
    recordKeystrokes: true,
    smartLocators: true,
    recordHovers: false,
    recordAssertions: true,
    recordNavigations: true,
    recordWaits: true,
    recordFrames: true,
    recordIframes: true,
    interceptNetwork: false,
    captureConsole: true,
    slowMotion: false,
    slowMotionDelay: 500,
    headless: false
  };
  
  // Combined options (defaults + provided)
  const recordingOptions: RecordingOptions = { ...defaultOptions, ...options };
  
  // Recording state
  const [isRecording, setIsRecording] = useState<boolean>(externalIsRecording ?? false);
  const [isPaused, setIsPaused] = useState<boolean>(false);
  const [currentUrl, setCurrentUrl] = useState<string>(initialUrl);
  
  // Session state
  const [session, setSession] = useState<RecordingSession>(initialSession || {
    id: `rec_${Date.now()}`,
    url: initialUrl,
    actions: [],
    name: `Recording ${new Date().toLocaleString()}`,
    createdAt: Date.now(),
    updatedAt: Date.now(),
    framework,
    language,
    testType
  });
  
  // Selected step state
  const [selectedStepId, setSelectedStepId] = useState<string | null>(null);
  
  // Highlighted element state
  const [highlightedElement, setHighlightedElement] = useState<ElementInfo | null>(null);
  
  // Browser frame refs
  const browserFrameRef = useRef<any>(null);
  
  // WebSocket connection for real-time communication
  const wsRef = useRef<WebSocket | null>(null);
  
  // Handle recording from parent component
  useEffect(() => {
    if (externalIsRecording !== undefined) {
      setIsRecording(externalIsRecording);
      
      if (externalIsRecording) {
        startRecording();
      } else {
        stopRecording();
      }
    }
  }, [externalIsRecording]);
  
  // Set up WebSocket connection
  useEffect(() => {
    if (isRecording && !wsRef.current) {
      // Create WebSocket connection
      try {
        const wsProtocol = window.location.protocol === 'https:' ? 'wss' : 'ws';
        const wsUrl = `${wsProtocol}://${window.location.host}/api/ws/recorder`;
        
        const ws = new WebSocket(wsUrl);
        
        ws.onopen = () => {
          console.log('WebSocket connection established');
          wsRef.current = ws;
          
          // Send recorder configuration
          sendWebSocketMessage({
            type: 'config',
            data: {
              options: recordingOptions,
              framework,
              language,
              testType,
              sessionId: session.id
            }
          });
        };
        
        ws.onmessage = (event) => {
          try {
            const message = JSON.parse(event.data);
            handleWebSocketMessage(message);
          } catch (error) {
            console.error('Error parsing WebSocket message:', error);
            handleError(new Error('Failed to parse WebSocket message'));
          }
        };
        
        ws.onerror = (event) => {
          console.error('WebSocket error:', event);
          handleError(new Error('WebSocket connection error'));
        };
        
        ws.onclose = () => {
          console.log('WebSocket connection closed');
          wsRef.current = null;
          
          // If we were recording, stop recording
          if (isRecording) {
            setIsRecording(false);
            if (onStop) onStop();
          }
        };
        
        // Clean up WebSocket on unmount
        return () => {
          if (ws && ws.readyState === WebSocket.OPEN) {
            ws.close();
          }
          wsRef.current = null;
        };
      } catch (error) {
        console.error('Failed to establish WebSocket connection:', error);
        handleError(new Error('Failed to establish WebSocket connection'));
      }
    }
  }, [isRecording, recordingOptions, framework, language, testType, session.id]);
  
  // Send message via WebSocket
  const sendWebSocketMessage = (message: any) => {
    if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {
      wsRef.current.send(JSON.stringify(message));
    } else {
      console.warn('WebSocket not connected, message not sent:', message);
    }
  };
  
  // Handle incoming WebSocket messages
  const handleWebSocketMessage = (message: any) => {
    switch (message.type) {
      case 'action':
        // New action recorded
        handleNewAction(message.data);
        break;
      case 'element':
        // Element highlighted/selected
        setHighlightedElement(message.data);
        break;
      case 'navigate':
        // URL changed
        setCurrentUrl(message.data.url);
        break;
      case 'screenshot':
        // Screenshot captured
        updateActionScreenshot(message.data.actionId, message.data.screenshot);
        break;
      case 'error':
        // Error occurred
        handleError(new Error(message.data.message));
        break;
      default:
        console.warn('Unknown WebSocket message type:', message.type);
    }
  };
  
  // Start recording
  const startRecording = () => {
    setIsRecording(true);
    setIsPaused(false);
    
    if (onStart) onStart();
    
    // If we have a browser frame, start recording
    if (browserFrameRef.current) {
      browserFrameRef.current.startRecording(recordingOptions);
    }
  };
  
  // Stop recording
  const stopRecording = () => {
    setIsRecording(false);
    setIsPaused(false);
    
    if (onStop) onStop();
    
    // If we have a browser frame, stop recording
    if (browserFrameRef.current) {
      browserFrameRef.current.stopRecording();
    }
    
    // Close WebSocket connection
    if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {
      wsRef.current.close();
      wsRef.current = null;
    }
  };
  
  // Pause recording
  const pauseRecording = () => {
    setIsPaused(true);
    
    // If we have a browser frame, pause recording
    if (browserFrameRef.current) {
      browserFrameRef.current.pauseRecording();
    }
    
    // Send pause message via WebSocket
    sendWebSocketMessage({
      type: 'pause'
    });
  };
  
  // Resume recording
  const resumeRecording = () => {
    setIsPaused(false);
    
    // If we have a browser frame, resume recording
    if (browserFrameRef.current) {
      browserFrameRef.current.resumeRecording();
    }
    
    // Send resume message via WebSocket
    sendWebSocketMessage({
      type: 'resume'
    });
  };
  
  // Clear recording
  const clearRecording = () => {
    // Create a new session with no actions
    const newSession: RecordingSession = {
      ...session,
      actions: [],
      updatedAt: Date.now()
    };
    
    setSession(newSession);
    setSelectedStepId(null);
    
    if (onClear) onClear();
    
    // If recording, send clear message via WebSocket
    if (isRecording) {
      sendWebSocketMessage({
        type: 'clear'
      });
    }
  };
  
  // Save recording
  const saveRecording = () => {
    // Update session timestamp
    const updatedSession: RecordingSession = {
      ...session,
      updatedAt: Date.now()
    };
    
    setSession(updatedSession);
    
    if (onSave) onSave(updatedSession);
  };
  
  // Handle new action recorded
  const handleNewAction = (action: RecordingAction) => {
    // Add action to session
    setSession(prev => {
      const updatedSession: RecordingSession = {
        ...prev,
        actions: [...prev.actions, action],
        updatedAt: Date.now()
      };
      
      return updatedSession;
    });
    
    // Auto-select the new action
    setSelectedStepId(action.id);
  };
  
  // Update action screenshot
  const updateActionScreenshot = (actionId: string, screenshot: string) => {
    setSession(prev => {
      const actionIndex = prev.actions.findIndex(a => a.id === actionId);
      
      if (actionIndex === -1) return prev;
      
      const updatedActions = [...prev.actions];
      updatedActions[actionIndex] = {
        ...updatedActions[actionIndex],
        screenshot
      };
      
      return {
        ...prev,
        actions: updatedActions,
        updatedAt: Date.now()
      };
    });
  };
  
  // Handle URL change
  const handleUrlChange = (url: string) => {
    setCurrentUrl(url);
    
    // If recording, navigate the browser frame
    if (isRecording && browserFrameRef.current) {
      browserFrameRef.current.navigate(url);
    }
  };
  
  // Handle action selection
  const handleActionSelect = (actionId: string) => {
    setSelectedStepId(actionId);
    
    // If we have a browser frame and the action has a screenshot, highlight the element
    if (browserFrameRef.current) {
      const action = session.actions.find(a => a.id === actionId);
      
      if (action && action.element) {
        // Highlight the element
        browserFrameRef.current.highlightElement(action.element);
        setHighlightedElement(action.element);
      }
    }
  };
  
  // Handle action edit
  const handleActionEdit = (actionId: string, updatedAction: Partial<RecordingAction>) => {
    setSession(prev => {
      const actionIndex = prev.actions.findIndex(a => a.id === actionId);
      
      if (actionIndex === -1) return prev;
      
      const updatedActions = [...prev.actions];
      updatedActions[actionIndex] = {
        ...updatedActions[actionIndex],
        ...updatedAction
      };
      
      return {
        ...prev,
        actions: updatedActions,
        updatedAt: Date.now()
      };
    });
  };
  
  // Handle action delete
  const handleActionDelete = (actionId: string) => {
    setSession(prev => {
      const actionIndex = prev.actions.findIndex(a => a.id === actionId);
      
      if (actionIndex === -1) return prev;
      
      const updatedActions = [...prev.actions];
      updatedActions.splice(actionIndex, 1);
      
      // If the deleted action was selected, clear selection
      if (selectedStepId === actionId) {
        setSelectedStepId(null);
        setHighlightedElement(null);
      }
      
      return {
        ...prev,
        actions: updatedActions,
        updatedAt: Date.now()
      };
    });
  };
  
  // Handle action reorder
  const handleActionReorder = (actionId: string, newIndex: number) => {
    setSession(prev => {
      const oldIndex = prev.actions.findIndex(a => a.id === actionId);
      
      if (oldIndex === -1 || newIndex < 0 || newIndex >= prev.actions.length) {
        return prev;
      }
      
      const updatedActions = [...prev.actions];
      const [movedAction] = updatedActions.splice(oldIndex, 1);
      updatedActions.splice(newIndex, 0, movedAction);
      
      return {
        ...prev,
        actions: updatedActions,
        updatedAt: Date.now()
      };
    });
  };
  
  // Handle action insert from toolbar
  const handleActionInsert = (action: RecordingAction) => {
    // If a step is selected, insert after that step
    let insertIndex = session.actions.length;
    
    if (selectedStepId) {
      const selectedIndex = session.actions.findIndex(a => a.id === selectedStepId);
      if (selectedIndex !== -1) {
        insertIndex = selectedIndex + 1;
      }
    }
    
    // Add action to session at the specified index
    setSession(prev => {
      const updatedActions = [...prev.actions];
      updatedActions.splice(insertIndex, 0, action);
      
      return {
        ...prev,
        actions: updatedActions,
        updatedAt: Date.now()
      };
    });
    
    // Select the new action
    setSelectedStepId(action.id);
  };
  
  // Handle element highlight from toolbar
  const handleElementHighlight = (showHighlighter: boolean) => {
    if (browserFrameRef.current) {
      browserFrameRef.current.toggleElementPicker(showHighlighter);
    }
  };
  
  // Handle element selection from highlighter
  const handleElementSelect = (element: ElementInfo) => {
    setHighlightedElement(element);
  };
  
  // Handle errors
  const handleError = (error: Error) => {
    console.error('Recorder error:', error);
    
    if (onError) {
      onError(error);
    }
  };
  
  // Handle session name change
  const handleNameChange = (name: string) => {
    setSession(prev => ({
      ...prev,
      name,
      updatedAt: Date.now()
    }));
  };
  
  // Render controls
  const renderControls = () => {
    return (
      <div className="cs-recorder-controls">
        <div className="cs-recorder-action-controls">
          {/* Recording controls */}
          {!isRecording ? (
            <button
              className="cs-recorder-button cs-recorder-start"
              onClick={startRecording}
              disabled={loading}
            >
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5 3L19 12L5 21V3Z" fill="currentColor" />
              </svg>
              <span>Start Recording</span>
            </button>
          ) : (
            <>
              {isPaused ? (
                <button
                  className="cs-recorder-button cs-recorder-resume"
                  onClick={resumeRecording}
                  disabled={loading}
                >
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5 3L19 12L5 21V3Z" fill="currentColor" />
                  </svg>
                  <span>Resume</span>
                </button>
              ) : (
                <button
                  className="cs-recorder-button cs-recorder-pause"
                  onClick={pauseRecording}
                  disabled={loading}
                >
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="6" y="4" width="4" height="16" rx="1" fill="currentColor" />
                    <rect x="14" y="4" width="4" height="16" rx="1" fill="currentColor" />
                  </svg>
                  <span>Pause</span>
                </button>
              )}
              
              <button
                className="cs-recorder-button cs-recorder-stop"
                onClick={stopRecording}
                disabled={loading}
              >
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <rect x="4" y="4" width="16" height="16" rx="2" fill="currentColor" />
                </svg>
                <span>Stop</span>
              </button>
            </>
          )}
          
          {/* Clear button */}
          <button
            className="cs-recorder-button cs-recorder-clear"
            onClick={clearRecording}
            disabled={loading || session.actions.length === 0}
          >
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19 6L5 20M5 6L19 20" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            </svg>
            <span>Clear</span>
          </button>
        </div>
        
        <div className="cs-recorder-save-controls">
          {/* Session name input */}
          <div className="cs-recorder-name-input">
            <input
              type="text"
              value={session.name}
              onChange={(e) => handleNameChange(e.target.value)}
              placeholder="Recording Name"
              disabled={loading}
            />
          </div>
          
          {/* Save button */}
          <button
            className="cs-recorder-button cs-recorder-save"
            onClick={saveRecording}
            disabled={loading || session.actions.length === 0}
          >
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19 21H5C3.89543 21 3 20.1046 3 19V5C3 3.89543 3.89543 3 5 3H16L21 8V19C21 20.1046 20.1046 21 19 21Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
              <path d="M17 21V13H7V21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
              <path d="M7 3V8H15" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            </svg>
            <span>Save</span>
          </button>
        </div>
      </div>
    );
  };
  
  // Render URL bar
  const renderUrlBar = () => {
    return (
      <div className="cs-recorder-url-bar">
        <div className="cs-url-input-container">
          <input
            type="text"
            className="cs-url-input"
            value={currentUrl}
            onChange={(e) => setCurrentUrl(e.target.value)}
            onKeyDown={(e) => {
              if (e.key === 'Enter') {
                handleUrlChange(currentUrl);
              }
            }}
            placeholder="https://example.com"
            disabled={loading}
          />
          
          <button
            className="cs-url-go-button"
            onClick={() => handleUrlChange(currentUrl)}
            disabled={loading}
          >
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M5 12H19" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
              <path d="M12 5L19 12L12 19" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            </svg>
          </button>
        </div>
      </div>
    );
  };
  
  // Render error message
  const renderError = () => {
    if (!error) return null;
    
    return (
      <div className="cs-recorder-error">
        <span className="cs-error-icon">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M12 8V12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M12 16H12.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        </span>
        <span className="cs-error-message">{error}</span>
      </div>
    );
  };
  
  // Render loading state
  const renderLoading = () => {
    if (!loading) return null;
    
    return (
      <div className="cs-recorder-loading">
        <div className="cs-loading-spinner"></div>
        <span className="cs-loading-message">Loading recorder...</span>
      </div>
    );
  };
  
  return (
    <div className={`cs-recorder ${className}`}>
      {renderControls()}
      
      <div className="cs-recorder-content">
        <div className="cs-recorder-sidebar">
          <ActionToolbar
            onActionAdd={handleActionInsert}
            onElementHighlight={handleElementHighlight}
            isRecording={isRecording}
            isPaused={isPaused}
            framework={framework}
            language={language}
            testType={testType}
            disabled={loading}
          />
          
          <StepsList
            actions={session.actions}
            selectedStepId={selectedStepId}
            onActionSelect={handleActionSelect}
            onActionEdit={handleActionEdit}
            onActionDelete={handleActionDelete}
            onActionReorder={handleActionReorder}
            isRecording={isRecording}
            isPaused={isPaused}
            framework={framework}
            language={language}
            testType={testType}
            disabled={loading}
          />
        </div>
        
        <div className="cs-recorder-main">
          {renderUrlBar()}
          
          {renderError()}
          {renderLoading()}
          
          <div className="cs-recorder-browser-container">
            <BrowserFrame
              ref={browserFrameRef}
              url={currentUrl}
              isRecording={isRecording}
              onUrlChange={handleUrlChange}
              onError={handleError}
              options={recordingOptions}
              framework={framework}
              language={language}
              testType={testType}
              disabled={loading}
            />
            
            {highlightedElement && recordingOptions.highlightElements && (
              <ElementHighlighter
                element={highlightedElement}
                onElementSelect={handleElementSelect}
              />
            )}
          </div>
        </div>
      </div>
    </div>
  );
};

export default RecorderComponent;



RecorderComponent.css
-------------------------------------

:root {
  --cs-primary-color: #C54B8C; /* Primary brand color */
  --cs-primary-hover: #aa3d76;
  --cs-primary-light: rgba(197, 75, 140, 0.1);
  --cs-primary-active: #8f345f;
  --cs-text-color: #333333;
  --cs-text-secondary: #666666;
  --cs-border-color: #e0e0e0;
  --cs-bg-color: #ffffff;
  --cs-bg-secondary: #f8f9fa;
  --cs-error-color: #f44336;
  --cs-success-color: #4caf50;
  --cs-warning-color: #ff9800;
  --cs-disabled-bg: #f5f5f5;
  --cs-disabled-text: #aaaaaa;
  --cs-transition: all 0.3s ease;
  --cs-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  --cs-radius: 8px;
  --cs-recorder-sidebar-width: 350px;
  --cs-recorder-url-bar-height: 48px;
  --cs-recorder-controls-height: 64px;
}

/* Main container */
.cs-recorder {
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
  background-color: var(--cs-bg-color);
  overflow: hidden;
  position: relative;
  border-radius: var(--cs-radius);
  box-shadow: var(--cs-shadow);
}

/* Controls section */
.cs-recorder-controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: var(--cs-recorder-controls-height);
  padding: 0 1rem;
  border-bottom: 1px solid var(--cs-border-color);
  background-color: var(--cs-bg-secondary);
}

.cs-recorder-action-controls {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.cs-recorder-save-controls {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.cs-recorder-name-input {
  position: relative;
}

.cs-recorder-name-input input {
  width: 250px;
  padding: 0.5rem 0.75rem;
  border: 1px solid var(--cs-border-color);
  border-radius: 4px;
  font-size: 0.9rem;
  transition: var(--cs-transition);
}

.cs-recorder-name-input input:focus {
  outline: none;
  border-color: var(--cs-primary-color);
  box-shadow: 0 0 0 3px var(--cs-primary-light);
}

.cs-recorder-button {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 4px;
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: var(--cs-transition);
  background-color: var(--cs-bg-secondary);
  color: var(--cs-text-color);
  border: 1px solid var(--cs-border-color);
}

.cs-recorder-button svg {
  margin-right: 0.5rem;
}

.cs-recorder-button:hover {
  background-color: var(--cs-bg-color);
  border-color: var(--cs-primary-color);
}

.cs-recorder-button:active {
  transform: translateY(1px);
}

.cs-recorder-button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.cs-recorder-start,
.cs-recorder-resume {
  background-color: var(--cs-success-color);
  color: white;
  border-color: var(--cs-success-color);
}

.cs-recorder-start:hover,
.cs-recorder-resume:hover {
  background-color: #3d9140;
  border-color: #3d9140;
  color: white;
}

.cs-recorder-pause {
  background-color: var(--cs-warning-color);
  color: white;
  border-color: var(--cs-warning-color);
}

.cs-recorder-pause:hover {
  background-color: #e68900;
  border-color: #e68900;
  color: white;
}

.cs-recorder-stop {
  background-color: var(--cs-error-color);
  color: white;
  border-color: var(--cs-error-color);
}

.cs-recorder-stop:hover {
  background-color: #d32f2f;
  border-color: #d32f2f;
  color: white;
}

.cs-recorder-save {
  background-color: var(--cs-primary-color);
  color: white;
  border-color: var(--cs-primary-color);
}

.cs-recorder-save:hover {
  background-color: var(--cs-primary-hover);
  border-color: var(--cs-primary-hover);
  color: white;
}

/* Main content area */
.cs-recorder-content {
  display: flex;
  flex: 1;
  overflow: hidden;
  position: relative;
}

/* Sidebar */
.cs-recorder-sidebar {
  width: var(--cs-recorder-sidebar-width);
  height: 100%;
  display: flex;
  flex-direction: column;
  border-right: 1px solid var(--cs-border-color);
  background-color: var(--cs-bg-color);
  overflow: hidden;
  transition: width var(--cs-transition);
}

/* Main content */
.cs-recorder-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  position: relative;
}

/* URL bar */
.cs-recorder-url-bar {
  height: var(--cs-recorder-url-bar-height);
  padding: 0 1rem;
  display: flex;
  align-items: center;
  border-bottom: 1px solid var(--cs-border-color);
  background-color: var(--cs-bg-secondary);
}

.cs-url-input-container {
  position: relative;
  width: 100%;
  display: flex;
  align-items: center;
}

.cs-url-input {
  width: 100%;
  padding: 0.5rem 2.5rem 0.5rem 0.75rem;
  border: 1px solid var(--cs-border-color);
  border-radius: 4px;
  font-size: 0.9rem;
  transition: var(--cs-transition);
}

.cs-url-input:focus {
  outline: none;
  border-color: var(--cs-primary-color);
  box-shadow: 0 0 0 3px var(--cs-primary-light);
}

.cs-url-go-button {
  position: absolute;
  right: 0;
  top: 0;
  height: 100%;
  width: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  color: var(--cs-text-secondary);
  cursor: pointer;
  transition: var(--cs-transition);
}

.cs-url-go-button:hover {
  color: var(--cs-primary-color);
}

/* Browser container */
.cs-recorder-browser-container {
  flex: 1;
  position: relative;
  overflow: hidden;
}

/* Error message */
.cs-recorder-error {
  position: absolute;
  top: var(--cs-recorder-url-bar-height);
  left: 0;
  width: 100%;
  padding: 0.75rem 1rem;
  background-color: rgba(244, 67, 54, 0.1);
  border-bottom: 1px solid var(--cs-error-color);
  color: var(--cs-error-color);
  display: flex;
  align-items: center;
  z-index: 100;
}

.cs-error-icon {
  margin-right: 0.75rem;
  display: flex;
  align-items: center;
}

.cs-error-message {
  font-size: 0.9rem;
}

/* Loading state */
.cs-recorder-loading {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(255, 255, 255, 0.8);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.cs-loading-spinner {
  width: 40px;
  height: 40px;
  border: 3px solid var(--cs-primary-light);
  border-top-color: var(--cs-primary-color);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 1rem;
}

.cs-loading-message {
  font-size: 1rem;
  color: var(--cs-text-color);
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* Responsive styles */
@media (max-width: 1200px) {
  :root {
    --cs-recorder-sidebar-width: 300px;
  }
}

@media (max-width: 991px) {
  :root {
    --cs-recorder-sidebar-width: 250px;
  }
  
  .cs-recorder-name-input input {
    width: 180px;
  }
}

@media (max-width: 767px) {
  :root {
    --cs-recorder-sidebar-width: 100%;
    --cs-recorder-controls-height: auto;
  }
  
  .cs-recorder-controls {
    flex-direction: column;
    padding: 0.75rem 1rem;
    gap: 0.75rem;
  }
  
  .cs-recorder-content {
    flex-direction: column;
  }
  
  .cs-recorder-sidebar {
    height: 200px;
    width: 100%;
    border-right: none;
    border-bottom: 1px solid var(--cs-border-color);
  }
  
  .cs-recorder-action-controls,
  .cs-recorder-save-controls {
    width: 100%;
    justify-content: space-between;
  }
  
  .cs-recorder-name-input input {
    width: 100%;
  }
}

/* Custom scrollbar */
.cs-recorder ::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.cs-recorder ::-webkit-scrollbar-track {
  background: var(--cs-bg-secondary);
}

.cs-recorder ::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 4px;
}

.cs-recorder ::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3);
}

/* Animation for recording indicator */
@keyframes recording-pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.4);
  }
  70% {
    box-shadow: 0 0 0 10px rgba(244, 67, 54, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(244, 67, 54, 0);
  }
}

.cs-recording-indicator {
  width: 12px;
  height: 12px;
  background-color: var(--cs-error-color);
  border-radius: 50%;
  display: inline-block;
  margin-right: 0.5rem;
  animation: recording-pulse 2s infinite;
}

.cs-recording-indicator.paused {
  background-color: var(--cs-warning-color);
  animation: none;
}


ActionToolbar.tsx
------------------------------------------------------
import React, { useState, useEffect, useRef } from 'react';
import './ActionToolbar.css';
import { RecordingAction } from './RecorderComponent';

interface ActionToolbarProps {
  /** Callback when a new action is added from the toolbar */
  onActionAdd: (action: RecordingAction) => void;
  /** Callback when element highlight tool is toggled */
  onElementHighlight: (showHighlighter: boolean) => void;
  /** Whether recording is active */
  isRecording: boolean;
  /** Whether recording is paused */
  isPaused: boolean;
  /** Framework in use */
  framework: 'selenium' | 'playwright';
  /** Programming language in use */
  language: 'java' | 'typescript';
  /** Test type in use */
  testType: 'testng' | 'bdd';
  /** Whether the component is disabled */
  disabled?: boolean;
}

/**
 * Action Toolbar Component
 * 
 * Provides controls for adding various types of actions to the recording:
 * - Conditional statements (if/else, switch/case)
 * - Loops (for, while, forEach)
 * - Data providers
 * - Wait conditions
 * - Assertions
 * - Element finders
 * - Custom code
 * - Variables
 * - Documentation
 */
const ActionToolbar: React.FC<ActionToolbarProps> = ({
  onActionAdd,
  onElementHighlight,
  isRecording,
  isPaused,
  framework,
  language,
  testType,
  disabled = false
}) => {
  // State for active action menu
  const [activeMenu, setActiveMenu] = useState<string | null>(null);
  // State for element picker tool
  const [elementPickerActive, setElementPickerActive] = useState<boolean>(false);
  // Ref for toolbar DOM element
  const toolbarRef = useRef<HTMLDivElement>(null);
  // Ref for active menu DOM element
  const activeMenuRef = useRef<HTMLDivElement>(null);
  
  // Generate a unique ID for actions
  const generateActionId = (): string => {
    return `action_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
  };
  
  // Toggle action menu
  const toggleMenu = (menuName: string) => {
    if (activeMenu === menuName) {
      setActiveMenu(null);
    } else {
      setActiveMenu(menuName);
    }
  };
  
  // Close active menu
  const closeMenu = () => {
    setActiveMenu(null);
  };
  
  // Toggle element picker
  const toggleElementPicker = () => {
    const newState = !elementPickerActive;
    setElementPickerActive(newState);
    onElementHighlight(newState);
  };
  
  // Handle click outside to close menus
  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (
        toolbarRef.current &&
        !toolbarRef.current.contains(event.target as Node) &&
        activeMenuRef.current &&
        !activeMenuRef.current.contains(event.target as Node)
      ) {
        closeMenu();
      }
    };
    
    document.addEventListener('mousedown', handleClickOutside);
    return () => {
      document.removeEventListener('mousedown', handleClickOutside);
    };
  }, []);
  
  // Add conditional action
  const addConditionalAction = (type: 'if' | 'switch' | 'try') => {
    const action: RecordingAction = {
      id: generateActionId(),
      type: 'conditional',
      condition: type === 'if' ? 'element.isDisplayed()' : 
                type === 'switch' ? 'element.getText()' : 
                'try',
      subActions: [],
      timestamp: Date.now(),
      description: type === 'if' ? 'If Condition' : 
                  type === 'switch' ? 'Switch Statement' : 
                  'Try-Catch Block'
    };
    
    onActionAdd(action);
    closeMenu();
  };
  
  // Add loop action
  const addLoopAction = (type: 'for' | 'while' | 'forEach') => {
    const action: RecordingAction = {
      id: generateActionId(),
      type: 'loop',
      loopType: type,
      loopCondition: type === 'for' ? 'i < 5' : 
                    type === 'while' ? 'condition === true' : 
                    'element in elements',
      loopVariable: type === 'for' ? 'i' : 
                   type === 'while' ? '' : 
                   'element',
      loopStart: type === 'for' ? 0 : undefined,
      loopEnd: type === 'for' ? 5 : undefined,
      loopStep: type === 'for' ? 1 : undefined,
      loopItems: type === 'forEach' ? 'elements' : undefined,
      subActions: [],
      timestamp: Date.now(),
      description: type === 'for' ? 'For Loop' : 
                  type === 'while' ? 'While Loop' : 
                  'ForEach Loop'
    };
    
    onActionAdd(action);
    closeMenu();
  };
  
  // Add data-driven action
  const addDataDrivenAction = (type: 'excel' | 'csv' | 'json' | 'database') => {
    const action: RecordingAction = {
      id: generateActionId(),
      type: 'dataDriven',
      dataProvider: {
        type,
        path: type === 'database' ? undefined : './data/testdata.' + type,
        sheet: type === 'excel' ? 'Sheet1' : undefined,
        query: type === 'database' ? 'SELECT * FROM test_data' : undefined,
        connectionString: type === 'database' ? 'jdbc:mysql://localhost:3306/testdb' : undefined
      },
      subActions: [],
      timestamp: Date.now(),
      description: `Data Provider (${type.toUpperCase()})`
    };
    
    onActionAdd(action);
    closeMenu();
  };
  
  // Add wait action
  const addWaitAction = (type: 'visible' | 'clickable' | 'present' | 'text' | 'time' | 'custom') => {
    const action: RecordingAction = {
      id: generateActionId(),
      type: 'wait',
      waitCondition: type,
      waitTimeout: 30000,
      timestamp: Date.now(),
      description: `Wait For ${type.charAt(0).toUpperCase() + type.slice(1)}`
    };
    
    onActionAdd(action);
    closeMenu();
  };
  
  // Add assertion action
  const addAssertionAction = (type: 'visible' | 'text' | 'value' | 'attribute' | 'exists' | 'enabled' | 'selected') => {
    const action: RecordingAction = {
      id: generateActionId(),
      type: 'assert',
      assertType: type,
      assertValue: type === 'text' || type === 'value' || type === 'attribute' ? 'expected value' : undefined,
      assertAttribute: type === 'attribute' ? 'class' : undefined,
      timestamp: Date.now(),
      description: `Assert ${type.charAt(0).toUpperCase() + type.slice(1)}`
    };
    
    onActionAdd(action);
    closeMenu();
  };
  
  // Add custom code action
  const addCustomAction = () => {
    const action: RecordingAction = {
      id: generateActionId(),
      type: 'custom',
      customCode: 
        language === 'java' 
          ? '// Custom Java code\nJavaScriptExecutor js = (JavaScriptExecutor) driver;\njs.executeScript("alert(\'Hello, World!\');");' 
          : '// Custom TypeScript code\nawait page.evaluate(() => {\n  alert(\'Hello, World!\');\n});',
      timestamp: Date.now(),
      description: 'Custom Code'
    };
    
    onActionAdd(action);
    closeMenu();
  };
  
  // Add variable action
  const addVariableAction = (mode: 'declare' | 'set' | 'clear') => {
    const action: RecordingAction = {
      id: generateActionId(),
      type: 'custom',
      variables: {
        'varName': mode === 'declare' || mode === 'set' ? 'value' : ''
      },
      customCode: 
        language === 'java' 
          ? mode === 'declare' 
            ? 'String varName = "value";' 
            : mode === 'set' 
              ? 'varName = "value";' 
              : 'varName = null;'
          : mode === 'declare' 
            ? 'const varName = "value";' 
            : mode === 'set' 
              ? 'varName = "value";' 
              : 'delete varName;',
      timestamp: Date.now(),
      description: mode === 'declare' 
        ? 'Declare Variable' 
        : mode === 'set' 
          ? 'Set Variable' 
          : 'Clear Variable'
    };
    
    onActionAdd(action);
    closeMenu();
  };
  
  // Add documentation action
  const addDocumentationAction = (type: 'comment' | 'step' | 'group') => {
    const action: RecordingAction = {
      id: generateActionId(),
      type: 'custom',
      customCode: 
        language === 'java' 
          ? type === 'comment' 
            ? '// This is a comment' 
            : type === 'step' 
              ? '// @Step("Test step description")' 
              : '// @BeforeGroup\n// @AfterGroup'
          : type === 'comment' 
            ? '// This is a comment' 
            : type === 'step' 
              ? '// @Step("Test step description")' 
              : '// @BeforeGroup\n// @AfterGroup',
      timestamp: Date.now(),
      description: type === 'comment' 
        ? 'Comment' 
        : type === 'step' 
          ? 'Test Step' 
          : 'Group'
    };
    
    onActionAdd(action);
    closeMenu();
  };
  
  // Render menu based on active menu
  const renderActiveMenu = () => {
    if (!activeMenu) return null;
    
    const menuStyle = {
      top: '100%',
      left: '0'
    };
    
    switch (activeMenu) {
      case 'conditional':
        return (
          <div ref={activeMenuRef} className="cs-action-menu" style={menuStyle}>
            <div className="cs-action-menu-header">
              <h4>Conditional Statement</h4>
            </div>
            <div className="cs-action-menu-content">
              <button
                className="cs-action-menu-item"
                onClick={() => addConditionalAction('if')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 3V21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M3 12H9" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M15 12H21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>If/Else</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addConditionalAction('switch')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 3L5 7L9 11" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M5 7H15C19.42 7 23 10.58 23 15C23 19.42 19.42 23 15 23H12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Switch/Case</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addConditionalAction('try')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M22 12H18L15 21L9 3L6 12H2" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Try/Catch</span>
              </button>
            </div>
          </div>
        );
      
      case 'loop':
        return (
          <div ref={activeMenuRef} className="cs-action-menu" style={menuStyle}>
            <div className="cs-action-menu-header">
              <h4>Loop</h4>
            </div>
            <div className="cs-action-menu-content">
              <button
                className="cs-action-menu-item"
                onClick={() => addLoopAction('for')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17 2L21 6L17 10" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M3 12V10C3 8.89543 3.89543 8 5 8H21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M7 22L3 18L7 14" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M21 12V14C21 15.1046 20.1046 16 19 16H3" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>For Loop</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addLoopAction('while')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8 3L12 7L16 3" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M12 7V17" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M8 21L12 17L16 21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>While Loop</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addLoopAction('forEach')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 17L8 12L3 7" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M21 17L16 12L21 7" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M8 12H16" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>ForEach Loop</span>
              </button>
            </div>
          </div>
        );
      
      case 'data':
        return (
          <div ref={activeMenuRef} className="cs-action-menu" style={menuStyle}>
            <div className="cs-action-menu-header">
              <h4>Data Provider</h4>
            </div>
            <div className="cs-action-menu-content">
              <button
                className="cs-action-menu-item"
                onClick={() => addDataDrivenAction('excel')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M14 2V8H20" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M12 18V12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M9 15H15" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Excel</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addDataDrivenAction('csv')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M14 2V8H20" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M8 12H16" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M8 16H16" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>CSV</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addDataDrivenAction('json')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M20 16L14 17L10 15L4 16V7L10 6L14 8L20 7V16Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M10 6V15" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M14 8V17" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>JSON</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addDataDrivenAction('database')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 8C16.9706 8 21 6.65685 21 5C21 3.34315 16.9706 2 12 2C7.02944 2 3 3.34315 3 5C3 6.65685 7.02944 8 12 8Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M21 12C21 13.66 17 15 12 15C7 15 3 13.66 3 12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M3 5V19C3 20.66 7 22 12 22C17 22 21 20.66 21 19V5" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Database</span>
              </button>
            </div>
          </div>
        );
      
      case 'wait':
        return (
          <div ref={activeMenuRef} className="cs-action-menu" style={menuStyle}>
            <div className="cs-action-menu-header">
              <h4>Wait</h4>
            </div>
            <div className="cs-action-menu-content">
              <button
                className="cs-action-menu-item"
                onClick={() => addWaitAction('visible')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M12 16V12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M12 8H12.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Wait For Visible</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addWaitAction('clickable')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M12 16H12.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M12 12H12.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M12 8H12.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Wait For Clickable</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addWaitAction('present')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M9 12L11 14L15 10" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Wait For Present</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addWaitAction('text')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M14 2V8H20" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M8 13H16" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M8 17H16" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M10 9H9H11" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Wait For Text</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addWaitAction('time')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M12 6V12L16 16" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Wait For Time</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addWaitAction('custom')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M14 2V8H20" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M8 20V14M8 14L6 16M8 14L10 16" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M16 16V20M16 20L14 18M16 20L18 18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Custom Wait</span>
              </button>
            </div>
          </div>
        );
      
      case 'assert':
        return (
          <div ref={activeMenuRef} className="cs-action-menu" style={menuStyle}>
            <div className="cs-action-menu-header">
              <h4>Assertions</h4>
            </div>
            <div className="cs-action-menu-content">
              <button
                className="cs-action-menu-item"
                onClick={() => addAssertionAction('visible')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 12C10 12.5304 10.2107 13.0391 10.5858 13.4142C10.9609 13.7893 11.4696 14 12 14C12.5304 14 13.0391 13.7893 13.4142 13.4142C13.7893 13.0391 14 12.5304 14 12C14 11.4696 13.7893 10.9609 13.4142 10.5858C13.0391 10.2107 12.5304 10 12 10C11.4696 10 10.9609 10.2107 10.5858 10.5858C10.2107 10.9609 10 11.4696 10 12Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M21 12C18.6 16 15.5 18 12 18C8.5 18 5.3 16 3 12C5.4 8 8.5 6 12 6C15.5 6 18.7 8 21 12Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Assert Visible</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addAssertionAction('text')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 6H20M4 12H20M4 18H20" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Assert Text</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addAssertionAction('value')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="3" y="5" width="18" height="14" rx="2" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M7 15H17M7 5V19" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Assert Value</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addAssertionAction('attribute')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M12 17C14.7614 17 17 14.7614 17 12C17 9.23858 14.7614 7 12 7C9.23858 7 7 9.23858 7 12C7 14.7614 9.23858 17 12 17Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Assert Attribute</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addAssertionAction('exists')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 6L6 18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M6 6L18 18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Assert Exists</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addAssertionAction('enabled')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 12L11 14L15 10" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Assert Enabled</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addAssertionAction('selected')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8 6H21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M8 12H21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M8 18H21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M3 6H3.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M3 12H3.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M3 18H3.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Assert Selected</span>
              </button>
            </div>
          </div>
        );
      
      case 'variable':
        return (
          <div ref={activeMenuRef} className="cs-action-menu" style={menuStyle}>
            <div className="cs-action-menu-header">
              <h4>Variables</h4>
            </div>
            <div className="cs-action-menu-content">
              <button
                className="cs-action-menu-item"
                onClick={() => addVariableAction('declare')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 5V19" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M5 12H19" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Declare Variable</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addVariableAction('set')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 9L12 16L5 9" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Set Variable</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addVariableAction('clear')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 6L6 18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M6 6L18 18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Clear Variable</span>
              </button>
            </div>
          </div>
        );
      
      case 'docs':
        return (
          <div ref={activeMenuRef} className="cs-action-menu" style={menuStyle}>
            <div className="cs-action-menu-header">
              <h4>Documentation</h4>
            </div>
            <div className="cs-action-menu-content">
              <button
                className="cs-action-menu-item"
                onClick={() => addDocumentationAction('comment')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 11.5C21.0034 12.8199 20.6951 14.1219 20.1 15.3C19.3944 16.7118 18.3098 17.8992 16.9674 18.7293C15.6251 19.5594 14.0782 19.9994 12.5 20C11.1801 20.0035 9.87812 19.6951 8.7 19.1L3 21L4.9 15.3C4.30493 14.1219 3.99656 12.8199 4 11.5C4.00061 9.92179 4.44061 8.37488 5.27072 7.03258C6.10083 5.69028 7.28825 4.6056 8.7 3.90003C9.87812 3.30496 11.1801 2.99659 12.5 3.00003H13C15.0843 3.11502 17.053 3.99479 18.5291 5.47089C20.0052 6.94699 20.885 8.91568 21 11V11.5Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Comment</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addDocumentationAction('step')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8 6H21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M8 12H21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M8 18H21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M3 6H3.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M3 12H3.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M3 18H3.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Test Step</span>
              </button>
              <button
                className="cs-action-menu-item"
                onClick={() => addDocumentationAction('group')}
                disabled={disabled}
              >
                <span className="cs-action-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 11H3V3H11V9" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M21 11H15V3H23V9" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M9 23H3V15H11V21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M21 23H15V15H23V21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
                <span>Group</span>
              </button>
            </div>
          </div>
        );
      
      default:
        return null;
    }
  };
  
  // Render toolbar buttons
  const renderToolbarButtons = () => {
    const buttons = [
      {
        id: 'element',
        icon: (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M21 7H3" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M7 21V7" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        ),
        label: 'Find Element',
        onClick: toggleElementPicker,
        active: elementPickerActive,
        menu: false
      },
      {
        id: 'conditional',
        icon: (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 3V21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M3 12H9" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M15 12H21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        ),
        label: 'Conditional',
        onClick: () => toggleMenu('conditional'),
        active: activeMenu === 'conditional',
        menu: true
      },
      {
        id: 'loop',
        icon: (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M17 2L21 6L17 10" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M3 12V10C3 8.89543 3.89543 8 5 8H21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M7 22L3 18L7 14" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M21 12V14C21 15.1046 20.1046 16 19 16H3" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        ),
        label: 'Loop',
        onClick: () => toggleMenu('loop'),
        active: activeMenu === 'loop',
        menu: true
      },
      {
        id: 'data',
        icon: (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M14 2V8H20" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M12 18V12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M9 15H15" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        ),
        label: 'Data',
        onClick: () => toggleMenu('data'),
        active: activeMenu === 'data',
        menu: true
      },
      {
        id: 'wait',
        icon: (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M12 6V12L16 16" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        ),
        label: 'Wait',
        onClick: () => toggleMenu('wait'),
        active: activeMenu === 'wait',
        menu: true
      },
      {
        id: 'assert',
        icon: (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 12L11 14L15 10" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        ),
        label: 'Assert',
        onClick: () => toggleMenu('assert'),
        active: activeMenu === 'assert',
        menu: true
      },
      {
        id: 'custom',
        icon: (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M18 17L15 14L16.5 12.5C16.7626 12.2374 17.1126 12.0939 17.4725 12.0939C17.8324 12.0939 18.1824 12.2374 18.445 12.5L19.5 13.5C19.7626 13.7626 19.9061 14.1126 19.9061 14.4725C19.9061 14.8324 19.7626 15.1824 19.5 15.445L18 17Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M5.5 10.5L8.5 7.5L10 9L7 12L5.5 10.5Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        ),
        label: 'Custom',
        onClick: addCustomAction,
        active: false,
        menu: false
      },
      {
        id: 'variable',
        icon: (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14 9V7C14 6.46957 13.7893 5.96086 13.4142 5.58579C13.0391 5.21071 12.5304 5 12 5H5C4.46957 5 3.96086 5.21071 3.58579 5.58579C3.21071 5.96086 3 6.46957 3 7V17C3 17.5304 3.21071 18.0391 3.58579 18.4142C3.96086 18.7893 4.46957 19 5 19H12C12.5304 19 13.0391 18.7893 13.4142 18.4142C13.7893 18.0391 14 17.5304 14 17V15" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M7 9H20M20 9L17 6M20 9L17 12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        ),
        label: 'Variable',
        onClick: () => toggleMenu('variable'),
        active: activeMenu === 'variable',
        menu: true
      },
      {
        id: 'docs',
        icon: (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M14 2V8H20" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M8 13H16" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M8 17H16" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M10 9H9H11" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        ),
        label: 'Docs',
        onClick: () => toggleMenu('docs'),
        active: activeMenu === 'docs',
        menu: true
      }
    ];
    
    return (
      <div className="cs-toolbar-buttons">
        {buttons.map((button) => (
          <div key={button.id} className="cs-toolbar-button-container">
            <button
              className={`cs-toolbar-button ${button.active ? 'active' : ''}`}
              onClick={button.onClick}
              disabled={disabled}
              aria-pressed={button.active}
              aria-haspopup={button.menu}
              aria-expanded={button.menu && button.active}
            >
              <span className="cs-button-icon">{button.icon}</span>
              <span className="cs-button-label">{button.label}</span>
              {button.menu && (
                <span className={`cs-button-arrow ${button.active ? 'open' : ''}`}>
                  <svg width="10" height="6" viewBox="0 0 10 6" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1 1L5 5L9 1" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </span>
              )}
            </button>
          </div>
        ))}
      </div>
    );
  };
  
  // Render recording status
  const renderRecordingStatus = () => {
    if (!isRecording) return null;
    
    return (
      <div className="cs-recording-status">
        <span className={`cs-recording-indicator ${isPaused ? 'paused' : ''}`}></span>
        <span>{isPaused ? 'Recording Paused' : 'Recording'}</span>
      </div>
    );
  };
  
  return (
    <div ref={toolbarRef} className={`cs-action-toolbar ${disabled ? 'disabled' : ''}`}>
      <div className="cs-toolbar-header">
        <h3 className="cs-toolbar-title">Actions</h3>
        {renderRecordingStatus()}
      </div>
      
      {renderToolbarButtons()}
      {renderActiveMenu()}
    </div>
  );
};

export default ActionToolbar;


ActionToolbar.css
------------------------------------------
:root {
  --cs-primary-color: #C54B8C; /* Primary brand color */
  --cs-primary-hover: #aa3d76;
  --cs-primary-light: rgba(197, 75, 140, 0.1);
  --cs-primary-active: #8f345f;
  --cs-text-color: #333333;
  --cs-text-secondary: #666666;
  --cs-border-color: #e0e0e0;
  --cs-bg-color: #ffffff;
  --cs-bg-secondary: #f8f9fa;
  --cs-error-color: #f44336;
  --cs-success-color: #4caf50;
  --cs-warning-color: #ff9800;
  --cs-disabled-bg: #f5f5f5;
  --cs-disabled-text: #aaaaaa;
  --cs-transition: all 0.3s ease;
  --cs-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  --cs-radius: 8px;
  --cs-toolbar-button-size: 40px;
}

/* Main container */
.cs-action-toolbar {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background-color: var(--cs-bg-secondary);
  position: relative;
}

/* Disabled state */
.cs-action-toolbar.disabled {
  opacity: 0.7;
  pointer-events: none;
}

/* Toolbar header */
.cs-toolbar-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem;
  border-bottom: 1px solid var(--cs-border-color);
}

.cs-toolbar-title {
  margin: 0;
  font-size: 1rem;
  font-weight: 600;
  color: var(--cs-text-color);
}

/* Recording status */
.cs-recording-status {
  display: flex;
  align-items: center;
  font-size: 0.85rem;
  font-weight: 500;
  color: var(--cs-error-color);
}

.cs-recording-indicator {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  margin-right: 6px;
  background-color: var(--cs-error-color);
  animation: pulse 2s infinite;
}

.cs-recording-indicator.paused {
  background-color: var(--cs-warning-color);
  animation: none;
}

@keyframes pulse {
  0% {
    transform: scale(0.95);
    box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.7);
  }
  
  70% {
    transform: scale(1);
    box-shadow: 0 0 0 6px rgba(244, 67, 54, 0);
  }
  
  100% {
    transform: scale(0.95);
    box-shadow: 0 0 0 0 rgba(244, 67, 54, 0);
  }
}

/* Toolbar buttons container */
.cs-toolbar-buttons {
  display: flex;
  flex-direction: column;
  padding: 1rem;
  gap: 0.75rem;
  overflow-y: auto;
}

/* Button container */
.cs-toolbar-button-container {
  position: relative;
}

/* Toolbar button */
.cs-toolbar-button {
  display: flex;
  align-items: center;
  width: 100%;
  padding: 0.75rem 1rem;
  border: 1px solid var(--cs-border-color);
  border-radius: var(--cs-radius);
  background-color: var(--cs-bg-color);
  color: var(--cs-text-color);
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: var(--cs-transition);
  position: relative;
}

.cs-toolbar-button:hover {
  border-color: var(--cs-primary-color);
  background-color: var(--cs-primary-light);
}

.cs-toolbar-button.active {
  border-color: var(--cs-primary-color);
  background-color: var(--cs-primary-light);
  color: var(--cs-primary-color);
}

.cs-toolbar-button:disabled {
  background-color: var(--cs-disabled-bg);
  border-color: var(--cs-border-color);
  color: var(--cs-disabled-text);
  cursor: not-allowed;
}

/* Button icon */
.cs-button-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 0.75rem;
  color: inherit;
}

/* Button label */
.cs-button-label {
  flex: 1;
}

/* Button arrow */
.cs-button-arrow {
  display: flex;
  align-items: center;
  transition: transform 0.3s ease;
}

.cs-button-arrow.open {
  transform: rotate(180deg);
}

/* Action menu */
.cs-action-menu {
  position: absolute;
  top: 100%;
  left: 0;
  width: 100%;
  background-color: var(--cs-bg-color);
  border: 1px solid var(--cs-border-color);
  border-radius: var(--cs-radius);
  box-shadow: var(--cs-shadow);
  z-index: 1000;
  margin-top: 0.5rem;
  overflow: hidden;
}

/* Menu header */
.cs-action-menu-header {
  padding: 0.75rem 1rem;
  border-bottom: 1px solid var(--cs-border-color);
  background-color: var(--cs-bg-secondary);
}

.cs-action-menu-header h4 {
  margin: 0;
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--cs-text-color);
}

/* Menu content */
.cs-action-menu-content {
  padding: 0.5rem;
  max-height: 300px;
  overflow-y: auto;
}

/* Menu item */
.cs-action-menu-item {
  display: flex;
  align-items: center;
  width: 100%;
  padding: 0.65rem 0.75rem;
  border: none;
  border-radius: 4px;
  background-color: transparent;
  color: var(--cs-text-color);
  font-size: 0.9rem;
  text-align: left;
  cursor: pointer;
  transition: var(--cs-transition);
}

.cs-action-menu-item:hover {
  background-color: var(--cs-primary-light);
  color: var(--cs-primary-color);
}

.cs-action-menu-item:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Action icon in menu */
.cs-action-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  margin-right: 0.75rem;
  color: inherit;
}

/* Responsive styles */
@media (max-width: 767px) {
  .cs-toolbar-buttons {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.5rem;
  }
}

@media (max-width: 576px) {
  .cs-toolbar-buttons {
    grid-template-columns: 1fr;
  }
}


StepsList.tsx
--------------------------------

import React, { useState, useRef, useEffect } from 'react';
import './StepsList.css';
import { RecordingAction } from './RecorderComponent';

interface StepsListProps {
  /** List of recorded actions */
  actions: RecordingAction[];
  /** ID of the currently selected action */
  selectedStepId: string | null;
  /** Callback when an action is selected */
  onActionSelect: (actionId: string) => void;
  /** Callback when an action is edited */
  onActionEdit: (actionId: string, updatedAction: Partial<RecordingAction>) => void;
  /** Callback when an action is deleted */
  onActionDelete: (actionId: string) => void;
  /** Callback when actions are reordered */
  onActionReorder: (actionId: string, newIndex: number) => void;
  /** Whether recording is active */
  isRecording: boolean;
  /** Whether recording is paused */
  isPaused: boolean;
  /** Framework in use */
  framework: 'selenium' | 'playwright';
  /** Programming language in use */
  language: 'java' | 'typescript';
  /** Test type in use */
  testType: 'testng' | 'bdd';
  /** Whether the component is disabled */
  disabled?: boolean;
}

/**
 * Steps List Component
 * 
 * Displays the list of recorded actions and allows users to:
 * - Select actions
 * - Edit action properties
 * - Delete actions
 * - Reorder actions via drag and drop
 * - View action details including screenshots
 */
const StepsList: React.FC<StepsListProps> = ({
  actions,
  selectedStepId,
  onActionSelect,
  onActionEdit,
  onActionDelete,
  onActionReorder,
  isRecording,
  isPaused,
  framework,
  language,
  testType,
  disabled = false
}) => {
  // State for drag and drop
  const [draggedActionId, setDraggedActionId] = useState<string | null>(null);
  const [dragOverIndex, setDragOverIndex] = useState<number | null>(null);
  
  // State for action being edited
  const [editingActionId, setEditingActionId] = useState<string | null>(null);
  
  // Ref for the list container
  const listRef = useRef<HTMLDivElement>(null);
  
  // Ref for edit input
  const editInputRef = useRef<HTMLInputElement>(null);
  
  // Focus edit input when editing starts
  useEffect(() => {
    if (editingActionId && editInputRef.current) {
      editInputRef.current.focus();
    }
  }, [editingActionId]);
  
  // Scroll to selected action
  useEffect(() => {
    if (selectedStepId && listRef.current) {
      const selectedElement = listRef.current.querySelector(`[data-action-id="${selectedStepId}"]`);
      if (selectedElement) {
        selectedElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }
    }
  }, [selectedStepId]);
  
  // Start editing action description
  const startEditing = (actionId: string, event: React.MouseEvent) => {
    event.stopPropagation();
    setEditingActionId(actionId);
  };
  
  // Save edited action description
  const saveEditing = (actionId: string) => {
    if (editInputRef.current) {
      const newDescription = editInputRef.current.value.trim();
      if (newDescription) {
        onActionEdit(actionId, { description: newDescription });
      }
    }
    setEditingActionId(null);
  };
  
  // Handle edit input key press
  const handleEditKeyPress = (actionId: string, event: React.KeyboardEvent) => {
    if (event.key === 'Enter') {
      saveEditing(actionId);
    } else if (event.key === 'Escape') {
      setEditingActionId(null);
    }
  };
  
  // Handle action selection
  const handleActionSelect = (actionId: string) => {
    if (editingActionId) return;
    onActionSelect(actionId);
  };
  
  // Handle action deletion
  const handleActionDelete = (actionId: string, event: React.MouseEvent) => {
    event.stopPropagation();
    
    if (window.confirm('Are you sure you want to delete this action?')) {
      onActionDelete(actionId);
    }
  };
  
  // Handle drag start
  const handleDragStart = (actionId: string, event: React.DragEvent) => {
    setDraggedActionId(actionId);
    
    // Required for Firefox
    event.dataTransfer.setData('text/plain', actionId);
    
    // Set drag effect
    event.dataTransfer.effectAllowed = 'move';
    
    // Set drag image
    if (event.target instanceof HTMLElement) {
      const rect = event.target.getBoundingClientRect();
      const offsetX = event.clientX - rect.left;
      const offsetY = event.clientY - rect.top;
      event.dataTransfer.setDragImage(event.target, offsetX, offsetY);
    }
  };
  
  // Handle drag over
  const handleDragOver = (index: number, event: React.DragEvent) => {
    event.preventDefault();
    
    if (draggedActionId) {
      setDragOverIndex(index);
    }
  };
  
  // Handle drag end
  const handleDragEnd = () => {
    if (draggedActionId && dragOverIndex !== null) {
      onActionReorder(draggedActionId, dragOverIndex);
    }
    
    setDraggedActionId(null);
    setDragOverIndex(null);
  };
  
  // Handle drop
  const handleDrop = (event: React.DragEvent) => {
    event.preventDefault();
    
    if (draggedActionId && dragOverIndex !== null) {
      onActionReorder(draggedActionId, dragOverIndex);
    }
    
    setDraggedActionId(null);
    setDragOverIndex(null);
  };
  
  // Get icon for action type
  const getActionIcon = (action: RecordingAction) => {
    switch (action.type) {
      case 'click':
        return (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 6V12L16 14" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        );
      case 'input':
        return (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="3" y="5" width="18" height="14" rx="2" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M7 9L17 9" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M7 13L17 13" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M7 17L12 17" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        );
      case 'select':
        return (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8 9L12 13L16 9" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <rect x="3" y="5" width="18" height="14" rx="2" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        );
      case 'navigate':
        return (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M5 12H19" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M12 5L19 12L12 19" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        );
      case 'wait':
        return (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 6V12L16 14" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        );
      case 'assert':
        return (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 12L11 14L15 10" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        );
      case 'custom':
        return (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M14 2V8H20" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M8 13H16" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M8 17H16" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M10 9H9H11" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        );
      case 'conditional':
        return (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 3V21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M3 12H9" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M15 12H21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        );
      case 'loop':
        return (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M17 2L21 6L17 10" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M3 12V10C3 8.89543 3.89543 8 5 8H21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M7 22L3 18L7 14" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M21 12V14C21 15.1046 20.1046 16 19 16H3" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        );
      case 'dataDriven':
        return (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M14 2V8H20" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M12 18V12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M9 15H15" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        );
      case 'hover':
        return (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M7 15L12 20L17 15" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M7 9L12 4L17 9" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        );
      default:
        return (
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M12 16V12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M12 8H12.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        );
    }
  };
  
  // Get class for action based on type
  const getActionClass = (action: RecordingAction) => {
    switch (action.type) {
      case 'click':
        return 'cs-action-click';
      case 'input':
        return 'cs-action-input';
      case 'select':
        return 'cs-action-select';
      case 'navigate':
        return 'cs-action-navigate';
      case 'wait':
        return 'cs-action-wait';
      case 'assert':
        return 'cs-action-assert';
      case 'custom':
        return 'cs-action-custom';
      case 'conditional':
        return 'cs-action-conditional';
      case 'loop':
        return 'cs-action-loop';
      case 'dataDriven':
        return 'cs-action-data';
      case 'hover':
        return 'cs-action-hover';
      default:
        return '';
    }
  };
  
  // Format timestamp
  const formatTimestamp = (timestamp: number) => {
    const date = new Date(timestamp);
    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' });
  };
  
  // Get shortened element description
  const getShortenedElementDescription = (action: RecordingAction) => {
    if (!action.element) return '';
    
    if (action.element.id) {
      return `id="${action.element.id}"`;
    } else if (action.element.name) {
      return `name="${action.element.name}"`;
    } else if (action.element.text) {
      return `text="${action.element.text.length > 20 ? action.element.text.substring(0, 20) + '...' : action.element.text}"`;
    } else if (action.element.tagName) {
      return `<${action.element.tagName.toLowerCase()}>`;
    } else {
      return '';
    }
  };
  
  // Get action value preview
  const getActionValuePreview = (action: RecordingAction) => {
    switch (action.type) {
      case 'input':
        if (action.value) {
          return `"${action.value.length > 15 ? action.value.substring(0, 15) + '...' : action.value}"`;
        }
        return '';
      case 'navigate':
        if (action.targetUrl) {
          return action.targetUrl.length > 30 ? action.targetUrl.substring(0, 30) + '...' : action.targetUrl;
        }
        return '';
      case 'wait':
        if (action.waitTimeout) {
          return `${action.waitTimeout}ms`;
        }
        return '';
      case 'assert':
        if (action.assertValue) {
          return `"${action.assertValue.length > 15 ? action.assertValue.substring(0, 15) + '...' : action.assertValue}"`;
        }
        return '';
      case 'conditional':
        if (action.condition) {
          return action.condition.length > 25 ? action.condition.substring(0, 25) + '...' : action.condition;
        }
        return '';
      case 'loop':
        if (action.loopType === 'for') {
          return `${action.loopStart} to ${action.loopEnd}`;
        } else if (action.loopType === 'while') {
          return action.loopCondition && action.loopCondition.length > 25 ? action.loopCondition.substring(0, 25) + '...' : action.loopCondition;
        } else if (action.loopType === 'forEach') {
          return action.loopItems || '';
        }
        return '';
      default:
        return '';
    }
  };
  
  // Render empty state
  const renderEmptyState = () => {
    return (
      <div className="cs-steps-empty">
        <div className="cs-empty-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8 6H21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M8 12H21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M8 18H21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M3 6H3.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M3 12H3.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M3 18H3.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        </div>
        <p className="cs-empty-message">No steps recorded yet</p>
        <p className="cs-empty-hint">
          {isRecording
            ? 'Interact with the application to record steps'
            : 'Start recording to begin capturing steps'}
        </p>
      </div>
    );
  };
  
  // Render list of actions
  const renderActionsList = () => {
    return (
      <div ref={listRef} className="cs-steps-list">
        {actions.map((action, index) => {
          const isSelected = selectedStepId === action.id;
          const isDragged = draggedActionId === action.id;
          const isDragOver = dragOverIndex === index;
          
          return (
            <div
              key={action.id}
              className={`cs-step-item ${getActionClass(action)} ${isSelected ? 'selected' : ''} ${isDragged ? 'dragged' : ''} ${isDragOver ? 'drag-over' : ''}`}
              onClick={() => handleActionSelect(action.id)}
              draggable={!disabled}
              onDragStart={(e) => handleDragStart(action.id, e)}
              onDragOver={(e) => handleDragOver(index, e)}
              onDragEnd={handleDragEnd}
              onDrop={handleDrop}
              data-action-id={action.id}
            >
              <div className="cs-step-header">
                <div className="cs-step-icon">
                  {getActionIcon(action)}
                </div>
                
                <div className="cs-step-info">
                  {editingActionId === action.id ? (
                    <input
                      ref={editInputRef}
                      type="text"
                      className="cs-step-edit-input"
                      defaultValue={action.description}
                      onBlur={() => saveEditing(action.id)}
                      onKeyDown={(e) => handleEditKeyPress(action.id, e)}
                      onClick={(e) => e.stopPropagation()}
                      disabled={disabled}
                    />
                  ) : (
                    <div
                      className="cs-step-description"
                      onDoubleClick={(e) => startEditing(action.id, e)}
                    >
                      {action.description || 'Unnamed Step'}
                    </div>
                  )}
                  
                  <div className="cs-step-details">
                    {action.element && (
                      <span className="cs-step-element">
                        {getShortenedElementDescription(action)}
                      </span>
                    )}
                    
                    {getActionValuePreview(action) && (
                      <span className="cs-step-value">
                        {getActionValuePreview(action)}
                      </span>
                    )}
                  </div>
                </div>
                
                <div className="cs-step-actions">
                  <button
                    className="cs-step-edit-btn"
                    onClick={(e) => startEditing(action.id, e)}
                    disabled={disabled}
                    aria-label="Edit step"
                  >
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                      <path d="M18.5 2.49998C18.8978 2.10216 19.4374 1.87866 20 1.87866C20.5626 1.87866 21.1022 2.10216 21.5 2.49998C21.8978 2.89781 22.1213 3.43737 22.1213 3.99998C22.1213 4.56259 21.8978 5.10216 21.5 5.49998L12 15L8 16L9 12L18.5 2.49998Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    </svg>
                  </button>
                  
                  <button
                    className="cs-step-delete-btn"
                    onClick={(e) => handleActionDelete(action.id, e)}
                    disabled={disabled}
                    aria-label="Delete step"
                  >
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M3 6H5H21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                      <path d="M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    </svg>
                  </button>
                </div>
              </div>
              
              {isSelected && action.screenshot && (
                <div className="cs-step-screenshot">
                  <img src={action.screenshot} alt="Step Screenshot" />
                </div>
              )}
              
              <div className="cs-step-timestamp">
                {formatTimestamp(action.timestamp)}
              </div>
            </div>
          );
        })}
      </div>
    );
  };
  
  return (
    <div className={`cs-steps ${disabled ? 'disabled' : ''}`}>
      <div className="cs-steps-header">
        <h3 className="cs-steps-title">
          Steps
          {actions.length > 0 && <span className="cs-steps-count">{actions.length}</span>}
        </h3>
      </div>
      
      <div className="cs-steps-content">
        {actions.length === 0 ? renderEmptyState() : renderActionsList()}
      </div>
    </div>
  );
};

export default StepsList;


StepsList.css
------------------------

:root {
  --cs-primary-color: #C54B8C; /* Primary brand color */
  --cs-primary-hover: #aa3d76;
  --cs-primary-light: rgba(197, 75, 140, 0.1);
  --cs-primary-active: #8f345f;
  --cs-text-color: #333333;
  --cs-text-secondary: #666666;
  --cs-border-color: #e0e0e0;
  --cs-bg-color: #ffffff;
  --cs-bg-secondary: #f8f9fa;
  --cs-error-color: #f44336;
  --cs-success-color: #4caf50;
  --cs-warning-color: #ff9800;
  --cs-info-color: #2196f3;
  --cs-disabled-bg: #f5f5f5;
  --cs-disabled-text: #aaaaaa;
  --cs-transition: all 0.3s ease;
  --cs-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  --cs-radius: 8px;
}

/* Main container */
.cs-steps {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  background-color: var(--cs-bg-color);
  overflow: hidden;
}

/* Disabled state */
.cs-steps.disabled {
  opacity: 0.7;
  pointer-events: none;
}

/* Steps header */
.cs-steps-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem;
  border-bottom: 1px solid var(--cs-border-color);
  background-color: var(--cs-bg-secondary);
}

.cs-steps-title {
  margin: 0;
  font-size: 1rem;
  font-weight: 600;
  color: var(--cs-text-color);
  display: flex;
  align-items: center;
}

.cs-steps-count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 24px;
  height: 24px;
  padding: 0 6px;
  margin-left: 8px;
  background-color: var(--cs-primary-color);
  color: white;
  font-size: 0.75rem;
  font-weight: 600;
  border-radius: 12px;
}

/* Steps content */
.cs-steps-content {
  flex: 1;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* Steps list */
.cs-steps-list {
  flex: 1;
  overflow-y: auto;
  padding: 0.5rem;
}

/* Empty state */
.cs-steps-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  padding: 2rem;
  text-align: center;
  color: var(--cs-text-secondary);
}

.cs-empty-icon {
  margin-bottom: 1rem;
  color: var(--cs-border-color);
}

.cs-empty-message {
  margin: 0 0 0.5rem 0;
  font-size: 1rem;
  font-weight: 500;
}

.cs-empty-hint {
  margin: 0;
  font-size: 0.9rem;
  opacity: 0.7;
}

/* Step item */
.cs-step-item {
  position: relative;
  padding: 0.75rem;
  margin-bottom: 0.5rem;
  background-color: var(--cs-bg-color);
  border: 1px solid var(--cs-border-color);
  border-radius: var(--cs-radius);
  cursor: pointer;
  transition: var(--cs-transition);
}

.cs-step-item:hover {
  border-color: var(--cs-primary-color);
  background-color: var(--cs-primary-light);
}

.cs-step-item.selected {
  border-color: var(--cs-primary-color);
  background-color: var(--cs-primary-light);
  box-shadow: 0 0 0 1px var(--cs-primary-color);
}

.cs-step-item.dragged {
  opacity: 0.5;
}

.cs-step-item.drag-over {
  border-top: 2px solid var(--cs-primary-color);
}

/* Step header */
.cs-step-header {
  display: flex;
  align-items: flex-start;
}

/* Step icon */
.cs-step-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  margin-right: 0.75rem;
  color: var(--cs-text-color);
}

/* Step info */
.cs-step-info {
  flex: 1;
  min-width: 0;
}

/* Step description */
.cs-step-description {
  font-weight: 500;
  margin-bottom: 0.25rem;
  color: var(--cs-text-color);
  word-break: break-word;
  line-height: 1.4;
}

/* Step edit input */
.cs-step-edit-input {
  width: 100%;
  padding: 0.25rem 0.5rem;
  border: 1px solid var(--cs-border-color);
  border-radius: 4px;
  font-size: 0.9rem;
  margin-bottom: 0.25rem;
}

.cs-step-edit-input:focus {
  outline: none;
  border-color: var(--cs-primary-color);
  box-shadow: 0 0 0 2px var(--cs-primary-light);
}

/* Step details */
.cs-step-details {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  font-size: 0.8rem;
  color: var(--cs-text-secondary);
}

/* Step element */
.cs-step-element {
  display: inline-block;
  padding: 0.1rem 0.4rem;
  background-color: rgba(0, 0, 0, 0.05);
  border-radius: 4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 150px;
}

/* Step value */
.cs-step-value {
  display: inline-block;
  padding: 0.1rem 0.4rem;
  background-color: rgba(0, 0, 0, 0.05);
  border-radius: 4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 150px;
}

/* Step actions */
.cs-step-actions {
  display: flex;
  gap: 0.25rem;
  margin-left: 0.5rem;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.cs-step-item:hover .cs-step-actions {
  opacity: 1;
}

/* Step action buttons */
.cs-step-edit-btn,
.cs-step-delete-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border: none;
  background-color: transparent;
  color: var(--cs-text-secondary);
  border-radius: 4px;
  cursor: pointer;
  transition: var(--cs-transition);
}

.cs-step-edit-btn:hover {
  background-color: var(--cs-primary-light);
  color: var(--cs-primary-color);
}

.cs-step-delete-btn:hover {
  background-color: rgba(244, 67, 54, 0.1);
  color: var(--cs-error-color);
}

/* Step screenshot */
.cs-step-screenshot {
  margin-top: 0.75rem;
  border-radius: 4px;
  overflow: hidden;
  border: 1px solid var(--cs-border-color);
}

.cs-step-screenshot img {
  width: 100%;
  height: auto;
  display: block;
}

/* Step timestamp */
.cs-step-timestamp {
  position: absolute;
  bottom: 0.5rem;
  right: 0.75rem;
  font-size: 0.7rem;
  color: var(--cs-text-secondary);
}

/* Action type specific styles */
.cs-action-click .cs-step-icon {
  color: var(--cs-info-color);
}

.cs-action-input .cs-step-icon {
  color: var(--cs-primary-color);
}

.cs-action-select .cs-step-icon {
  color: var(--cs-primary-color);
}

.cs-action-navigate .cs-step-icon {
  color: var(--cs-info-color);
}

.cs-action-wait .cs-step-icon {
  color: var(--cs-warning-color);
}

.cs-action-assert .cs-step-icon {
  color: var(--cs-success-color);
}

.cs-action-custom .cs-step-icon {
  color: var(--cs-text-color);
}

.cs-action-conditional .cs-step-icon {
  color: var(--cs-info-color);
}

.cs-action-loop .cs-step-icon {
  color: var(--cs-info-color);
}

.cs-action-data .cs-step-icon {
  color: var(--cs-primary-color);
}

.cs-action-hover .cs-step-icon {
  color: var(--cs-text-color);
}

/* Drag and drop placeholder */
.cs-step-placeholder {
  height: 3rem;
  border: 1px dashed var(--cs-primary-color);
  border-radius: var(--cs-radius);
  background-color: var(--cs-primary-light);
  margin-bottom: 0.5rem;
}


BrowserFrame.tsx
---------------------------------------

import React, { useState, useEffect, useRef, forwardRef, useImperativeHandle } from 'react';
import './BrowserFrame.css';
import { RecordingOptions, ElementInfo } from './RecorderComponent';

interface BrowserFrameProps {
  /** Initial URL to navigate to */
  url: string;
  /** Whether recording is active */
  isRecording: boolean;
  /** Callback when URL changes */
  onUrlChange: (url: string) => void;
  /** Callback when an error occurs */
  onError: (error: Error) => void;
  /** Recording options */
  options: RecordingOptions;
  /** Framework in use */
  framework: 'selenium' | 'playwright';
  /** Programming language in use */
  language: 'java' | 'typescript';
  /** Test type in use */
  testType: 'testng' | 'bdd';
  /** Whether the component is disabled */
  disabled?: boolean;
}

export interface BrowserFrameRef {
  /** Start recording */
  startRecording: (options: RecordingOptions) => void;
  /** Stop recording */
  stopRecording: () => void;
  /** Pause recording */
  pauseRecording: () => void;
  /** Resume recording */
  resumeRecording: () => void;
  /** Navigate to a URL */
  navigate: (url: string) => void;
  /** Toggle element picker */
  toggleElementPicker: (active: boolean) => void;
  /** Highlight an element */
  highlightElement: (element: ElementInfo) => void;
}

/**
 * BrowserFrame Component
 * 
 * Provides a browser frame for interacting with web applications during testing.
 * Features:
 * - Navigation to specific URLs
 * - Recording user interactions
 * - Element picking and highlighting
 * - Screenshot capture
 * - Error handling
 */
const BrowserFrame = forwardRef<BrowserFrameRef, BrowserFrameProps>((props, ref) => {
  const {
    url,
    isRecording,
    onUrlChange,
    onError,
    options,
    framework,
    language,
    testType,
    disabled = false
  } = props;
  
  // State for loading status
  const [isLoading, setIsLoading] = useState<boolean>(true);
  // State for error
  const [error, setError] = useState<string | null>(null);
  // State for element picker
  const [elementPickerActive, setElementPickerActive] = useState<boolean>(false);
  // State for current URL
  const [currentUrl, setCurrentUrl] = useState<string>(url);
  // State for recording status
  const [recordingActive, setRecordingActive] = useState<boolean>(isRecording);
  // State for recording pause
  const [recordingPaused, setRecordingPaused] = useState<boolean>(false);
  
  // Refs for the iframe
  const iframeRef = useRef<HTMLIFrameElement>(null);
  // Ref for injection script status
  const injectedRef = useRef<boolean>(false);
  // Ref for message handlers
  const messageHandlerRef = useRef<(event: MessageEvent) => void | null>(null);
  
  // Expose methods to parent component
  useImperativeHandle(ref, () => ({
    startRecording: (options: RecordingOptions) => {
      startRecording(options);
    },
    stopRecording: () => {
      stopRecording();
    },
    pauseRecording: () => {
      pauseRecording();
    },
    resumeRecording: () => {
      resumeRecording();
    },
    navigate: (url: string) => {
      navigateToUrl(url);
    },
    toggleElementPicker: (active: boolean) => {
      toggleElementPicker(active);
    },
    highlightElement: (element: ElementInfo) => {
      highlightElement(element);
    }
  }));
  
  // Effect to set up message listener
  useEffect(() => {
    // Create message handler
    const handleMessage = (event: MessageEvent) => {
      // Verify origin for security
      if (event.origin !== window.location.origin && !event.data.fromCSTestForge) {
        return;
      }
      
      try {
        const message = event.data;
        
        if (!message || !message.type) {
          return;
        }
        
        switch (message.type) {
          case 'CS_READY':
            // Framework is ready in the iframe
            setIsLoading(false);
            injectedRef.current = true;
            break;
            
          case 'CS_ERROR':
            // Error occurred in the iframe
            setError(message.error || 'Unknown error occurred');
            if (onError) {
              onError(new Error(message.error || 'Unknown error occurred'));
            }
            break;
            
          case 'CS_URL_CHANGE':
            // URL changed in the iframe
            if (message.url) {
              setCurrentUrl(message.url);
              onUrlChange(message.url);
            }
            break;
            
          case 'CS_ACTION':
            // Action recorded in the iframe
            if (window.parent && window.parent.postMessage) {
              // Forward to parent window for WebSocket handling
              window.parent.postMessage({
                type: 'CS_ACTION',
                action: message.action,
                fromCSTestForge: true
              }, '*');
            }
            break;
            
          case 'CS_ELEMENT':
            // Element info from the iframe
            if (window.parent && window.parent.postMessage) {
              // Forward to parent window for WebSocket handling
              window.parent.postMessage({
                type: 'CS_ELEMENT',
                element: message.element,
                fromCSTestForge: true
              }, '*');
            }
            break;
            
          case 'CS_SCREENSHOT':
            // Screenshot from the iframe
            if (window.parent && window.parent.postMessage) {
              // Forward to parent window for WebSocket handling
              window.parent.postMessage({
                type: 'CS_SCREENSHOT',
                screenshot: message.screenshot,
                actionId: message.actionId,
                fromCSTestForge: true
              }, '*');
            }
            break;
        }
      } catch (error) {
        console.error('Error processing message from iframe:', error);
        if (onError) {
          onError(new Error('Failed to process message from browser frame'));
        }
      }
    };
    
    // Save the handler to ref for cleanup
    messageHandlerRef.current = handleMessage;
    
    // Add event listener
    window.addEventListener('message', handleMessage);
    
    // Cleanup function
    return () => {
      if (messageHandlerRef.current) {
        window.removeEventListener('message', messageHandlerRef.current);
      }
    };
  }, [onUrlChange, onError]);
  
  // Effect to update recording status from props
  useEffect(() => {
    setRecordingActive(isRecording);
  }, [isRecording]);
  
  // Effect to inject recorder script into iframe
  useEffect(() => {
    if (iframeRef.current && !injectedRef.current) {
      // Attempt to inject the script after iframe loads
      injectScript();
    }
  }, [iframeRef.current]);
  
  // Effect to update URL from props
  useEffect(() => {
    if (url !== currentUrl) {
      // Navigate to the new URL
      navigateToUrl(url);
    }
  }, [url]);
  
  // Inject recorder script into iframe
  const injectScript = () => {
    if (!iframeRef.current) return;
    
    try {
      // Wait for iframe to load
      iframeRef.current.onload = () => {
        if (!iframeRef.current) return;
        
        try {
          const iframeWindow = iframeRef.current.contentWindow;
          
          if (!iframeWindow) {
            throw new Error('Cannot access iframe content window');
          }
          
          // Check if we can access the iframe's document
          // This will throw an error for cross-origin iframes
          const iframeDocument = iframeWindow.document;
          
          // Inject recorder script
          const script = iframeDocument.createElement('script');
          script.textContent = getRecorderScript();
          script.type = 'text/javascript';
          iframeDocument.head.appendChild(script);
          
          // Inject recorder styles
          const style = iframeDocument.createElement('style');
          style.textContent = getRecorderStyles();
          iframeDocument.head.appendChild(style);
          
          // Send initialization message
          iframeWindow.postMessage({
            type: 'CS_INIT',
            options,
            framework,
            language,
            testType,
            fromCSTestForge: true
          }, '*');
          
          setIsLoading(false);
        } catch (error) {
          console.error('Failed to inject recorder script:', error);
          setError('Cannot access iframe content due to cross-origin restrictions. Please make sure the target URL is on the same domain or has appropriate CORS headers.');
          setIsLoading(false);
          
          if (onError) {
            onError(new Error('Failed to inject recorder script: Cross-origin access denied'));
          }
        }
      };
      
      // Force reload if already loaded
      if (iframeRef.current.contentWindow && iframeRef.current.contentDocument && iframeRef.current.contentDocument.readyState === 'complete') {
        const currentSrc = iframeRef.current.src;
        iframeRef.current.src = 'about:blank';
        setTimeout(() => {
          if (iframeRef.current) {
            iframeRef.current.src = currentSrc;
          }
        }, 50);
      }
    } catch (error) {
      console.error('Error during script injection:', error);
      setError('Failed to initialize browser frame');
      setIsLoading(false);
      
      if (onError) {
        onError(new Error('Failed to initialize browser frame'));
      }
    }
  };
  
  // Start recording
  const startRecording = (options: RecordingOptions) => {
    if (!iframeRef.current || !iframeRef.current.contentWindow) return;
    
    try {
      setRecordingActive(true);
      setRecordingPaused(false);
      
      // Send message to iframe
      iframeRef.current.contentWindow.postMessage({
        type: 'CS_START_RECORDING',
        options,
        fromCSTestForge: true
      }, '*');
    } catch (error) {
      console.error('Failed to start recording:', error);
      if (onError) {
        onError(new Error('Failed to start recording'));
      }
    }
  };
  
  // Stop recording
  const stopRecording = () => {
    if (!iframeRef.current || !iframeRef.current.contentWindow) return;
    
    try {
      setRecordingActive(false);
      setRecordingPaused(false);
      
      // Send message to iframe
      iframeRef.current.contentWindow.postMessage({
        type: 'CS_STOP_RECORDING',
        fromCSTestForge: true
      }, '*');
    } catch (error) {
      console.error('Failed to stop recording:', error);
      if (onError) {
        onError(new Error('Failed to stop recording'));
      }
    }
  };
  
  // Pause recording
  const pauseRecording = () => {
    if (!iframeRef.current || !iframeRef.current.contentWindow) return;
    
    try {
      setRecordingPaused(true);
      
      // Send message to iframe
      iframeRef.current.contentWindow.postMessage({
        type: 'CS_PAUSE_RECORDING',
        fromCSTestForge: true
      }, '*');
    } catch (error) {
      console.error('Failed to pause recording:', error);
      if (onError) {
        onError(new Error('Failed to pause recording'));
      }
    }
  };
  
  // Resume recording
  const resumeRecording = () => {
    if (!iframeRef.current || !iframeRef.current.contentWindow) return;
    
    try {
      setRecordingPaused(false);
      
      // Send message to iframe
      iframeRef.current.contentWindow.postMessage({
        type: 'CS_RESUME_RECORDING',
        fromCSTestForge: true
      }, '*');
    } catch (error) {
      console.error('Failed to resume recording:', error);
      if (onError) {
        onError(new Error('Failed to resume recording'));
      }
    }
  };
  
  // Navigate to URL
  const navigateToUrl = (url: string) => {
    if (!iframeRef.current) return;
    
    try {
      setIsLoading(true);
      setError(null);
      setCurrentUrl(url);
      
      // Check if we need to add protocol
      let navigateUrl = url;
      if (!/^https?:\/\//i.test(navigateUrl) && navigateUrl !== 'about:blank') {
        navigateUrl = 'https://' + navigateUrl;
      }
      
      // Update iframe src
      iframeRef.current.src = navigateUrl;
    } catch (error) {
      console.error('Failed to navigate:', error);
      setIsLoading(false);
      setError('Failed to navigate to: ' + url);
      
      if (onError) {
        onError(new Error('Failed to navigate to: ' + url));
      }
    }
  };
  
  // Toggle element picker
  const toggleElementPicker = (active: boolean) => {
    if (!iframeRef.current || !iframeRef.current.contentWindow) return;
    
    try {
      setElementPickerActive(active);
      
      // Send message to iframe
      iframeRef.current.contentWindow.postMessage({
        type: active ? 'CS_ENABLE_ELEMENT_PICKER' : 'CS_DISABLE_ELEMENT_PICKER',
        fromCSTestForge: true
      }, '*');
    } catch (error) {
      console.error('Failed to toggle element picker:', error);
      if (onError) {
        onError(new Error('Failed to toggle element picker'));
      }
    }
  };
  
  // Highlight element
  const highlightElement = (element: ElementInfo) => {
    if (!iframeRef.current || !iframeRef.current.contentWindow) return;
    
    try {
      // Send message to iframe
      iframeRef.current.contentWindow.postMessage({
        type: 'CS_HIGHLIGHT_ELEMENT',
        element,
        fromCSTestForge: true
      }, '*');
    } catch (error) {
      console.error('Failed to highlight element:', error);
      if (onError) {
        onError(new Error('Failed to highlight element'));
      }
    }
  };
  
  // Get recorder script for injection
  const getRecorderScript = (): string => {
    // This is where the recorder script would be inserted
    // In a real implementation, this would be a minified script
    // containing event listeners, element identification logic,
    // screenshot capture functionality, etc.
    // 
    // For this implementation, we'll use a simplified version
    
    return `
      (function() {
        // Set up global recorder object
        window.CSTestForgeRecorder = {
          active: false,
          paused: false,
          options: {},
          framework: 'selenium',
          language: 'java',
          testType: 'testng',
          elementPickerActive: false,
          highlightedElement: null,
          eventListeners: {},
          
          // Initialize recorder
          init: function(options, framework, language, testType) {
            this.options = options || {};
            this.framework = framework || 'selenium';
            this.language = language || 'java';
            this.testType = testType || 'testng';
            
            // Send ready message
            this.sendMessage('CS_READY');
            
            // Set up message listener
            window.addEventListener('message', this.handleMessage.bind(this));
            
            // Send URL change
            this.sendMessage('CS_URL_CHANGE', { url: window.location.href });
            
            // Attach URL change listener
            this.attachUrlChangeListener();
          },
          
          // Handle incoming messages
          handleMessage: function(event) {
            if (!event.data || !event.data.type || !event.data.fromCSTestForge) {
              return;
            }
            
            const message = event.data;
            
            switch (message.type) {
              case 'CS_INIT':
                this.init(message.options, message.framework, message.language, message.testType);
                break;
                
              case 'CS_START_RECORDING':
                this.startRecording(message.options);
                break;
                
              case 'CS_STOP_RECORDING':
                this.stopRecording();
                break;
                
              case 'CS_PAUSE_RECORDING':
                this.pauseRecording();
                break;
                
              case 'CS_RESUME_RECORDING':
                this.resumeRecording();
                break;
                
              case 'CS_ENABLE_ELEMENT_PICKER':
                this.enableElementPicker();
                break;
                
              case 'CS_DISABLE_ELEMENT_PICKER':
                this.disableElementPicker();
                break;
                
              case 'CS_HIGHLIGHT_ELEMENT':
                this.highlightElement(message.element);
                break;
            }
          },
          
          // Send message to parent window
          sendMessage: function(type, data) {
            if (window.parent) {
              const message = {
                type: type,
                ...data,
                fromCSTestForge: true
              };
              
              window.parent.postMessage(message, '*');
            }
          },
          
          // Start recording
          startRecording: function(options) {
            if (this.active) return;
            
            this.options = options || this.options;
            this.active = true;
            this.paused = false;
            
            // Attach event listeners
            this.attachEventListeners();
            
            // Capture initial screenshot if enabled
            if (this.options.captureScreenshots) {
              this.captureScreenshot();
            }
          },
          
          // Stop recording
          stopRecording: function() {
            if (!this.active) return;
            
            this.active = false;
            this.paused = false;
            
            // Detach event listeners
            this.detachEventListeners();
          },
          
          // Pause recording
          pauseRecording: function() {
            if (!this.active || this.paused) return;
            
            this.paused = true;
            
            // Detach event listeners
            this.detachEventListeners();
          },
          
          // Resume recording
          resumeRecording: function() {
            if (!this.active || !this.paused) return;
            
            this.paused = false;
            
            // Reattach event listeners
            this.attachEventListeners();
          },
          
          // Enable element picker
          enableElementPicker: function() {
            this.elementPickerActive = true;
            document.body.classList.add('cs-element-picker-active');
            
            // Remove any existing highlight
            this.removeElementHighlight();
            
            // Add mouseover listener
            document.addEventListener('mouseover', this.handleElementPickerMouseOver);
            document.addEventListener('click', this.handleElementPickerClick, true);
          },
          
          // Disable element picker
          disableElementPicker: function() {
            this.elementPickerActive = false;
            document.body.classList.remove('cs-element-picker-active');
            
            // Remove any existing highlight
            this.removeElementHighlight();
            
            // Remove mouseover listener
            document.removeEventListener('mouseover', this.handleElementPickerMouseOver);
            document.removeEventListener('click', this.handleElementPickerClick, true);
          },
          
          // Handle element picker mouseover
          handleElementPickerMouseOver: function(event) {
            if (!window.CSTestForgeRecorder.elementPickerActive) return;
            
            // Prevent default behavior
            event.preventDefault();
            event.stopPropagation();
            
            // Get target element
            const target = event.target;
            
            // Highlight element
            window.CSTestForgeRecorder.highlightElementDom(target);
          },
          
          // Handle element picker click
          handleElementPickerClick: function(event) {
            if (!window.CSTestForgeRecorder.elementPickerActive) return;
            
            // Prevent default behavior
            event.preventDefault();
            event.stopPropagation();
            
            // Get target element
            const target = event.target;
            
            // Get element info
            const elementInfo = window.CSTestForgeRecorder.getElementInfo(target);
            
            // Send element info to parent
            window.CSTestForgeRecorder.sendMessage('CS_ELEMENT', { element: elementInfo });
            
            // Disable element picker
            window.CSTestForgeRecorder.disableElementPicker();
          },
          
          // Highlight element based on element info
          highlightElement: function(elementInfo) {
            if (!elementInfo) return;
            
            // Try to find the element
            let element = null;
            
            // Try to find by ID
            if (elementInfo.id) {
              element = document.getElementById(elementInfo.id);
            }
            
            // Try to find by XPath
            if (!element && elementInfo.xpath) {
              try {
                const result = document.evaluate(
                  elementInfo.xpath,
                  document,
                  null,
                  XPathResult.FIRST_ORDERED_NODE_TYPE,
                  null
                );
                
                if (result.singleNodeValue) {
                  element = result.singleNodeValue;
                }
              } catch (error) {
                console.error('Failed to evaluate XPath:', error);
              }
            }
            
            // Try to find by CSS selector
            if (!element && elementInfo.selector) {
              try {
                element = document.querySelector(elementInfo.selector);
              } catch (error) {
                console.error('Failed to query selector:', error);
              }
            }
            
            // Highlight the element if found
            if (element) {
              this.highlightElementDom(element);
            }
          },
          
          // Highlight DOM element
          highlightElementDom: function(element) {
            // Remove any existing highlight
            this.removeElementHighlight();
            
            // Create highlight element
            const highlight = document.createElement('div');
            highlight.classList.add('cs-element-highlight');
            
            // Get element position and size
            const rect = element.getBoundingClientRect();
            
            // Set highlight position and size
            highlight.style.top = rect.top + window.scrollY + 'px';
            highlight.style.left = rect.left + window.scrollX + 'px';
            highlight.style.width = rect.width + 'px';
            highlight.style.height = rect.height + 'px';
            
            // Add highlight to document
            document.body.appendChild(highlight);
            
            // Save reference to highlighted element
            this.highlightedElement = element;
          },
          
          // Remove element highlight
          removeElementHighlight: function() {
            // Remove any existing highlight
            const highlights = document.querySelectorAll('.cs-element-highlight');
            highlights.forEach(highlight => highlight.remove());
            
            // Clear highlighted element reference
            this.highlightedElement = null;
          },
          
          // Attach event listeners
          attachEventListeners: function() {
            // Click listener
            if (!this.eventListeners.click) {
              this.eventListeners.click = this.handleClick.bind(this);
              document.addEventListener('click', this.eventListeners.click, true);
            }
            
            // Input listener
            if (!this.eventListeners.input) {
              this.eventListeners.input = this.handleInput.bind(this);
              document.addEventListener('input', this.eventListeners.input, true);
            }
            
            // Change listener
            if (!this.eventListeners.change) {
              this.eventListeners.change = this.handleChange.bind(this);
              document.addEventListener('change', this.eventListeners.change, true);
            }
            
            // Navigation listener (via History API)
            if (!this.eventListeners.popstate) {
              this.eventListeners.popstate = this.handlePopState.bind(this);
              window.addEventListener('popstate', this.eventListeners.popstate);
            }
          },
          
          // Detach event listeners
          detachEventListeners: function() {
            // Click listener
            if (this.eventListeners.click) {
              document.removeEventListener('click', this.eventListeners.click, true);
              delete this.eventListeners.click;
            }
            
            // Input listener
            if (this.eventListeners.input) {
              document.removeEventListener('input', this.eventListeners.input, true);
              delete this.eventListeners.input;
            }
            
            // Change listener
            if (this.eventListeners.change) {
              document.removeEventListener('change', this.eventListeners.change, true);
              delete this.eventListeners.change;
            }
            
            // Navigation listener
            if (this.eventListeners.popstate) {
              window.removeEventListener('popstate', this.eventListeners.popstate);
              delete this.eventListeners.popstate;
            }
          },
          
          // Attach URL change listener
          attachUrlChangeListener: function() {
            // Intercept History API methods
            const originalPushState = window.history.pushState;
            const originalReplaceState = window.history.replaceState;
            
            // Override pushState
            window.history.pushState = function() {
              originalPushState.apply(this, arguments);
              
              // Send URL change event
              window.CSTestForgeRecorder.sendMessage('CS_URL_CHANGE', { url: window.location.href });
            };
            
            // Override replaceState
            window.history.replaceState = function() {
              originalReplaceState.apply(this, arguments);
              
              // Send URL change event
              window.CSTestForgeRecorder.sendMessage('CS_URL_CHANGE', { url: window.location.href });
            };
          },
          
          // Handle click event
          handleClick: function(event) {
            if (!this.active || this.paused || this.elementPickerActive) return;
            
            const target = event.target;
            
            // Ignore clicks on recorder elements
            if (target.closest('.cs-element-highlight')) return;
            
            // Get element info
            const elementInfo = this.getElementInfo(target);
            
            // Create action
            const action = {
              id: 'action_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
              type: 'click',
              element: elementInfo,
              timestamp: Date.now(),
              description: 'Click on ' + (elementInfo.tagName.toLowerCase() + (elementInfo.id ? ' #' + elementInfo.id : ''))
            };
            
            // Send action to parent
            this.sendMessage('CS_ACTION', { action });
            
            // Capture screenshot if enabled
            if (this.options.captureScreenshots) {
              setTimeout(() => {
                this.captureScreenshot(action.id);
              }, 100);
            }
          },
          
          // Handle input event
          handleInput: function(event) {
            if (!this.active || this.paused) return;
            
            const target = event.target;
            
            // Only handle input elements
            if (target.tagName !== 'INPUT' && target.tagName !== 'TEXTAREA') return;
            
            // Get element info
            const elementInfo = this.getElementInfo(target);
            
            // Create action
            const action = {
              id: 'action_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
              type: 'input',
              element: elementInfo,
              value: target.value,
              timestamp: Date.now(),
              description: 'Input text to ' + (elementInfo.tagName.toLowerCase() + (elementInfo.id ? ' #' + elementInfo.id : ''))
            };
            
            // Send action to parent
            this.sendMessage('CS_ACTION', { action });
          },
          
          // Handle change event
          handleChange: function(event) {
            if (!this.active || this.paused) return;
            
            const target = event.target;
            
            // Only handle select elements
            if (target.tagName !== 'SELECT') return;
            
            // Get element info
            const elementInfo = this.getElementInfo(target);
            
            // Create action
            const action = {
              id: 'action_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
              type: 'select',
              element: elementInfo,
              value: target.value,
              timestamp: Date.now(),
              description: 'Select option in ' + (elementInfo.tagName.toLowerCase() + (elementInfo.id ? ' #' + elementInfo.id : ''))
            };
            
            // Send action to parent
            this.sendMessage('CS_ACTION', { action });
            
            // Capture screenshot if enabled
            if (this.options.captureScreenshots) {
              setTimeout(() => {
                this.captureScreenshot(action.id);
              }, 100);
            }
          },
          
          // Handle popstate event (navigation)
          handlePopState: function() {
            if (!this.active || this.paused) return;
            
            // Send URL change event
            this.sendMessage('CS_URL_CHANGE', { url: window.location.href });
            
            // Create action
            const action = {
              id: 'action_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
              type: 'navigate',
              targetUrl: window.location.href,
              timestamp: Date.now(),
              description: 'Navigate to ' + window.location.href
            };
            
            // Send action to parent
            this.sendMessage('CS_ACTION', { action });
            
            // Capture screenshot if enabled
            if (this.options.captureScreenshots) {
              setTimeout(() => {
                this.captureScreenshot(action.id);
              }, 100);
            }
          },
          
          // Get element info
          getElementInfo: function(element) {
            // Get basic element info
            const elementInfo = {
              tagName: element.tagName,
              id: element.id,
              type: element.type,
              name: element.name,
              className: element.className,
              attributes: {},
              location: {
                x: 0,
                y: 0,
                width: 0,
                height: 0
              }
            };
            
            // Get element attributes
            for (let i = 0; i < element.attributes.length; i++) {
              const attr = element.attributes[i];
              elementInfo.attributes[attr.name] = attr.value;
            }
            
            // Get element text content
            if (element.textContent) {
              elementInfo.text = element.textContent.trim();
            }
            
            // Get element value
            if (element.value !== undefined) {
              elementInfo.value = element.value;
            }
            
            // Get element placeholder
            if (element.placeholder !== undefined) {
              elementInfo.placeholder = element.placeholder;
            }
            
            // Get element location
            const rect = element.getBoundingClientRect();
            elementInfo.location = {
              x: rect.left + window.scrollX,
              y: rect.top + window.scrollY,
              width: rect.width,
              height: rect.height
            };
            
            // Get element XPath
            elementInfo.xpath = this.getElementXPath(element);
            
            // Get element CSS selector
            elementInfo.selector = this.getElementSelector(element);
            
            // Get frame information if in iframe
            if (window !== window.top) {
              elementInfo.frameId = window.name || '';
              // TODO: Get frame location
            }
            
            return elementInfo;
          },
          
          // Get element XPath
          getElementXPath: function(element) {
            if (!element) return '';
            
            try {
              let xpath = '';
              let current = element;
              
              while (current && current.nodeType === Node.ELEMENT_NODE) {
                let index = 0;
                let hasFollowingSiblings = false;
                
                // Count preceding siblings with same tag name
                for (let sibling = current.previousSibling; sibling; sibling = sibling.previousSibling) {
                  if (sibling.nodeType === Node.ELEMENT_NODE && sibling.tagName === current.tagName) {
                    index++;
                  }
                }
                
                // Check if has following siblings
                for (let sibling = current.nextSibling; sibling && !hasFollowingSiblings; sibling = sibling.nextSibling) {
                  if (sibling.nodeType === Node.ELEMENT_NODE && sibling.tagName === current.tagName) {
                    hasFollowingSiblings = true;
                  }
                }
                
                const tagName = current.tagName.toLowerCase();
                
                // Use ID if available
                if (current.id) {
                  xpath = `//${tagName}[@id="${current.id}"]` + xpath;
                  break;
                } else {
                  const position = index + 1;
                  const pathIndex = position > 1 || hasFollowingSiblings ? `[${position}]` : '';
                  xpath = `/${tagName}${pathIndex}` + xpath;
                  
                  current = current.parentNode;
                }
              }
              
              return xpath;
            } catch (error) {
              console.error('Failed to get element XPath:', error);
              return '';
            }
          },
          
          // Get element CSS selector
          getElementSelector: function(element) {
            if (!element) return '';
            
            try {
              // Use ID if available
              if (element.id) {
                return '#' + element.id;
              }
              
              // Start with tag name
              let selector = element.tagName.toLowerCase();
              
              // Add classes
              if (element.className) {
                const classes = element.className.trim().split(/\\s+/);
                for (let i = 0; i < classes.length; i++) {
                  if (classes[i]) {
                    selector += '.' + classes[i];
                  }
                }
              }
              
              // Add attributes
              for (let i = 0; i < element.attributes.length; i++) {
                const attr = element.attributes[i];
                if (attr.name !== 'class' && attr.name !== 'style' && attr.name !== 'id') {
                  selector += '[' + attr.name + '="' + attr.value + '"]';
                }
              }
              
              return selector;
            } catch (error) {
              console.error('Failed to get element CSS selector:', error);
              return '';
            }
          },
          
          // Capture screenshot
          captureScreenshot: function(actionId) {
            try {
              // Create canvas
              const canvas = document.createElement('canvas');
              canvas.width = window.innerWidth;
              canvas.height = window.innerHeight;
              
              // Get context
              const context = canvas.getContext('2d');
              
              // Draw page to canvas
              const html = document.documentElement;
              
              // Load html2canvas dynamically
              // In a real implementation, we would use html2canvas or a similar library
              // For this implementation, we'll use a simplified approach
              
              // Fill canvas with white
              context.fillStyle = '#ffffff';
              context.fillRect(0, 0, canvas.width, canvas.height);
              
              // Get page screenshot as data URL
              const screenshotDataUrl = canvas.toDataURL('image/png');
              
              // Send screenshot to parent
              this.sendMessage('CS_SCREENSHOT', {
                screenshot: screenshotDataUrl,
                actionId: actionId
              });
            } catch (error) {
              console.error('Failed to capture screenshot:', error);
            }
          }
        };
      })();
    `;
  };
  
  // Get recorder styles for injection
  const getRecorderStyles = (): string => {
    return `
      .cs-element-highlight {
        position: absolute;
        pointer-events: none;
        box-sizing: border-box;
        border: 2px solid #C54B8C;
        background-color: rgba(197, 75, 140, 0.1);
        z-index: 9999;
        transition: all 0.2s ease;
      }
      
      .cs-element-picker-active * {
        cursor: crosshair !important;
      }
    `;
  };
  
  // Render loading state
  const renderLoading = () => {
    if (!isLoading) return null;
    
    return (
      <div className="cs-browser-loading">
        <div className="cs-loading-spinner"></div>
        <p className="cs-loading-message">Loading browser frame...</p>
      </div>
    );
  };
  
  // Render error state
  const renderError = () => {
    if (!error) return null;
    
    return (
      <div className="cs-browser-error">
        <div className="cs-error-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M12 8V12" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M12 16H12.01" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        </div>
        <h3 className="cs-error-title">Browser Error</h3>
        <p className="cs-error-message">{error}</p>
        <button
          className="cs-retry-button"
          onClick={() => navigateToUrl(currentUrl)}
          disabled={disabled}
        >
          Retry
        </button>
      </div>
    );
  };
  
  // Render recording indicator
  const renderRecordingIndicator = () => {
    if (!recordingActive) return null;
    
    return (
      <div className={`cs-recording-overlay ${recordingPaused ? 'paused' : ''}`}>
        <div className="cs-recording-badge">
          <span className="cs-recording-indicator"></span>
          <span className="cs-recording-text">
            {recordingPaused ? 'Recording Paused' : 'Recording'}
          </span>
        </div>
      </div>
    );
  };
  
  // Render element picker indicator
  const renderElementPickerIndicator = () => {
    if (!elementPickerActive) return null;
    
    return (
      <div className="cs-element-picker-overlay">
        <div className="cs-element-picker-badge">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 3H21V21H3V3Z" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M9 3V21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
          <span>Select an Element</span>
        </div>
      </div>
    );
  };
  
  return (
    <div className={`cs-browser-frame ${disabled ? 'disabled' : ''}`}>
      <iframe
        ref={iframeRef}
        src={currentUrl}
        title="Browser Frame"
        className="cs-browser-iframe"
      ></iframe>
      
      {renderLoading()}
      {renderError()}
      {renderRecordingIndicator()}
      {renderElementPickerIndicator()}
    </div>
  );
});

export default BrowserFrame;


BrowserFrame.css
---------------------------

:root {
  --cs-primary-color: #C54B8C; /* Primary brand color */
  --cs-primary-hover: #aa3d76;
  --cs-primary-light: rgba(197, 75, 140, 0.1);
  --cs-primary-active: #8f345f;
  --cs-text-color: #333333;
  --cs-text-secondary: #666666;
  --cs-border-color: #e0e0e0;
  --cs-bg-color: #ffffff;
  --cs-bg-secondary: #f8f9fa;
  --cs-error-color: #f44336;
  --cs-success-color: #4caf50;
  --cs-warning-color: #ff9800;
  --cs-disabled-bg: #f5f5f5;
  --cs-disabled-text: #aaaaaa;
  --cs-transition: all 0.3s ease;
  --cs-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  --cs-radius: 8px;
}

/* Main container */
.cs-browser-frame {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background-color: var(--cs-bg-color);
  border: 1px solid var(--cs-border-color);
  border-radius: var(--cs-radius);
}

/* Disabled state */
.cs-browser-frame.disabled {
  opacity: 0.7;
  pointer-events: none;
}

/* Browser iframe */
.cs-browser-iframe {
  width: 100%;
  height: 100%;
  border: none;
  background-color: var(--cs-bg-color);
}

/* Loading state */
.cs-browser-loading {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: rgba(255, 255, 255, 0.9);
  z-index: 10;
}

.cs-loading-spinner {
  width: 40px;
  height: 40px;
  border: 3px solid var(--cs-primary-light);
  border-top-color: var(--cs-primary-color);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 1rem;
}

.cs-loading-message {
  font-size: 1rem;
  color: var(--cs-text-color);
  margin: 0;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* Error state */
.cs-browser-error {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: var(--cs-bg-color);
  z-index: 10;
  padding: 2rem;
  text-align: center;
}

.cs-error-icon {
  margin-bottom: 1rem;
  color: var(--cs-error-color);
}

.cs-error-title {
  margin: 0 0 0.5rem 0;
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--cs-error-color);
}

.cs-error-message {
  margin: 0 0 1.5rem 0;
  font-size: 1rem;
  color: var(--cs-text-secondary);
  max-width: 400px;
}

.cs-retry-button {
  padding: 0.5rem 1.5rem;
  background-color: var(--cs-primary-color);
  color: white;
  border: none;
  border-radius: 4px;
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: var(--cs-transition);
}

.cs-retry-button:hover {
  background-color: var(--cs-primary-hover);
}

.cs-retry-button:disabled {
  background-color: var(--cs-disabled-bg);
  color: var(--cs-disabled-text);
  cursor: not-allowed;
}

/* Recording overlay */
.cs-recording-overlay {
  position: absolute;
  top: 16px;
  right: 16px;
  z-index: 5;
  pointer-events: none;
}

.cs-recording-badge {
  display: flex;
  align-items: center;
  padding: 0.5rem 0.75rem;
  border-radius: 20px;
  background-color: rgba(0, 0, 0, 0.7);
  color: white;
}

.cs-recording-indicator {
  width: 10px;
  height: 10px;
  background-color: var(--cs-error-color);
  border-radius: 50%;
  margin-right: 0.5rem;
  animation: recording-pulse 2s infinite;
}

.cs-recording-overlay.paused .cs-recording-indicator {
  background-color: var(--cs-warning-color);
  animation: none;
}

.cs-recording-text {
  font-size: 0.85rem;
  font-weight: 500;
}

@keyframes recording-pulse {
  0% {
    transform: scale(0.95);
    box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.7);
  }
  
  70% {
    transform: scale(1);
    box-shadow: 0 0 0 6px rgba(244, 67, 54, 0);
  }
  
  100% {
    transform: scale(0.95);
    box-shadow: 0 0 0 0 rgba(244, 67, 54, 0);
  }
}

/* Element picker overlay */
.cs-element-picker-overlay {
  position: absolute;
  top: 16px;
  left: 16px;
  z-index: 5;
  pointer-events: none;
}

.cs-element-picker-badge {
  display: flex;
  align-items: center;
  padding: 0.5rem 0.75rem;
  border-radius: 20px;
  background-color: rgba(0, 0, 0, 0.7);
  color: white;
}

.cs-element-picker-badge svg {
  margin-right: 0.5rem;
}

/* Element highlight */
.cs-element-highlight {
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  border: 2px solid var(--cs-primary-color);
  background-color: var(--cs-primary-light);
  z-index: 9999;
  transition: all 0.2s ease;
}


ElementHighlighter.tsx
---------------------------------

import React, { useState, useEffect, useRef } from 'react';
import './ElementHighlighter.css';
import { ElementInfo } from './RecorderComponent';

interface ElementHighlighterProps {
  /** Element to highlight */
  element: ElementInfo;
  /** Callback when an element is selected */
  onElementSelect?: (element: ElementInfo) => void;
  /** Whether to show element details */
  showDetails?: boolean;
  /** Whether to show element actions */
  showActions?: boolean;
  /** Whether the component is disabled */
  disabled?: boolean;
}

/**
 * Element Highlighter Component
 * 
 * Highlights an element in the browser and shows its details.
 * Features:
 * - Highlights elements with a colored border
 * - Shows element details like tag name, ID, classes
 * - Shows XPath and CSS selectors
 * - Allows element selection for recording
 */
const ElementHighlighter: React.FC<ElementHighlighterProps> = ({
  element,
  onElementSelect,
  showDetails = true,
  showActions = true,
  disabled = false
}) => {
  // State for highlight position
  const [position, setPosition] = useState<{
    top: number;
    left: number;
    width: number;
    height: number;
  }>({
    top: 0,
    left: 0,
    width: 0,
    height: 0
  });
  
  // State for details position
  const [detailsPosition, setDetailsPosition] = useState<{
    top: number;
    left: number;
  }>({
    top: 0,
    left: 0
  });
  
  // State for whether details should be shown above or below the element
  const [showAbove, setShowAbove] = useState<boolean>(false);
  
  // Refs for components
  const highlightRef = useRef<HTMLDivElement>(null);
  const detailsRef = useRef<HTMLDivElement>(null);
  
  // Effect to position the highlight and details
  useEffect(() => {
    if (!element || !element.location) return;
    
    // Get element location
    const { x, y, width, height } = element.location;
    
    // Set highlight position
    setPosition({
      top: Math.max(0, y),
      left: Math.max(0, x),
      width: Math.max(1, width),
      height: Math.max(1, height)
    });
    
    // Calculate details position
    const windowHeight = window.innerHeight;
    const detailsHeight = detailsRef.current ? detailsRef.current.offsetHeight : 200;
    
    // Check if there's enough space below the element
    const spaceBelow = windowHeight - (y + height);
    const showAbove = spaceBelow < detailsHeight && y > detailsHeight;
    
    setShowAbove(showAbove);
    
    setDetailsPosition({
      top: showAbove ? y - 10 : y + height + 10,
      left: Math.max(10, Math.min(x, window.innerWidth - 320))
    });
  }, [element, detailsRef.current]);
  
  // Handle element selection
  const handleElementSelect = () => {
    if (disabled || !onElementSelect) return;
    
    onElementSelect(element);
  };
  
  // Get element name for display
  const getElementName = (): string => {
    if (!element) return 'Unknown Element';
    
    const tagName = element.tagName.toLowerCase();
    
    if (element.id) {
      return `${tagName}#${element.id}`;
    } else if (element.className) {
      return `${tagName}.${element.className.split(' ')[0]}`;
    } else if (element.name) {
      return `${tagName}[name="${element.name}"]`;
    } else if (element.text && element.text.length <= 20) {
      return `${tagName}="${element.text}"`;
    } else {
      return tagName;
    }
  };
  
  // Get shortened element text
  const getShortenedText = (text: string | undefined, maxLength: number = 50): string => {
    if (!text) return '';
    
    return text.length > maxLength ? text.substring(0, maxLength) + '...' : text;
  };
  
  // Render highlight
  const renderHighlight = () => {
    const style = {
      top: `${position.top}px`,
      left: `${position.left}px`,
      width: `${position.width}px`,
      height: `${position.height}px`
    };
    
    return (
      <div
        ref={highlightRef}
        className="cs-highlight"
        style={style}
        onClick={handleElementSelect}
      ></div>
    );
  };
  
  // Render details
  const renderDetails = () => {
    if (!showDetails) return null;
    
    const style = {
      top: `${detailsPosition.top}px`,
      left: `${detailsPosition.left}px`
    };
    
    const detailsClass = `cs-element-details ${showAbove ? 'above' : 'below'} ${disabled ? 'disabled' : ''}`;
    
    return (
      <div
        ref={detailsRef}
        className={detailsClass}
        style={style}
      >
        <div className="cs-element-header">
          <h3 className="cs-element-name">{getElementName()}</h3>
          
          {showActions && onElementSelect && (
            <button
              className="cs-element-select-btn"
              onClick={handleElementSelect}
              disabled={disabled}
            >
              Select
            </button>
          )}
        </div>
        
        <div className="cs-element-info">
          <div className="cs-element-info-row">
            <span className="cs-info-label">Tag:</span>
            <span className="cs-info-value">{element.tagName.toLowerCase()}</span>
          </div>
          
          {element.id && (
            <div className="cs-element-info-row">
              <span className="cs-info-label">ID:</span>
              <span className="cs-info-value">{element.id}</span>
            </div>
          )}
          
          {element.name && (
            <div className="cs-element-info-row">
              <span className="cs-info-label">Name:</span>
              <span className="cs-info-value">{element.name}</span>
            </div>
          )}
          
          {element.className && (
            <div className="cs-element-info-row">
              <span className="cs-info-label">Class:</span>
              <span className="cs-info-value">{element.className}</span>
            </div>
          )}
          
          {element.type && (
            <div className="cs-element-info-row">
              <span className="cs-info-label">Type:</span>
              <span className="cs-info-value">{element.type}</span>
            </div>
          )}
          
          {element.value !== undefined && (
            <div className="cs-element-info-row">
              <span className="cs-info-label">Value:</span>
              <span className="cs-info-value">{getShortenedText(element.value)}</span>
            </div>
          )}
          
          {element.text && (
            <div className="cs-element-info-row">
              <span className="cs-info-label">Text:</span>
              <span className="cs-info-value">{getShortenedText(element.text)}</span>
            </div>
          )}
          
          {element.placeholder && (
            <div className="cs-element-info-row">
              <span className="cs-info-label">Placeholder:</span>
              <span className="cs-info-value">{element.placeholder}</span>
            </div>
          )}
        </div>
        
        <div className="cs-element-selectors">
          <div className="cs-selector-item">
            <div className="cs-selector-header">
              <span className="cs-selector-label">XPath</span>
              <button 
                className="cs-copy-btn" 
                onClick={() => navigator.clipboard.writeText(element.xpath || '')}
                title="Copy to clipboard"
              >
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM19 5H8C6.9 5 6 5.9 6 7V21C6 22.1 6.9 23 8 23H19C20.1 23 21 22.1 21 21V7C21 5.9 20.1 5 19 5ZM19 21H8V7H19V21Z" fill="currentColor"/>
                </svg>
              </button>
            </div>
            <pre className="cs-selector-value">{element.xpath || 'N/A'}</pre>
          </div>
          
          <div className="cs-selector-item">
            <div className="cs-selector-header">
              <span className="cs-selector-label">CSS Selector</span>
              <button 
                className="cs-copy-btn" 
                onClick={() => navigator.clipboard.writeText(element.selector || '')}
                title="Copy to clipboard"
              >
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM19 5H8C6.9 5 6 5.9 6 7V21C6 22.1 6.9 23 8 23H19C20.1 23 21 22.1 21 21V7C21 5.9 20.1 5 19 5ZM19 21H8V7H19V21Z" fill="currentColor"/>
                </svg>
              </button>
            </div>
            <pre className="cs-selector-value">{element.selector || 'N/A'}</pre>
          </div>
        </div>
        
        <div className="cs-element-location">
          <div className="cs-location-item">
            <span className="cs-location-label">X:</span>
            <span className="cs-location-value">{Math.round(element.location.x)}px</span>
          </div>
          <div className="cs-location-item">
            <span className="cs-location-label">Y:</span>
            <span className="cs-location-value">{Math.round(element.location.y)}px</span>
          </div>
          <div className="cs-location-item">
            <span className="cs-location-label">Width:</span>
            <span className="cs-location-value">{Math.round(element.location.width)}px</span>
          </div>
          <div className="cs-location-item">
            <span className="cs-location-label">Height:</span>
            <span className="cs-location-value">{Math.round(element.location.height)}px</span>
          </div>
        </div>
        
        {element.frameId && (
          <div className="cs-element-frame">
            <span className="cs-frame-label">Frame:</span>
            <span className="cs-frame-value">{element.frameId}</span>
          </div>
        )}
      </div>
    );
  };
  
  // Render nothing if no element
  if (!element || !element.location) {
    return null;
  }
  
  return (
    <>
      {renderHighlight()}
      {renderDetails()}
    </>
  );
};

export default ElementHighlighter;


ElementHighlighter.css
----------------------------------------------------------
:root {
  --cs-primary-color: #C54B8C; /* Primary brand color */
  --cs-primary-hover: #aa3d76;
  --cs-primary-light: rgba(197, 75, 140, 0.1);
  --cs-primary-active: #8f345f;
  --cs-text-color: #333333;
  --cs-text-secondary: #666666;
  --cs-border-color: #e0e0e0;
  --cs-bg-color: #ffffff;
  --cs-bg-secondary: #f8f9fa;
  --cs-error-color: #f44336;
  --cs-success-color: #4caf50;
  --cs-warning-color: #ff9800;
  --cs-disabled-bg: #f5f5f5;
  --cs-disabled-text: #aaaaaa;
  --cs-transition: all 0.3s ease;
  --cs-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  --cs-radius: 8px;
}

/* Element highlight */
.cs-highlight {
  position: absolute;
  pointer-events: auto;
  box-sizing: border-box;
  border: 2px solid var(--cs-primary-color);
  background-color: var(--cs-primary-light);
  z-index: 1000;
  cursor: pointer;
  transition: all 0.2s ease;
}

.cs-highlight:hover {
  border-color: var(--cs-primary-hover);
  background-color: rgba(197, 75, 140, 0.15);
}

/* Element details panel */
.cs-element-details {
  position: absolute;
  width: 300px;
  background-color: var(--cs-bg-color);
  border: 1px solid var(--cs-border-color);
  border-radius: var(--cs-radius);
  box-shadow: var(--cs-shadow);
  z-index: 1001;
  overflow: hidden;
  max-height: 500px;
  overflow-y: auto;
}

/* Position arrow for details panel */
.cs-element-details::before {
  content: '';
  position: absolute;
  width: 12px;
  height: 12px;
  background-color: var(--cs-bg-color);
  border: 1px solid var(--cs-border-color);
  transform: rotate(45deg);
  z-index: 1;
}

.cs-element-details.above::before {
  bottom: -7px;
  left: 20px;
  border-top: none;
  border-left: none;
}

.cs-element-details.below::before {
  top: -7px;
  left: 20px;
  border-bottom: none;
  border-right: none;
}

/* Disabled state */
.cs-element-details.disabled {
  opacity: 0.7;
  pointer-events: none;
}

/* Element header */
.cs-element-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem 1rem;
  background-color: var(--cs-primary-color);
  color: white;
}

.cs-element-name {
  margin: 0;
  font-size: 1rem;
  font-weight: 600;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.cs-element-select-btn {
  padding: 0.25rem 0.75rem;
  background-color: white;
  color: var(--cs-primary-color);
  border: none;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 600;
  cursor: pointer;
  transition: var(--cs-transition);
}

.cs-element-select-btn:hover {
  background-color: rgba(255, 255, 255, 0.9);
}

.cs-element-select-btn:disabled {
  background-color: rgba(255, 255, 255, 0.5);
  color: rgba(197, 75, 140, 0.7);
  cursor: not-allowed;
}

/* Element info section */
.cs-element-info {
  padding: 0.75rem 1rem;
  border-bottom: 1px solid var(--cs-border-color);
}

.cs-element-info-row {
  display: flex;
  margin-bottom: 0.5rem;
}

.cs-element-info-row:last-child {
  margin-bottom: 0;
}

.cs-info-label {
  width: 100px;
  font-weight: 600;
  color: var(--cs-text-color);
}

.cs-info-value {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--cs-text-secondary);
}

/* Element selectors section */
.cs-element-selectors {
  padding: 0.75rem 1rem;
  border-bottom: 1px solid var(--cs-border-color);
}

.cs-selector-item {
  margin-bottom: 0.75rem;
}

.cs-selector-item:last-child {
  margin-bottom: 0;
}

.cs-selector-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 0.25rem;
}

.cs-selector-label {
  font-weight: 600;
  color: var(--cs-text-color);
}

.cs-copy-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  background-color: transparent;
  border: none;
  color: var(--cs-text-secondary);
  cursor: pointer;
  transition: var(--cs-transition);
  border-radius: 4px;
}

.cs-copy-btn:hover {
  background-color: var(--cs-bg-secondary);
  color: var(--cs-primary-color);
}

.cs-selector-value {
  margin: 0;
  padding: 0.5rem;
  background-color: var(--cs-bg-secondary);
  border-radius: 4px;
  font-size: 0.75rem;
  color: var(--cs-text-secondary);
  font-family: monospace;
  overflow-x: auto;
  white-space: pre-wrap;
  word-break: break-all;
}

/* Element location section */
.cs-element-location {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  border-bottom: 1px solid var(--cs-border-color);
}

.cs-location-item {
  display: flex;
  align-items: center;
  margin-right: 0.75rem;
}

.cs-location-label {
  margin-right: 0.25rem;
  font-weight: 600;
  color: var(--cs-text-color);
}

.cs-location-value {
  color: var(--cs-text-secondary);
}

/* Element frame section */
.cs-element-frame {
  padding: 0.75rem 1rem;
}

.cs-frame-label {
  margin-right: 0.5rem;
  font-weight: 600;
  color: var(--cs-text-color);
}

.cs-frame-value {
  color: var(--cs-text-secondary);
}


ConditionalActionConfig.tsx
--------------------------------------
import React, { useState, useEffect } from 'react';
import './ActionConfig.css';
import { RecordingAction } from '../RecorderComponent';

interface ConditionalActionConfigProps {
  /** Initial action configuration */
  initialAction?: RecordingAction;
  /** Callback when action is saved */
  onSave: (action: RecordingAction) => void;
  /** Callback when configuration is canceled */
  onCancel: () => void;
  /** Framework in use */
  framework: 'selenium' | 'playwright';
  /** Programming language in use */
  language: 'java' | 'typescript';
  /** Test type in use */
  testType: 'testng' | 'bdd';
  /** Whether the component is disabled */
  disabled?: boolean;
}

/**
 * Conditional Action Configuration Component
 * 
 * Allows users to configure conditional actions like:
 * - If/Else conditions
 * - Switch/Case statements
 * - Try/Catch blocks
 */
const ConditionalActionConfig: React.FC<ConditionalActionConfigProps> = ({
  initialAction,
  onSave,
  onCancel,
  framework,
  language,
  testType,
  disabled = false
}) => {
  // Set default conditional type if not provided
  const defaultConditionType = initialAction?.condition?.startsWith('try') ? 'try' : 
                              initialAction?.condition?.includes('switch') ? 'switch' : 'if';
                              
  // State for condition type
  const [conditionType, setConditionType] = useState<'if' | 'switch' | 'try'>(
    initialAction?.condition ? 
      (defaultConditionType as 'if' | 'switch' | 'try') : 
      'if'
  );
  
  // State for condition expression
  const [conditionExpression, setConditionExpression] = useState<string>(
    initialAction?.condition && initialAction.condition !== 'try' ? 
      (conditionType === 'if' ? 
        initialAction.condition.replace(/^\s*if\s*\((.*)\)\s*$/, '$1') : 
        initialAction.condition.replace(/^\s*switch\s*\((.*)\)\s*$/, '$1')
      ) : 
      ''
  );
  
  // State for has else block
  const [hasElseBlock, setHasElseBlock] = useState<boolean>(
    initialAction?.subActions ? 
      initialAction.subActions.some(action => action.description?.toLowerCase().includes('else')) : 
      false
  );
  
  // State for has finally block
  const [hasFinallyBlock, setHasFinallyBlock] = useState<boolean>(
    initialAction?.subActions ? 
      initialAction.subActions.some(action => action.description?.toLowerCase().includes('finally')) : 
      false
  );
  
  // State for number of case blocks
  const [caseCount, setCaseCount] = useState<number>(
    initialAction?.subActions ? 
      initialAction.subActions.filter(action => action.description?.toLowerCase().includes('case')).length || 1 : 
      1
  );
  
  // State for case values
  const [caseValues, setCaseValues] = useState<string[]>(
    initialAction?.subActions ? 
      initialAction.subActions
        .filter(action => action.description?.toLowerCase().includes('case'))
        .map(action => action.description.replace(/^\s*case\s*:\s*(.*)$/, '$1') || '') : 
      ['']
  );
  
  // State for has default case
  const [hasDefaultCase, setHasDefaultCase] = useState<boolean>(
    initialAction?.subActions ? 
      initialAction.subActions.some(action => action.description?.toLowerCase().includes('default')) : 
      false
  );
  
  // State for action description
  const [actionDescription, setActionDescription] = useState<string>(
    initialAction?.description || 
    (conditionType === 'if' ? 'If Condition' : 
     conditionType === 'switch' ? 'Switch Statement' : 
     'Try-Catch Block')
  );
  
  // Handle condition type change
  const handleConditionTypeChange = (type: 'if' | 'switch' | 'try') => {
    setConditionType(type);
    
    // Set default description based on type
    if (!actionDescription || 
        actionDescription === 'If Condition' || 
        actionDescription === 'Switch Statement' || 
        actionDescription === 'Try-Catch Block') {
      setActionDescription(
        type === 'if' ? 'If Condition' : 
        type === 'switch' ? 'Switch Statement' : 
        'Try-Catch Block'
      );
    }
  };
  
  // Add case value
  const addCaseValue = () => {
    setCaseValues([...caseValues, '']);
    setCaseCount(caseCount + 1);
  };
  
  // Remove case value
  const removeCaseValue = (index: number) => {
    const newCaseValues = [...caseValues];
    newCaseValues.splice(index, 1);
    setCaseValues(newCaseValues);
    setCaseCount(caseCount - 1);
  };
  
  // Update case value
  const updateCaseValue = (index: number, value: string) => {
    const newCaseValues = [...caseValues];
    newCaseValues[index] = value;
    setCaseValues(newCaseValues);
  };
  
  // Generate condition string
  const generateConditionString = (): string => {
    if (conditionType === 'try') {
      return 'try';
    } else if (conditionType === 'if') {
      return conditionExpression ? conditionExpression : 'true';
    } else {
      return conditionExpression ? conditionExpression : 'value';
    }
  };
  
  // Handle save
  const handleSave = () => {
    // Generate unique ID if not provided
    const id = initialAction?.id || `action_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    
    // Create action
    const action: RecordingAction = {
      id,
      type: 'conditional',
      condition: generateConditionString(),
      subActions: [], // These would be added by the RecorderComponent
      timestamp: initialAction?.timestamp || Date.now(),
      description: actionDescription,
      // Add framework-specific properties
      ...(initialAction?.element && { element: initialAction.element })
    };
    
    onSave(action);
  };
  
  // Get help text based on framework and language
  const getHelpText = (): string => {
    if (conditionType === 'if') {
      if (framework === 'selenium') {
        if (language === 'java') {
          return 'Example: element.isDisplayed() || driver.getTitle().contains("Home")';
        } else {
          return 'Example: await element.isDisplayed() || (await driver.getTitle()).includes("Home")';
        }
      } else {
        if (language === 'java') {
          return 'Example: page.isVisible("selector") || page.title().contains("Home")';
        } else {
          return 'Example: await page.isVisible("selector") || (await page.title()).includes("Home")';
        }
      }
    } else if (conditionType === 'switch') {
      if (language === 'java') {
        return 'Example: element.getText() or status';
      } else {
        return 'Example: await element.getText() or status';
      }
    } else {
      return 'A try-catch block will capture and handle any exceptions during execution.';
    }
  };
  
  // Render if/else configuration
  const renderIfConfig = () => {
    return (
      <div className="cs-action-config-section">
        <div className="cs-form-group">
          <label htmlFor="condition-expression">Condition Expression</label>
          <input
            type="text"
            id="condition-expression"
            className="cs-input"
            value={conditionExpression}
            onChange={(e) => setConditionExpression(e.target.value)}
            placeholder="Enter condition expression"
            disabled={disabled}
          />
          <small className="cs-input-help">{getHelpText()}</small>
        </div>
        
        <div className="cs-form-group cs-checkbox-group">
          <input
            type="checkbox"
            id="has-else"
            checked={hasElseBlock}
            onChange={(e) => setHasElseBlock(e.target.checked)}
            disabled={disabled}
          />
          <label htmlFor="has-else">Include Else Block</label>
        </div>
      </div>
    );
  };
  
  // Render switch/case configuration
  const renderSwitchConfig = () => {
    return (
      <div className="cs-action-config-section">
        <div className="cs-form-group">
          <label htmlFor="switch-expression">Switch Expression</label>
          <input
            type="text"
            id="switch-expression"
            className="cs-input"
            value={conditionExpression}
            onChange={(e) => setConditionExpression(e.target.value)}
            placeholder="Enter switch expression"
            disabled={disabled}
          />
          <small className="cs-input-help">{getHelpText()}</small>
        </div>
        
        <div className="cs-form-group">
          <label>Case Values</label>
          
          {caseValues.map((caseValue, index) => (
            <div key={`case-${index}`} className="cs-case-row">
              <input
                type="text"
                className="cs-input"
                value={caseValue}
                onChange={(e) => updateCaseValue(index, e.target.value)}
                placeholder={`Case ${index + 1} value`}
                disabled={disabled}
              />
              
              {caseCount > 1 && (
                <button
                  type="button"
                  className="cs-remove-case-btn"
                  onClick={() => removeCaseValue(index)}
                  disabled={disabled}
                >
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 6L6 18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                    <path d="M6 6L18 18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  </svg>
                </button>
              )}
            </div>
          ))}
          
          <button
            type="button"
            className="cs-add-case-btn"
            onClick={addCaseValue}
            disabled={disabled}
          >
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 5V19" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
              <path d="M5 12H19" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            </svg>
            Add Case
          </button>
        </div>
        
        <div className="cs-form-group cs-checkbox-group">
          <input
            type="checkbox"
            id="has-default"
            checked={hasDefaultCase}
            onChange={(e) => setHasDefaultCase(e.target.checked)}
            disabled={disabled}
          />
          <label htmlFor="has-default">Include Default Case</label>
        </div>
      </div>
    );
  };
  
  // Render try/catch configuration
  const renderTryConfig = () => {
    return (
      <div className="cs-action-config-section">
        <p className="cs-try-catch-info">
          The try block will wrap the steps added inside it, and any exceptions will be caught in the catch block.
        </p>
        
        <div className="cs-form-group cs-checkbox-group">
          <input
            type="checkbox"
            id="has-finally"
            checked={hasFinallyBlock}
            onChange={(e) => setHasFinallyBlock(e.target.checked)}
            disabled={disabled}
          />
          <label htmlFor="has-finally">Include Finally Block</label>
        </div>
      </div>
    );
  };
  
  return (
    <div className={`cs-action-config ${disabled ? 'disabled' : ''}`}>
      <div className="cs-action-config-header">
        <h2 className="cs-action-config-title">Configure Conditional Action</h2>
      </div>
      
      <div className="cs-action-config-content">
        <div className="cs-form-group">
          <label htmlFor="action-description">Action Description</label>
          <input
            type="text"
            id="action-description"
            className="cs-input"
            value={actionDescription}
            onChange={(e) => setActionDescription(e.target.value)}
            placeholder="Enter action description"
            disabled={disabled}
          />
        </div>
        
        <div className="cs-form-group">
          <label>Condition Type</label>
          <div className="cs-conditional-types">
            <button
              type="button"
              className={`cs-conditional-type-btn ${conditionType === 'if' ? 'active' : ''}`}
              onClick={() => handleConditionTypeChange('if')}
              disabled={disabled}
            >
              If/Else
            </button>
            <button
              type="button"
              className={`cs-conditional-type-btn ${conditionType === 'switch' ? 'active' : ''}`}
              onClick={() => handleConditionTypeChange('switch')}
              disabled={disabled}
            >
              Switch/Case
            </button>
            <button
              type="button"
              className={`cs-conditional-type-btn ${conditionType === 'try' ? 'active' : ''}`}
              onClick={() => handleConditionTypeChange('try')}
              disabled={disabled}
            >
              Try/Catch
            </button>
          </div>
        </div>
        
        {conditionType === 'if' && renderIfConfig()}
        {conditionType === 'switch' && renderSwitchConfig()}
        {conditionType === 'try' && renderTryConfig()}
        
        <div className="cs-action-config-footer">
          <button
            type="button"
            className="cs-action-cancel-btn"
            onClick={onCancel}
            disabled={disabled}
          >
            Cancel
          </button>
          
          <button
            type="button"
            className="cs-action-save-btn"
            onClick={handleSave}
            disabled={disabled}
          >
            Save
          </button>
        </div>
      </div>
    </div>
  );
};

export default ConditionalActionConfig;


ActionConfig.css
------------------------------

:root {
  --cs-primary-color: #C54B8C; /* Primary brand color */
  --cs-primary-hover: #aa3d76;
  --cs-primary-light: rgba(197, 75, 140, 0.1);
  --cs-primary-active: #8f345f;
  --cs-text-color: #333333;
  --cs-text-secondary: #666666;
  --cs-border-color: #e0e0e0;
  --cs-bg-color: #ffffff;
  --cs-bg-secondary: #f8f9fa;
  --cs-error-color: #f44336;
  --cs-success-color: #4caf50;
  --cs-warning-color: #ff9800;
  --cs-disabled-bg: #f5f5f5;
  --cs-disabled-text: #aaaaaa;
  --cs-transition: all 0.3s ease;
  --cs-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  --cs-radius: 8px;
}

/* Main container */
.cs-action-config {
  display: flex;
  flex-direction: column;
  width: 100%;
  max-width: 600px;
  background-color: var(--cs-bg-color);
  border-radius: var(--cs-radius);
  box-shadow: var(--cs-shadow);
  overflow: hidden;
}

/* Disabled state */
.cs-action-config.disabled {
  opacity: 0.7;
  pointer-events: none;
}

/* Header */
.cs-action-config-header {
  padding: 1rem 1.5rem;
  background-color: var(--cs-primary-color);
  color: white;
}

.cs-action-config-title {
  margin: 0;
  font-size: 1.25rem;
  font-weight: 600;
}

/* Content */
.cs-action-config-content {
  padding: 1.5rem;
  flex: 1;
  overflow-y: auto;
  max-height: 80vh;
}

/* Form styles */
.cs-form-group {
  margin-bottom: 1.5rem;
}

.cs-form-group:last-child {
  margin-bottom: 0;
}

.cs-form-group label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 500;
  color: var(--cs-text-color);
}

.cs-input {
  width: 100%;
  padding: 0.75rem 1rem;
  font-size: 0.95rem;
  line-height: 1.5;
  color: var(--cs-text-color);
  background-color: var(--cs-bg-color);
  border: 1px solid var(--cs-border-color);
  border-radius: 4px;
  transition: var(--cs-transition);
}

.cs-input:focus {
  outline: none;
  border-color: var(--cs-primary-color);
  box-shadow: 0 0 0 2px var(--cs-primary-light);
}

.cs-input:disabled {
  background-color: var(--cs-disabled-bg);
  cursor: not-allowed;
}

.cs-input-help {
  display: block;
  margin-top: 0.25rem;
  font-size: 0.85rem;
  color: var(--cs-text-secondary);
}

.cs-textarea {
  width: 100%;
  padding: 0.75rem 1rem;
  font-size: 0.95rem;
  line-height: 1.5;
  color: var(--cs-text-color);
  background-color: var(--cs-bg-color);
  border: 1px solid var(--cs-border-color);
  border-radius: 4px;
  transition: var(--cs-transition);
  resize: vertical;
  min-height: 100px;
}

.cs-textarea:focus {
  outline: none;
  border-color: var(--cs-primary-color);
  box-shadow: 0 0 0 2px var(--cs-primary-light);
}

.cs-textarea:disabled {
  background-color: var(--cs-disabled-bg);
  cursor: not-allowed;
}

.cs-select {
  width: 100%;
  padding: 0.75rem 1rem;
  font-size: 0.95rem;
  line-height: 1.5;
  color: var(--cs-text-color);
  background-color: var(--cs-bg-color);
  border: 1px solid var(--cs-border-color);
  border-radius: 4px;
  transition: var(--cs-transition);
  appearance: none;
  background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJmZWF0aGVyIGZlYXRoZXItY2hldnJvbi1kb3duIj48cG9seWxpbmUgcG9pbnRzPSI2IDkgMTIgMTUgMTggOSI+PC9wb2x5bGluZT48L3N2Zz4=");
  background-repeat: no-repeat;
  background-position: right 1rem center;
  background-size: 16px;
  padding-right: 2.5rem;
}

.cs-select:focus {
  outline: none;
  border-color: var(--cs-primary-color);
  box-shadow: 0 0 0 2px var(--cs-primary-light);
}

.cs-select:disabled {
  background-color: var(--cs-disabled-bg);
  cursor: not-allowed;
}

/* Checkbox styles */
.cs-checkbox-group {
  display: flex;
  align-items: center;
}

.cs-checkbox-group input[type="checkbox"] {
  margin-right: 0.5rem;
  width: 18px;
  height: 18px;
  cursor: pointer;
}

.cs-checkbox-group label {
  margin-bottom: 0;
  cursor: pointer;
}

/* Action config section */
.cs-action-config-section {
  margin-top: 1.5rem;
  padding: 1.5rem;
  background-color: var(--cs-bg-secondary);
  border-radius: var(--cs-radius);
  border: 1px solid var(--cs-border-color);
}

/* Conditional type buttons */
.cs-conditional-types {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
}

.cs-conditional-type-btn {
  flex: 1;
  min-width: 100px;
  padding: 0.75rem 1rem;
  background-color: var(--cs-bg-secondary);
  border: 1px solid var(--cs-border-color);
  border-radius: 4px;
  color: var(--cs-text-color);
  font-weight: 500;
  cursor: pointer;
  transition: var(--cs-transition);
}

.cs-conditional-type-btn:hover {
  border-color: var(--cs-primary-color);
  background-color: var(--cs-primary-light);
}

.cs-conditional-type-btn.active {
  background-color: var(--cs-primary-color);
  border-color: var(--cs-primary-color);
  color: white;
}

.cs-conditional-type-btn:disabled {
  background-color: var(--cs-disabled-bg);
  border-color: var(--cs-border-color);
  color: var(--cs-disabled-text);
  cursor: not-allowed;
}

/* Case row */
.cs-case-row {
  display: flex;
  align-items: center;
  margin-bottom: 0.75rem;
}

.cs-case-row .cs-input {
  flex: 1;
}

.cs-remove-case-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  margin-left: 0.5rem;
  background-color: transparent;
  border: none;
  color: var(--cs-text-secondary);
  cursor: pointer;
  transition: var(--cs-transition);
  border-radius: 4px;
}

.cs-remove-case-btn:hover {
  background-color: rgba(244, 67, 54, 0.1);
  color: var(--cs-error-color);
}

.cs-add-case-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  padding: 0.5rem;
  margin-top: 0.5rem;
  background-color: transparent;
  border: 1px dashed var(--cs-border-color);
  color: var(--cs-primary-color);
  cursor: pointer;
  transition: var(--cs-transition);
  border-radius: 4px;
  font-weight: 500;
}

.cs-add-case-btn svg {
  margin-right: 0.5rem;
}

.cs-add-case-btn:hover {
  background-color: var(--cs-primary-light);
  border-color: var(--cs-primary-color);
}

/* Try/catch info text */
.cs-try-catch-info {
  margin: 0 0 1.5rem 0;
  padding: 0.75rem 1rem;
  background-color: var(--cs-primary-light);
  border-left: 4px solid var(--cs-primary-color);
  border-radius: 0 4px 4px 0;
  color: var(--cs-text-color);
  font-size: 0.95rem;
  line-height: 1.5;
}

/* Footer */
.cs-action-config-footer {
  display: flex;
  justify-content: flex-end;
  margin-top: 2rem;
  padding-top: 1.5rem;
  border-top: 1px solid var(--cs-border-color);
}

.cs-action-cancel-btn {
  padding: 0.6rem 1.5rem;
  background-color: var(--cs-bg-secondary);
  border: 1px solid var(--cs-border-color);
  border-radius: 4px;
  color: var(--cs-text-color);
  font-weight: 500;
  cursor: pointer;
  transition: var(--cs-transition);
  margin-right: 1rem;
}

.cs-action-cancel-btn:hover {
  background-color: var(--cs-border-color);
}

.cs-action-save-btn {
  padding: 0.6rem 1.5rem;
  background-color: var(--cs-primary-color);
  border: 1px solid var(--cs-primary-color);
  border-radius: 4px;
  color: white;
  font-weight: 500;
  cursor: pointer;
  transition: var(--cs-transition);
}

.cs-action-save-btn:hover {
  background-color: var(--cs-primary-hover);
  border-color: var(--cs-primary-hover);
}

/* Loop styles */
.cs-loop-variables {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
}

.cs-loop-variables .cs-form-group {
  flex: 1;
  min-width: 140px;
}

.cs-data-panel {
  margin-top: 1.5rem;
  padding: 1.5rem;
  background-color: var(--cs-bg-secondary);
  border-radius: var(--cs-radius);
  border: 1px solid var(--cs-border-color);
}

.cs-data-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1rem;
}

.cs-data-panel-title {
  margin: 0;
  font-size: 1rem;
  font-weight: 600;
  color: var(--cs-text-color);
}

/* Variables styles */
.cs-variable-row {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 0.75rem;
}

.cs-variable-row .cs-input {
  flex: 1;
}

.cs-variable-name-input {
  flex: 0.4 !important;
}

.cs-variable-value-input {
  flex: 0.6 !important;
}

.cs-remove-variable-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background-color: transparent;
  border: none;
  color: var(--cs-text-secondary);
  cursor: pointer;
  transition: var(--cs-transition);
  border-radius: 4px;
}

.cs-remove-variable-btn:hover {
  background-color: rgba(244, 67, 54, 0.1);
  color: var(--cs-error-color);
}

.cs-add-variable-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  padding: 0.5rem;
  margin-top: 0.5rem;
  background-color: transparent;
  border: 1px dashed var(--cs-border-color);
  color: var(--cs-primary-color);
  cursor: pointer;
  transition: var(--cs-transition);
  border-radius: 4px;
  font-weight: 500;
}

.cs-add-variable-btn svg {
  margin-right: 0.5rem;
}

.cs-add-variable-btn:hover {
  background-color: var(--cs-primary-light);
  border-color: var(--cs-primary-color);
}

/* Element selector panel */
.cs-element-selector {
  margin-top: 1.5rem;
  padding: 1.5rem;
  background-color: var(--cs-bg-secondary);
  border-radius: var(--cs-radius);
  border: 1px solid var(--cs-border-color);
}

.cs-element-selector-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1rem;
}

.cs-element-selector-title {
  margin: 0;
  font-size: 1rem;
  font-weight: 600;
  color: var(--cs-text-color);
}

.cs-element-selector-actions {
  display: flex;
  gap: 0.5rem;
}

.cs-element-info {
  margin-top: 1rem;
  padding: 1rem;
  background-color: var(--cs-bg-color);
  border: 1px solid var(--cs-border-color);
  border-radius: 4px;
}

.cs-element-info-row {
  display: flex;
  margin-bottom: 0.5rem;
}

.cs-element-info-row:last-child {
  margin-bottom: 0;
}

.cs-element-info-label {
  width: 100px;
  font-weight: 600;
  color: var(--cs-text-color);
}

.cs-element-info-value {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--cs-text-secondary);
}

.cs-element-picker-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0.5rem 1rem;
  background-color: var(--cs-primary-color);
  border: none;
  border-radius: 4px;
  color: white;
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: var(--cs-transition);
}

.cs-element-picker-btn svg {
  margin-right: 0.5rem;
}

.cs-element-picker-btn:hover {
  background-color: var(--cs-primary-hover);
}

.cs-element-picker-btn:disabled {
  background-color: var(--cs-disabled-bg);
  color: var(--cs-disabled-text);
  cursor: not-allowed;
}

/* Wait config styles */
.cs-wait-options {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  margin-bottom: 1.5rem;
}

.cs-wait-option {
  flex: 1;
  min-width: 140px;
  padding: 0.75rem 1rem;
  background-color: var(--cs-bg-secondary);
  border: 1px solid var(--cs-border-color);
  border-radius: 4px;
  color: var(--cs-text-color);
  text-align: center;
  font-weight: 500;
  cursor: pointer;
  transition: var(--cs-transition);
}

.cs-wait-option:hover {
  border-color: var(--cs-primary-color);
  background-color: var(--cs-primary-light);
}

.cs-wait-option.active {
  background-color: var(--cs-primary-color);
  border-color: var(--cs-primary-color);
  color: white;
}

.cs-wait-option:disabled {
  background-color: var(--cs-disabled-bg);
  border-color: var(--cs-border-color);
  color: var(--cs-disabled-text);
  cursor: not-allowed;
}

.cs-time-input-group {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.cs-time-input-group .cs-input {
  flex: 1;
}

.cs-time-input-group .cs-time-unit {
  width: 80px;
}

/* Assertion styles */
.cs-assertion-options {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  margin-bottom: 1.5rem;
}

.cs-assertion-option {
  flex: 1;
  min-width: 120px;
  padding: 0.75rem 0.5rem;
  background-color: var(--cs-bg-secondary);
  border: 1px solid var(--cs-border-color);
  border-radius: 4px;
  color: var(--cs-text-color);
  text-align: center;
  font-weight: 500;
  cursor: pointer;
  transition: var(--cs-transition);
  font-size: 0.9rem;
}

.cs-assertion-option:hover {
  border-color: var(--cs-primary-color);
  background-color: var(--cs-primary-light);
}

.cs-assertion-option.active {
  background-color: var(--cs-primary-color);
  border-color: var(--cs-primary-color);
  color: white;
}

.cs-assertion-option:disabled {
  background-color: var(--cs-disabled-bg);
  border-color: var(--cs-border-color);
  color: var(--cs-disabled-text);
  cursor: not-allowed;
}

/* Documentation styles */
.cs-doc-options {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  margin-bottom: 1.5rem;
}

.cs-doc-option {
  flex: 1;
  min-width: 120px;
  padding: 0.75rem 0.5rem;
  background-color: var(--cs-bg-secondary);
  border: 1px solid var(--cs-border-color);
  border-radius: 4px;
  color: var(--cs-text-color);
  text-align: center;
  font-weight: 500;
  cursor: pointer;
  transition: var(--cs-transition);
  font-size: 0.9rem;
}

.cs-doc-option:hover {
  border-color: var(--cs-primary-color);
  background-color: var(--cs-primary-light);
}

.cs-doc-option.active {
  background-color: var(--cs-primary-color);
  border-color: var(--cs-primary-color);
  color: white;
}

.cs-doc-option:disabled {
  background-color: var(--cs-disabled-bg);
  border-color: var(--cs-border-color);
  color: var(--cs-disabled-text);
  cursor: not-allowed;
}

/* Code editor */
.cs-code-editor {
  font-family: "Courier New", monospace;
  width: 100%;
  padding: 0.75rem 1rem;
  font-size: 0.9rem;
  line-height: 1.5;
  color: var(--cs-text-color);
  background-color: var(--cs-bg-color);
  border: 1px solid var(--cs-border-color);
  border-radius: 4px;
  transition: var(--cs-transition);
  resize: vertical;
  min-height: 200px;
  white-space: pre;
  overflow-x: auto;
}

.cs-code-editor:focus {
  outline: none;
  border-color: var(--cs-primary-color);
  box-shadow: 0 0 0 2px var(--cs-primary-light);
}

.cs-code-editor:disabled {
  background-color: var(--cs-disabled-bg);
  cursor: not-allowed;
}

/* Responsive styles */
@media (max-width: 576px) {
  .cs-conditional-types,
  .cs-wait-options,
  .cs-assertion-options,
  .cs-doc-options {
    flex-direction: column;
  }
  
  .cs-loop-variables {
    flex-direction: column;
  }
  
  .cs-variable-row {
    flex-direction: column;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
  }
  
  .cs-variable-name-input,
  .cs-variable-value-input {
    flex: 1 !important;
  }
  
  .cs-remove-variable-btn {
    align-self: center;
  }
}


LoopActionConfig.tsx
--------------------------------------------------------

import React, { useState, useEffect } from 'react';
import './ActionConfig.css';
import { RecordingAction } from '../RecorderComponent';

interface LoopActionConfigProps {
  /** Initial action configuration */
  initialAction?: RecordingAction;
  /** Callback when action is saved */
  onSave: (action: RecordingAction) => void;
  /** Callback when configuration is canceled */
  onCancel: () => void;
  /** Framework in use */
  framework: 'selenium' | 'playwright';
  /** Programming language in use */
  language: 'java' | 'typescript';
  /** Test type in use */
  testType: 'testng' | 'bdd';
  /** Whether the component is disabled */
  disabled?: boolean;
}

/**
 * Loop Action Configuration Component
 * 
 * Allows users to configure loop actions like:
 * - For loops
 * - While loops
 * - ForEach loops
 */
const LoopActionConfig: React.FC<LoopActionConfigProps> = ({
  initialAction,
  onSave,
  onCancel,
  framework,
  language,
  testType,
  disabled = false
}) => {
  // Set default loop type if not provided
  const defaultLoopType = initialAction?.loopType || 'for';
  
  // State for loop type
  const [loopType, setLoopType] = useState<'for' | 'while' | 'forEach'>(
    defaultLoopType as 'for' | 'while' | 'forEach'
  );
  
  // State for loop variable
  const [loopVariable, setLoopVariable] = useState<string>(
    initialAction?.loopVariable || (loopType === 'for' ? 'i' : loopType === 'forEach' ? 'item' : '')
  );
  
  // State for loop start (for for loops)
  const [loopStart, setLoopStart] = useState<number>(
    initialAction?.loopStart !== undefined ? initialAction.loopStart : 0
  );
  
  // State for loop end (for for loops)
  const [loopEnd, setLoopEnd] = useState<number>(
    initialAction?.loopEnd !== undefined ? initialAction.loopEnd : 5
  );
  
  // State for loop step (for for loops)
  const [loopStep, setLoopStep] = useState<number>(
    initialAction?.loopStep !== undefined ? initialAction.loopStep : 1
  );
  
  // State for loop condition (for while loops)
  const [loopCondition, setLoopCondition] = useState<string>(
    initialAction?.loopCondition && loopType === 'while' ? 
      initialAction.loopCondition : 
      'condition === true'
  );
  
  // State for loop items (for forEach loops)
  const [loopItems, setLoopItems] = useState<string>(
    initialAction?.loopItems || 'elements'
  );
  
  // State for action description
  const [actionDescription, setActionDescription] = useState<string>(
    initialAction?.description || 
    (loopType === 'for' ? 'For Loop' : 
     loopType === 'while' ? 'While Loop' : 
     'ForEach Loop')
  );
  
  // Handle loop type change
  const handleLoopTypeChange = (type: 'for' | 'while' | 'forEach') => {
    setLoopType(type);
    
    // Set default variable name based on type
    if (type === 'for' && loopVariable === 'item') {
      setLoopVariable('i');
    } else if (type === 'forEach' && loopVariable === 'i') {
      setLoopVariable('item');
    }
    
    // Set default description based on type
    if (!actionDescription || 
        actionDescription === 'For Loop' || 
        actionDescription === 'While Loop' || 
        actionDescription === 'ForEach Loop') {
      setActionDescription(
        type === 'for' ? 'For Loop' : 
        type === 'while' ? 'While Loop' : 
        'ForEach Loop'
      );
    }
  };
  
  // Handle save
  const handleSave = () => {
    // Generate unique ID if not provided
    const id = initialAction?.id || `action_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    
    // Create action
    const action: RecordingAction = {
      id,
      type: 'loop',
      loopType,
      timestamp: initialAction?.timestamp || Date.now(),
      description: actionDescription,
      // Add loop type specific properties
      ...(loopType === 'for' && {
        loopVariable,
        loopStart,
        loopEnd,
        loopStep,
        loopCondition: `${loopVariable} < ${loopEnd}`
      }),
      ...(loopType === 'while' && {
        loopCondition
      }),
      ...(loopType === 'forEach' && {
        loopVariable,
        loopItems,
        loopCondition: `${loopVariable} in ${loopItems}`
      }),
      // Add framework-specific properties
      ...(initialAction?.element && { element: initialAction.element }),
      subActions: [] // These would be added by the RecorderComponent
    };
    
    onSave(action);
  };
  
  // Get help text based on framework and language
  const getHelpText = (): string => {
    if (loopType === 'for') {
      return 'Define a for loop with start, end, and step values.';
    } else if (loopType === 'while') {
      if (framework === 'selenium') {
        if (language === 'java') {
          return 'Example: element.isDisplayed() || counter < 10';
        } else {
          return 'Example: await element.isDisplayed() || counter < 10';
        }
      } else {
        if (language === 'java') {
          return 'Example: page.isVisible("selector") || counter < 10';
        } else {
          return 'Example: await page.isVisible("selector") || counter < 10';
        }
      }
    } else {
      if (framework === 'selenium') {
        if (language === 'java') {
          return 'Example: elements, representing a list of WebElements';
        } else {
          return 'Example: elements, representing an array of WebElements';
        }
      } else {
        if (language === 'java') {
          return 'Example: elements, representing a list of Playwright Locators';
        } else {
          return 'Example: elements, representing an array of Playwright Locators';
        }
      }
    }
  };
  
  // Render for loop configuration
  const renderForLoopConfig = () => {
    return (
      <div className="cs-action-config-section">
        <div className="cs-form-group">
          <label htmlFor="loop-variable">Loop Variable</label>
          <input
            type="text"
            id="loop-variable"
            className="cs-input"
            value={loopVariable}
            onChange={(e) => setLoopVariable(e.target.value)}
            placeholder="Enter loop variable name"
            disabled={disabled}
          />
        </div>
        
        <div className="cs-loop-variables">
          <div className="cs-form-group">
            <label htmlFor="loop-start">Start Value</label>
            <input
              type="number"
              id="loop-start"
              className="cs-input"
              value={loopStart}
              onChange={(e) => setLoopStart(parseInt(e.target.value, 10))}
              disabled={disabled}
            />
          </div>
          
          <div className="cs-form-group">
            <label htmlFor="loop-end">End Value</label>
            <input
              type="number"
              id="loop-end"
              className="cs-input"
              value={loopEnd}
              onChange={(e) => setLoopEnd(parseInt(e.target.value, 10))}
              disabled={disabled}
            />
          </div>
          
          <div className="cs-form-group">
            <label htmlFor="loop-step">Step Value</label>
            <input
              type="number"
              id="loop-step"
              className="cs-input"
              value={loopStep}
              onChange={(e) => setLoopStep(parseInt(e.target.value, 10))}
              disabled={disabled}
            />
          </div>
        </div>
        
        <div className="cs-form-group">
          <label>Loop Preview</label>
          <pre className="cs-code-preview">
            {language === 'java' ? 
              `for (int ${loopVariable} = ${loopStart}; ${loopVariable} < ${loopEnd}; ${loopVariable} += ${loopStep}) {
  // Actions will be placed here
}` : 
              `for (let ${loopVariable} = ${loopStart}; ${loopVariable} < ${loopEnd}; ${loopVariable} += ${loopStep}) {
  // Actions will be placed here
}`}
          </pre>
        </div>
      </div>
    );
  };
  
  // Render while loop configuration
  const renderWhileLoopConfig = () => {
    return (
      <div className="cs-action-config-section">
        <div className="cs-form-group">
          <label htmlFor="loop-condition">Loop Condition</label>
          <input
            type="text"
            id="loop-condition"
            className="cs-input"
            value={loopCondition}
            onChange={(e) => setLoopCondition(e.target.value)}
            placeholder="Enter loop condition"
            disabled={disabled}
          />
          <small className="cs-input-help">{getHelpText()}</small>
        </div>
        
        <div className="cs-form-group">
          <label>Loop Preview</label>
          <pre className="cs-code-preview">
            {language === 'java' ? 
              `while (${loopCondition}) {
  // Actions will be placed here
}` : 
              `while (${loopCondition}) {
  // Actions will be placed here
}`}
          </pre>
        </div>
      </div>
    );
  };
  
  // Render forEach loop configuration
  const renderForEachLoopConfig = () => {
    return (
      <div className="cs-action-config-section">
        <div className="cs-form-group">
          <label htmlFor="loop-variable">Item Variable</label>
          <input
            type="text"
            id="loop-variable"
            className="cs-input"
            value={loopVariable}
            onChange={(e) => setLoopVariable(e.target.value)}
            placeholder="Enter item variable name"
            disabled={disabled}
          />
        </div>
        
        <div className="cs-form-group">
          <label htmlFor="loop-items">Items Collection</label>
          <input
            type="text"
            id="loop-items"
            className="cs-input"
            value={loopItems}
            onChange={(e) => setLoopItems(e.target.value)}
            placeholder="Enter items collection name"
            disabled={disabled}
          />
          <small className="cs-input-help">{getHelpText()}</small>
        </div>
        
        <div className="cs-form-group">
          <label>Loop Preview</label>
          <pre className="cs-code-preview">
            {language === 'java' ? 
              (framework === 'selenium' ? 
                `for (WebElement ${loopVariable} : ${loopItems}) {
  // Actions will be placed here
}` : 
                `for (Locator ${loopVariable} : ${loopItems}) {
  // Actions will be placed here
}`) : 
              `for (const ${loopVariable} of ${loopItems}) {
  // Actions will be placed here
}`}
          </pre>
        </div>
      </div>
    );
  };
  
  return (
    <div className={`cs-action-config ${disabled ? 'disabled' : ''}`}>
      <div className="cs-action-config-header">
        <h2 className="cs-action-config-title">Configure Loop Action</h2>
      </div>
      
      <div className="cs-action-config-content">
        <div className="cs-form-group">
          <label htmlFor="action-description">Action Description</label>
          <input
            type="text"
            id="action-description"
            className="cs-input"
            value={actionDescription}
            onChange={(e) => setActionDescription(e.target.value)}
            placeholder="Enter action description"
            disabled={disabled}
          />
        </div>
        
        <div className="cs-form-group">
          <label>Loop Type</label>
          <div className="cs-conditional-types">
            <button
              type="button"
              className={`cs-conditional-type-btn ${loopType === 'for' ? 'active' : ''}`}
              onClick={() => handleLoopTypeChange('for')}
              disabled={disabled}
            >
              For Loop
            </button>
            <button
              type="button"
              className={`cs-conditional-type-btn ${loopType === 'while' ? 'active' : ''}`}
              onClick={() => handleLoopTypeChange('while')}
              disabled={disabled}
            >
              While Loop
            </button>
            <button
              type="button"
              className={`cs-conditional-type-btn ${loopType === 'forEach' ? 'active' : ''}`}
              onClick={() => handleLoopTypeChange('forEach')}
              disabled={disabled}
            >
              ForEach Loop
            </button>
          </div>
        </div>
        
        {loopType === 'for' && renderForLoopConfig()}
        {loopType === 'while' && renderWhileLoopConfig()}
        {loopType === 'forEach' && renderForEachLoopConfig()}
        
        <div className="cs-action-config-footer">
          <button
            type="button"
            className="cs-action-cancel-btn"
            onClick={onCancel}
            disabled={disabled}
          >
            Cancel
          </button>
          
          <button
            type="button"
            className="cs-action-save-btn"
            onClick={handleSave}
            disabled={disabled}
          >
            Save
          </button>
        </div>
      </div>
    </div>
  );
};

export default LoopActionConfig;


DataProviderConfig.tsx
------------------------------------------------------------

import React, { useState, useEffect } from 'react';
import './ActionConfig.css';
import { RecordingAction } from '../RecorderComponent';

interface DataProviderConfigProps {
  /** Initial action configuration */
  initialAction?: RecordingAction;
  /** Callback when action is saved */
  onSave: (action: RecordingAction) => void;
  /** Callback when configuration is canceled */
  onCancel: () => void;
  /** Framework in use */
  framework: 'selenium' | 'playwright';
  /** Programming language in use */
  language: 'java' | 'typescript';
  /** Test type in use */
  testType: 'testng' | 'bdd';
  /** Whether the component is disabled */
  disabled?: boolean;
}

/**
 * Data Provider Configuration Component
 * 
 * Allows users to configure data provider actions for data-driven testing:
 * - Excel data source
 * - CSV data source
 * - JSON data source
 * - Database data source
 */
const DataProviderConfig: React.FC<DataProviderConfigProps> = ({
  initialAction,
  onSave,
  onCancel,
  framework,
  language,
  testType,
  disabled = false
}) => {
  // Set default data provider type if not provided
  const defaultDataProviderType = initialAction?.dataProvider?.type || 'excel';
  
  // State for data provider type
  const [dataProviderType, setDataProviderType] = useState<'excel' | 'csv' | 'json' | 'database'>(
    defaultDataProviderType as 'excel' | 'csv' | 'json' | 'database'
  );
  
  // State for file path (for excel, csv, json)
  const [filePath, setFilePath] = useState<string>(
    initialAction?.dataProvider?.path || './data/testdata.' + dataProviderType
  );
  
  // State for sheet name (for excel)
  const [sheetName, setSheetName] = useState<string>(
    initialAction?.dataProvider?.sheet || 'Sheet1'
  );
  
  // State for connection string (for database)
  const [connectionString, setConnectionString] = useState<string>(
    initialAction?.dataProvider?.connectionString || 'jdbc:mysql://localhost:3306/testdb'
  );
  
  // State for query (for database)
  const [query, setQuery] = useState<string>(
    initialAction?.dataProvider?.query || 'SELECT * FROM test_data'
  );
  
  // State for action description
  const [actionDescription, setActionDescription] = useState<string>(
    initialAction?.description || `Data Provider (${dataProviderType.toUpperCase()})`
  );
  
  // Handle data provider type change
  const handleDataProviderTypeChange = (type: 'excel' | 'csv' | 'json' | 'database') => {
    setDataProviderType(type);
    
    // Update file path based on type
    if (type === 'excel' || type === 'csv' || type === 'json') {
      setFilePath(prevPath => {
        // If path was changed by user, keep it, but update extension
        if (prevPath !== './data/testdata.excel' && 
            prevPath !== './data/testdata.csv' && 
            prevPath !== './data/testdata.json') {
          const pathWithoutExt = prevPath.substring(0, prevPath.lastIndexOf('.'));
          return `${pathWithoutExt}.${type}`;
        }
        return `./data/testdata.${type}`;
      });
    }
    
    // Set default description based on type
    if (!actionDescription || 
        actionDescription === 'Data Provider (EXCEL)' || 
        actionDescription === 'Data Provider (CSV)' || 
        actionDescription === 'Data Provider (JSON)' || 
        actionDescription === 'Data Provider (DATABASE)') {
      setActionDescription(`Data Provider (${type.toUpperCase()})`);
    }
  };
  
  // Handle save
  const handleSave = () => {
    // Generate unique ID if not provided
    const id = initialAction?.id || `action_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    
    // Create action
    const action: RecordingAction = {
      id,
      type: 'dataDriven',
      timestamp: initialAction?.timestamp || Date.now(),
      description: actionDescription,
      dataProvider: {
        type: dataProviderType,
        ...(dataProviderType === 'excel' && {
          path: filePath,
          sheet: sheetName
        }),
        ...(dataProviderType === 'csv' && {
          path: filePath
        }),
        ...(dataProviderType === 'json' && {
          path: filePath
        }),
        ...(dataProviderType === 'database' && {
          connectionString,
          query
        })
      },
      // Add framework-specific properties
      ...(initialAction?.element && { element: initialAction.element }),
      subActions: [] // These would be added by the RecorderComponent
    };
    
    onSave(action);
  };
  
  // Get help text based on framework and language
  const getHelpText = (): string => {
    if (dataProviderType === 'excel') {
      return 'Specify the path to an Excel file (.xlsx, .xls) and the sheet name to use for test data.';
    } else if (dataProviderType === 'csv') {
      return 'Specify the path to a CSV file for test data. The first row will be used as header.';
    } else if (dataProviderType === 'json') {
      return 'Specify the path to a JSON file containing an array of test data objects.';
    } else {
      if (language === 'java') {
        return 'Specify a JDBC connection string and SQL query to retrieve test data from a database.';
      } else {
        return 'Specify a database connection string and SQL query to retrieve test data from a database.';
      }
    }
  };
  
  // Render excel data provider configuration
  const renderExcelConfig = () => {
    return (
      <div className="cs-action-config-section">
        <div className="cs-form-group">
          <label htmlFor="file-path">Excel File Path</label>
          <input
            type="text"
            id="file-path"
            className="cs-input"
            value={filePath}
            onChange={(e) => setFilePath(e.target.value)}
            placeholder="Enter path to Excel file"
            disabled={disabled}
          />
          <small className="cs-input-help">Example: ./data/testdata.xlsx</small>
        </div>
        
        <div className="cs-form-group">
          <label htmlFor="sheet-name">Sheet Name</label>
          <input
            type="text"
            id="sheet-name"
            className="cs-input"
            value={sheetName}
            onChange={(e) => setSheetName(e.target.value)}
            placeholder="Enter sheet name"
            disabled={disabled}
          />
          <small className="cs-input-help">Example: Sheet1</small>
        </div>
        
        <div className="cs-form-group">
          <label>Code Preview</label>
          <pre className="cs-code-preview">
            {language === 'java' ? 
              `@CSTestForgeDataProvider(
  type = DataSourceType.EXCEL,
  path = "${filePath}",
  sheet = "${sheetName}"
)
public void testWithExcelData(Map<String, Object> testData) {
  // Test steps will be executed for each row in the Excel sheet
}` : 
              `@CSDataProvider({
  type: 'excel',
  path: '${filePath}',
  sheet: '${sheetName}'
})
public async testWithExcelData(testData: Record<string, any>) {
  // Test steps will be executed for each row in the Excel sheet
}`}
          </pre>
        </div>
      </div>
    );
  };
  
  // Render CSV data provider configuration
  const renderCsvConfig = () => {
    return (
      <div className="cs-action-config-section">
        <div className="cs-form-group">
          <label htmlFor="file-path">CSV File Path</label>
          <input
            type="text"
            id="file-path"
            className="cs-input"
            value={filePath}
            onChange={(e) => setFilePath(e.target.value)}
            placeholder="Enter path to CSV file"
            disabled={disabled}
          />
          <small className="cs-input-help">Example: ./data/testdata.csv</small>
        </div>
        
        <div className="cs-form-group">
          <label>Code Preview</label>
          <pre className="cs-code-preview">
            {language === 'java' ? 
              `@CSTestForgeDataProvider(
  type = DataSourceType.CSV,
  path = "${filePath}"
)
public void testWithCsvData(Map<String, Object> testData) {
  // Test steps will be executed for each row in the CSV file
}` : 
              `@CSDataProvider({
  type: 'csv',
  path: '${filePath}'
})
public async testWithCsvData(testData: Record<string, any>) {
  // Test steps will be executed for each row in the CSV file
}`}
          </pre>
        </div>
      </div>
    );
  };
  
  // Render JSON data provider configuration
  const renderJsonConfig = () => {
    return (
      <div className="cs-action-config-section">
        <div className="cs-form-group">
          <label htmlFor="file-path">JSON File Path</label>
          <input
            type="text"
            id="file-path"
            className="cs-input"
            value={filePath}
            onChange={(e) => setFilePath(e.target.value)}
            placeholder="Enter path to JSON file"
            disabled={disabled}
          />
          <small className="cs-input-help">Example: ./data/testdata.json</small>
        </div>
        
        <div className="cs-form-group">
          <label>Code Preview</label>
          <pre className="cs-code-preview">
            {language === 'java' ? 
              `@CSTestForgeDataProvider(
  type = DataSourceType.JSON,
  path = "${filePath}"
)
public void testWithJsonData(Map<String, Object> testData) {
  // Test steps will be executed for each object in the JSON array
}` : 
              `@CSDataProvider({
  type: 'json',
  path: '${filePath}'
})
public async testWithJsonData(testData: Record<string, any>) {
  // Test steps will be executed for each object in the JSON array
}`}
          </pre>
        </div>
      </div>
    );
  };
  
  // Render database data provider configuration
  const renderDatabaseConfig = () => {
    return (
      <div className="cs-action-config-section">
        <div className="cs-form-group">
          <label htmlFor="connection-string">Connection String</label>
          <input
            type="text"
            id="connection-string"
            className="cs-input"
            value={connectionString}
            onChange={(e) => setConnectionString(e.target.value)}
            placeholder="Enter database connection string"
            disabled={disabled}
          />
          <small className="cs-input-help">
            {language === 'java' ? 
              'Example: jdbc:mysql://localhost:3306/testdb' : 
              'Example: mysql://user:password@localhost:3306/testdb'
            }
          </small>
        </div>
        
        <div className="cs-form-group">
          <label htmlFor="query">SQL Query</label>
          <textarea
            id="query"
            className="cs-textarea"
            value={query}
            onChange={(e) => setQuery(e.target.value)}
            placeholder="Enter SQL query"
            disabled={disabled}
          />
          <small className="cs-input-help">Example: SELECT * FROM test_data</small>
        </div>
        
        <div className="cs-form-group">
          <label>Code Preview</label>
          <pre className="cs-code-preview">
            {language === 'java' ? 
              `@CSTestForgeDataProvider(
  type = DataSourceType.DATABASE,
  connectionString = "${connectionString}",
  query = "${query}"
)
public void testWithDatabaseData(Map<String, Object> testData) {
  // Test steps will be executed for each row in the query result
}` : 
              `@CSDataProvider({
  type: 'database',
  connectionString: '${connectionString}',
  query: '${query}'
})
public async testWithDatabaseData(testData: Record<string, any>) {
  // Test steps will be executed for each row in the query result
}`}
          </pre>
        </div>
      </div>
    );
  };
  
  return (
    <div className={`cs-action-config ${disabled ? 'disabled' : ''}`}>
      <div className="cs-action-config-header">
        <h2 className="cs-action-config-title">Configure Data Provider</h2>
      </div>
      
      <div className="cs-action-config-content">
        <div className="cs-form-group">
          <label htmlFor="action-description">Action Description</label>
          <input
            type="text"
            id="action-description"
            className="cs-input"
            value={actionDescription}
            onChange={(e) => setActionDescription(e.target.value)}
            placeholder="Enter action description"
            disabled={disabled}
          />
        </div>
        
        <div className="cs-form-group">
          <label>Data Source Type</label>
          <div className="cs-conditional-types">
            <button
              type="button"
              className={`cs-conditional-type-btn ${dataProviderType === 'excel' ? 'active' : ''}`}
              onClick={() => handleDataProviderTypeChange('excel')}
              disabled={disabled}
            >
              Excel
            </button>
            <button
              type="button"
              className={`cs-conditional-type-btn ${dataProviderType === 'csv' ? 'active' : ''}`}
              onClick={() => handleDataProviderTypeChange('csv')}
              disabled={disabled}
            >
              CSV
            </button>
            <button
              type="button"
              className={`cs-conditional-type-btn ${dataProviderType === 'json' ? 'active' : ''}`}
              onClick={() => handleDataProviderTypeChange('json')}
              disabled={disabled}
            >
              JSON
            </button>
            <button
              type="button"
              className={`cs-conditional-type-btn ${dataProviderType === 'database' ? 'active' : ''}`}
              onClick={() => handleDataProviderTypeChange('database')}
              disabled={disabled}
            >
              Database
            </button>
          </div>
          <small className="cs-input-help">{getHelpText()}</small>
        </div>
        
        {dataProviderType === 'excel' && renderExcelConfig()}
        {dataProviderType === 'csv' && renderCsvConfig()}
        {dataProviderType === 'json' && renderJsonConfig()}
        {dataProviderType === 'database' && renderDatabaseConfig()}
        
        <div className="cs-action-config-footer">
          <button
            type="button"
            className="cs-action-cancel-btn"
            onClick={onCancel}
            disabled={disabled}
          >
            Cancel
          </button>
          
          <button
            type="button"
            className="cs-action-save-btn"
            onClick={handleSave}
            disabled={disabled}
          >
            Save
          </button>
        </div>
      </div>
    </div>
  );
};

export default DataProviderConfig;


VariableConfig.tsx
---------------------------------------------

import React, { useState, useEffect } from 'react';
import './ActionConfig.css';
import { RecordingAction } from '../RecorderComponent';

interface VariableConfigProps {
  /** Initial action configuration */
  initialAction?: RecordingAction;
  /** Callback when action is saved */
  onSave: (action: RecordingAction) => void;
  /** Callback when configuration is canceled */
  onCancel: () => void;
  /** Framework in use */
  framework: 'selenium' | 'playwright';
  /** Programming language in use */
  language: 'java' | 'typescript';
  /** Test type in use */
  testType: 'testng' | 'bdd';
  /** Whether the component is disabled */
  disabled?: boolean;
}

/**
 * Variable Configuration Component
 * 
 * Allows users to configure variable actions:
 * - Declare variables
 * - Set variable values
 * - Clear variables
 */
const VariableConfig: React.FC<VariableConfigProps> = ({
  initialAction,
  onSave,
  onCancel,
  framework,
  language,
  testType,
  disabled = false
}) => {
  // Determine the variable mode based on initial action
  const getInitialVariableMode = (): 'declare' | 'set' | 'clear' => {
    if (!initialAction?.customCode) return 'declare';
    
    const code = initialAction.customCode;
    
    if (language === 'java') {
      if (code.includes('=') && code.includes('String') || code.includes('int') || code.includes('boolean')) {
        return 'declare';
      } else if (code.includes('=')) {
        return 'set';
      } else if (code.includes('null')) {
        return 'clear';
      }
    } else {
      if (code.includes('=') && (code.includes('const') || code.includes('let') || code.includes('var'))) {
        return 'declare';
      } else if (code.includes('=')) {
        return 'set';
      } else if (code.includes('delete')) {
        return 'clear';
      }
    }
    
    return 'declare';
  };
  
  // Parse initial variables from customCode
  const parseInitialVariables = (): { name: string; value: string }[] => {
    if (!initialAction?.variables) {
      if (!initialAction?.customCode) return [{ name: '', value: '' }];
      
      const code = initialAction.customCode;
      const variables: { name: string; value: string }[] = [];
      
      if (language === 'java') {
        // Simple regex pattern to match Java variable declarations/assignments
        const variableRegex = /(?:String|int|boolean|double)?\s*(\w+)\s*=\s*["']?([^"';]*)["']?;/g;
        let match;
        
        while ((match = variableRegex.exec(code)) !== null) {
          variables.push({ name: match[1], value: match[2] });
        }
      } else {
        // Simple regex pattern to match TypeScript variable declarations/assignments
        const variableRegex = /(?:const|let|var)?\s*(\w+)\s*=\s*["']?([^"';]*)["']?;?/g;
        let match;
        
        while ((match = variableRegex.exec(code)) !== null) {
          variables.push({ name: match[1], value: match[2] });
        }
      }
      
      return variables.length > 0 ? variables : [{ name: '', value: '' }];
    }
    
    return Object.entries(initialAction.variables).map(([name, value]) => ({ name, value: String(value) }));
  };
  
  // State for variable mode
  const [variableMode, setVariableMode] = useState<'declare' | 'set' | 'clear'>(getInitialVariableMode());
  
  // State for variables
  const [variables, setVariables] = useState<{ name: string; value: string }[]>(parseInitialVariables());
  
  // State for action description
  const [actionDescription, setActionDescription] = useState<string>(
    initialAction?.description || 
    (variableMode === 'declare' ? 'Declare Variable' : 
     variableMode === 'set' ? 'Set Variable' : 
     'Clear Variable')
  );
  
  // Handle variable mode change
  const handleVariableModeChange = (mode: 'declare' | 'set' | 'clear') => {
    setVariableMode(mode);
    
    // Set default description based on mode
    if (!actionDescription || 
        actionDescription === 'Declare Variable' || 
        actionDescription === 'Set Variable' || 
        actionDescription === 'Clear Variable') {
      setActionDescription(
        mode === 'declare' ? 'Declare Variable' : 
        mode === 'set' ? 'Set Variable' :'Clear Variable'
      );
    }
  };
  
  // Add variable
  const addVariable = () => {
    setVariables([...variables, { name: '', value: '' }]);
  };
  
  // Remove variable
  const removeVariable = (index: number) => {
    if (variables.length <= 1) return;
    
    const newVariables = [...variables];
    newVariables.splice(index, 1);
    setVariables(newVariables);
  };
  
  // Update variable name
  const updateVariableName = (index: number, name: string) => {
    const newVariables = [...variables];
    newVariables[index].name = name;
    setVariables(newVariables);
  };
  
  // Update variable value
  const updateVariableValue = (index: number, value: string) => {
    const newVariables = [...variables];
    newVariables[index].value = value;
    setVariables(newVariables);
  };
  
  // Generate custom code based on variables and mode
  const generateCustomCode = (): string => {
    if (variableMode === 'clear') {
      if (language === 'java') {
        return variables
          .filter(v => v.name.trim() !== '')
          .map(v => `${v.name} = null;`)
          .join('\n');
      } else {
        return variables
          .filter(v => v.name.trim() !== '')
          .map(v => `delete ${v.name};`)
          .join('\n');
      }
    } else if (variableMode === 'declare') {
      if (language === 'java') {
        return variables
          .filter(v => v.name.trim() !== '')
          .map(v => {
            // Determine variable type based on value
            let type = 'String';
            if (v.value === 'true' || v.value === 'false') {
              type = 'boolean';
            } else if (!isNaN(Number(v.value))) {
              if (v.value.includes('.')) {
                type = 'double';
              } else {
                type = 'int';
              }
            }
            
            // Add quotes for strings
            let valueStr = v.value;
            if (type === 'String' && !valueStr.startsWith('"') && !valueStr.endsWith('"')) {
              valueStr = `"${valueStr}"`;
            }
            
            return `${type} ${v.name} = ${valueStr};`;
          })
          .join('\n');
      } else {
        return variables
          .filter(v => v.name.trim() !== '')
          .map(v => {
            // Add quotes for strings
            let valueStr = v.value;
            if (v.value !== 'true' && v.value !== 'false' && isNaN(Number(v.value))) {
              if (!valueStr.startsWith('"') && !valueStr.endsWith('"')) {
                valueStr = `"${valueStr}"`;
              }
            }
            
            return `const ${v.name} = ${valueStr};`;
          })
          .join('\n');
      }
    } else {
      if (language === 'java') {
        return variables
          .filter(v => v.name.trim() !== '')
          .map(v => {
            // Add quotes for strings if needed
            let valueStr = v.value;
            if (v.value !== 'true' && v.value !== 'false' && isNaN(Number(v.value))) {
              if (!valueStr.startsWith('"') && !valueStr.endsWith('"')) {
                valueStr = `"${valueStr}"`;
              }
            }
            
            return `${v.name} = ${valueStr};`;
          })
          .join('\n');
      } else {
        return variables
          .filter(v => v.name.trim() !== '')
          .map(v => {
            // Add quotes for strings if needed
            let valueStr = v.value;
            if (v.value !== 'true' && v.value !== 'false' && isNaN(Number(v.value))) {
              if (!valueStr.startsWith('"') && !valueStr.endsWith('"')) {
                valueStr = `"${valueStr}"`;
              }
            }
            
            return `${v.name} = ${valueStr};`;
          })
          .join('\n');
      }
    }
  };
  
  // Generate variables object
  const generateVariablesObject = (): Record<string, string> => {
    const result: Record<string, string> = {};
    
    variables
      .filter(v => v.name.trim() !== '')
      .forEach(v => {
        result[v.name] = v.value;
      });
    
    return result;
  };
  
  // Handle save
  const handleSave = () => {
    // Generate unique ID if not provided
    const id = initialAction?.id || `action_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    
    // Get only valid variables
    const validVariables = variables.filter(v => v.name.trim() !== '');
    
    // Don't save if no valid variables
    if (validVariables.length === 0) {
      alert('Please enter at least one variable name.');
      return;
    }
    
    // Generate custom code
    const customCode = generateCustomCode();
    
    // Generate variables object
    const variablesObj = generateVariablesObject();
    
    // Create action
    const action: RecordingAction = {
      id,
      type: 'custom',
      customCode,
      variables: variablesObj,
      timestamp: initialAction?.timestamp || Date.now(),
      description: actionDescription
    };
    
    onSave(action);
  };
  
  // Get help text based on framework and language
  const getHelpText = (): string => {
    if (variableMode === 'declare') {
      return 'Declare one or more variables with initial values.';
    } else if (variableMode === 'set') {
      return 'Set values for existing variables.';
    } else {
      return 'Clear the value of variables (set to null or delete).';
    }
  };
  
  // Render variable rows
  const renderVariableRows = () => {
    return (
      <div className="cs-action-config-section">
        {variables.map((variable, index) => (
          <div key={`variable-${index}`} className="cs-variable-row">
            <input
              type="text"
              className="cs-input cs-variable-name-input"
              value={variable.name}
              onChange={(e) => updateVariableName(index, e.target.value)}
              placeholder="Variable name"
              disabled={disabled || (variableMode === 'clear' && index > 0)}
            />
            
            {variableMode !== 'clear' && (
              <input
                type="text"
                className="cs-input cs-variable-value-input"
                value={variable.value}
                onChange={(e) => updateVariableValue(index, e.target.value)}
                placeholder="Value"
                disabled={disabled}
              />
            )}
            
            {variables.length > 1 && (
              <button
                type="button"
                className="cs-remove-variable-btn"
                onClick={() => removeVariable(index)}
                disabled={disabled}
              >
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M18 6L6 18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  <path d="M6 6L18 18" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
              </button>
            )}
          </div>
        ))}
        
        {variableMode !== 'clear' && (
          <button
            type="button"
            className="cs-add-variable-btn"
            onClick={addVariable}
            disabled={disabled}
          >
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 5V19" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
              <path d="M5 12H19" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            </svg>
            Add Variable
          </button>
        )}
      </div>
    );
  };
  
  // Render code preview
  const renderCodePreview = () => {
    const code = generateCustomCode();
    
    if (!code) return null;
    
    return (
      <div className="cs-form-group">
        <label>Code Preview</label>
        <pre className="cs-code-preview">
          {code}
        </pre>
      </div>
    );
  };
  
  return (
    <div className={`cs-action-config ${disabled ? 'disabled' : ''}`}>
      <div className="cs-action-config-header">
        <h2 className="cs-action-config-title">Configure Variable Action</h2>
      </div>
      
      <div className="cs-action-config-content">
        <div className="cs-form-group">
          <label htmlFor="action-description">Action Description</label>
          <input
            type="text"
            id="action-description"
            className="cs-input"
            value={actionDescription}
            onChange={(e) => setActionDescription(e.target.value)}
            placeholder="Enter action description"
            disabled={disabled}
          />
        </div>
        
        <div className="cs-form-group">
          <label>Variable Mode</label>
          <div className="cs-conditional-types">
            <button
              type="button"
              className={`cs-conditional-type-btn ${variableMode === 'declare' ? 'active' : ''}`}
              onClick={() => handleVariableModeChange('declare')}
              disabled={disabled}
            >
              Declare
            </button>
            <button
              type="button"
              className={`cs-conditional-type-btn ${variableMode === 'set' ? 'active' : ''}`}
              onClick={() => handleVariableModeChange('set')}
              disabled={disabled}
            >
              Set
            </button>
            <button
              type="button"
              className={`cs-conditional-type-btn ${variableMode === 'clear' ? 'active' : ''}`}
              onClick={() => handleVariableModeChange('clear')}
              disabled={disabled}
            >
              Clear
            </button>
          </div>
          <small className="cs-input-help">{getHelpText()}</small>
        </div>
        
        {renderVariableRows()}
        {renderCodePreview()}
        
        <div className="cs-action-config-footer">
          <button
            type="button"
            className="cs-action-cancel-btn"
            onClick={onCancel}
            disabled={disabled}
          >
            Cancel
          </button>
          
          <button
            type="button"
            className="cs-action-save-btn"
            onClick={handleSave}
            disabled={disabled}
          >
            Save
          </button>
        </div>
      </div>
    </div>
  );
};

export default VariableConfig;

WaitActionConfig.tsx
---------------------------------------------------

import React, { useState, useEffect } from 'react';
import './ActionConfig.css';
import { RecordingAction, ElementInfo } from '../RecorderComponent';

interface WaitActionConfigProps {
  /** Initial action configuration */
  initialAction?: RecordingAction;
  /** Callback when action is saved */
  onSave: (action: RecordingAction) => void;
  /** Callback when configuration is canceled */
  onCancel: () => void;
  /** Callback when element picker is toggled */
  onElementPicker?: (active: boolean) => void;
  /** Selected element from picker */
  selectedElement?: ElementInfo;
  /** Framework in use */
  framework: 'selenium' | 'playwright';
  /** Programming language in use */
  language: 'java' | 'typescript';
  /** Test type in use */
  testType: 'testng' | 'bdd';
  /** Whether the component is disabled */
  disabled?: boolean;
}

/**
 * Wait Action Configuration Component
 * 
 * Allows users to configure wait actions:
 * - Wait for element to be visible
 * - Wait for element to be clickable
 * - Wait for element to be present
 * - Wait for specific text
 * - Wait for specified time
 * - Custom wait condition
 */
const WaitActionConfig: React.FC<WaitActionConfigProps> = ({
  initialAction,
  onSave,
  onCancel,
  onElementPicker,
  selectedElement,
  framework,
  language,
  testType,
  disabled = false
}) => {
  // Set default wait type if not provided
  const defaultWaitType = initialAction?.waitCondition || 'visible';
  
  // State for wait type
  const [waitType, setWaitType] = useState<'visible' | 'clickable' | 'present' | 'text' | 'time' | 'custom'>(
    defaultWaitType as 'visible' | 'clickable' | 'present' | 'text' | 'time' | 'custom'
  );
  
  // State for wait timeout
  const [waitTimeout, setWaitTimeout] = useState<number>(
    initialAction?.waitTimeout || 30000
  );
  
  // State for wait text (for text wait)
  const [waitText, setWaitText] = useState<string>(
    initialAction?.value || ''
  );
  
  // State for custom wait condition
  const [customWaitCondition, setCustomWaitCondition] = useState<string>(
    initialAction?.waitCondition === 'custom' && initialAction.condition ? 
      initialAction.condition : 
      ''
  );
  
  // State for action description
  const [actionDescription, setActionDescription] = useState<string>(
    initialAction?.description || `Wait For ${waitType.charAt(0).toUpperCase() + waitType.slice(1)}`
  );
  
  // State for element
  const [element, setElement] = useState<ElementInfo | undefined>(
    initialAction?.element || selectedElement
  );
  
  // State for element picker active
  const [elementPickerActive, setElementPickerActive] = useState<boolean>(false);
  
  // Update element when selectedElement changes
  useEffect(() => {
    if (selectedElement && elementPickerActive) {
      setElement(selectedElement);
      setElementPickerActive(false);
      
      if (onElementPicker) {
        onElementPicker(false);
      }
    }
  }, [selectedElement, elementPickerActive]);
  
  // Handle wait type change
  const handleWaitTypeChange = (type: 'visible' | 'clickable' | 'present' | 'text' | 'time' | 'custom') => {
    setWaitType(type);
    
    // Set default description based on type
    if (!actionDescription || 
        actionDescription === `Wait For ${waitType.charAt(0).toUpperCase() + waitType.slice(1)}`) {
      setActionDescription(`Wait For ${type.charAt(0).toUpperCase() + type.slice(1)}`);
    }
  };
  
  // Toggle element picker
  const toggleElementPicker = () => {
    const newState = !elementPickerActive;
    setElementPickerActive(newState);
    
    if (onElementPicker) {
      onElementPicker(newState);
    }
  };
  
  // Clear selected element
  const clearElement = () => {
    setElement(undefined);
  };
  
  // Handle save
  const handleSave = () => {
    // Generate unique ID if not provided
    const id = initialAction?.id || `action_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
    
    // Validate wait conditions
    if ((waitType === 'visible' || waitType === 'clickable' || waitType === 'present') && !element) {
      alert('Please select an element for this wait type.');
      return;
    }
    
    if (waitType === 'text' && !waitText) {
      alert('Please enter text to wait for.');
      return;
    }
    
    if (waitType === 'custom' && !customWaitCondition) {
      alert('Please enter a custom wait condition.');
      return;
    }
    
    // Create action
    const action: RecordingAction = {
      id,
      type: 'wait',
      waitCondition: waitType,
      waitTimeout,
      timestamp: initialAction?.timestamp || Date.now(),
      description: actionDescription,
      ...(waitType === 'text' && { value: waitText }),
      ...(waitType === 'custom' && { condition: customWaitCondition }),
      ...(element && { element })
    };
    
    onSave(action);
  };
  
  // Get help text based on framework and language
  const getHelpText = (): string => {
    if (waitType === 'visible') {
      return 'Wait for the element to be visible on the page.';
    } else if (waitType === 'clickable') {
      return 'Wait for the element to be clickable (visible and enabled).';
    } else if (waitType === 'present') {
      return 'Wait for the element to be present in the DOM (may not be visible).';
    } else if (waitType === 'text') {
      return 'Wait for specific text to be present on the page.';
    } else if (waitType === 'time') {
      return 'Wait for a specified amount of time in milliseconds.';
    } else {
      if (framework === 'selenium') {
        if (language === 'java') {
          return 'Example: driver.getTitle().contains("Home") || element.isDisplayed()';
        } else {
          return 'Example: await driver.getTitle().includes("Home") || await element.isDisplayed()';
        }
      } else {
        if (language === 'java') {
          return 'Example: page.title().contains("Home") || page.isVisible("selector")';
        } else {
          return 'Example: (await page.title()).includes("Home") || await page.isVisible("selector")';
        }
      }
    }
  };
  
  // Render element selector
  const renderElementSelector = () => {
    if (!['visible', 'clickable', 'present'].includes(waitType)) return null;
    
    return (
      <div className="cs-action-config-section">
        <div className="cs-element-selector">
          <div className="cs-element-selector-header">
            <h3 className="cs-element-selector-title">Element to Wait For</h3>
            <div className="cs-element-selector-actions">
              <button
                type="button"
                className="cs-element-picker-btn"
                onClick={toggleElementPicker}
                disabled={disabled || elementPickerActive}
              >
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  <path d="M21 7H3" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                  <path d="M7 21V7" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
                </svg>
                Pick Element
              </button>
              
              {element && (
                <button
                  type="button"
                  className="cs-action-cancel-btn"
                  onClick={clearElement}
                  disabled={disabled}
                >
                  Clear
                </button>
              )}
            </div>
          </div>
          
          {element ? (
            <div className="cs-element-info">
              <div className="cs-element-info-row">
                <span className="cs-element-info-label">Tag:</span>
                <span className="cs-element-info-value">{element.tagName.toLowerCase()}</span>
              </div>
              
              {element.id && (
                <div className="cs-element-info-row">
                  <span className="cs-element-info-label">ID:</span>
                  <span className="cs-element-info-value">{element.id}</span>
                </div>
              )}
              
              {element.className && (
                <div className="cs-element-info-row">
                  <span className="cs-element-info-label">Class:</span>
                  <span className="cs-element-info-value">{element.className}</span>
                </div>
              )}
              
              {element.text && (
                <div className="cs-element-info-row">
                  <span className="cs-element-info-label">Text:</span>
                  <span className="cs-element-info-value">
                    {element.text.length > 50 ? element.text.substring(0, 50) + '...' : element.text}
                  </span>
                </div>
              )}
              
              {element.xpath && (
                <div className="cs-element-info-row">
                  <span className="cs-element-info-label">XPath:</span>
                  <span className="cs-element-info-value">
                    {element.xpath.length > 50 ? element.xpath.substring(0, 50) + '...' : element.xpath}
                  </span>
                </div>
              )}
            </div>
          ) : (
            <div className="cs-element-placeholder">
              <p>No element selected. Click "Pick Element" to select an element.</p>
            </div>
          )}
        </div>
      </div>
    );
  };
  
  // Render wait text input
  const renderWaitTextInput = () => {
    if (waitType !== 'text') return null;
    
    return (
      <div className="cs-action-config-section">
        <div className="cs-form-group">
          <label htmlFor="wait-text">Text to Wait For</label>
          <input
            type="text"
            id="wait-text"
            className="cs-input"
            value={waitText}
            onChange={(e) => setWaitText(e.target.value)}
            placeholder="Enter text to wait for"
            disabled={disabled}
          />
        </div>
      </div>
    );
  };
  
  // Render custom wait condition
  const renderCustomWaitCondition = () => {
    if (waitType !== 'custom') return null;
    
    return (
      <div className="cs-action-config-section">
        <div className="cs-form-group">
          <label htmlFor="custom-wait-condition">Custom Wait Condition</label>
          <textarea
            id="custom-wait-condition"
            className="cs-textarea"
            value={customWaitCondition}
            onChange={(e) => setCustomWaitCondition(e.target.value)}
            placeholder="Enter custom wait condition"
            disabled={disabled}
          />
          <small className="cs-input-help">{getHelpText()}</small>
        </div>
      </div>
    );
  };
  
  // Render timeout input
  const renderTimeoutInput = () => {
    return (
      <div className="cs-form-group">
        <label htmlFor="wait-timeout">Timeout (milliseconds)</label>
        <div className="cs-time-input-group">
          <input
            type="number"
            id="wait-timeout"
            className="cs-input"
            value={waitTimeout}
            onChange={(e) => setWaitTimeout(parseInt(e.target.value, 10))}
            min="0"
            step="1000"
            disabled={disabled}
          />
          <select
            className="cs-select cs-time-unit"
            value="ms"
            disabled={true}
          >
            <option value="ms">ms</option>
          </select>
        </div>
      </div>
    );
  };
  
  // Render code preview
  const renderCodePreview = () => {
    let code = '';
    
    if (framework === 'selenium') {
      if (language === 'java') {
        if (waitType === 'visible') {
          code = `WebDriverWait wait = new WebDriverWait(driver, Duration.ofMillis(${waitTimeout}));
wait.until(ExpectedConditions.visibilityOfElementLocated(${element ? `By.${element.id ? `id("${element.id}")` : `xpath("${element.xpath}")`}` : 'locator'}));`;
        } else if (waitType === 'clickable') {
          code = `WebDriverWait wait = new WebDriverWait(driver, Duration.ofMillis(${waitTimeout}));
wait.until(ExpectedConditions.elementToBeClickable(${element ? `By.${element.id ? `id("${element.id}")` : `xpath("${element.xpath}")`}` : 'locator'}));`;
        } else if (waitType === 'present') {
          code = `WebDriverWait wait = new WebDriverWait(driver, Duration.ofMillis(${waitTimeout}));
wait.until(ExpectedConditions.presenceOfElementLocated(${element ? `By.${element.id ? `id("${element.id}")` : `xpath("${element.xpath}")`}` : 'locator'}));`;
        } else if (waitType === 'text') {
          code = `WebDriverWait wait = new WebDriverWait(driver, Duration.ofMillis(${waitTimeout}));
wait.until(ExpectedConditions.textToBePresentInElement(driver.findElement(By.tagName("body")), "${waitText}"));`;
        } else if (waitType === 'time') {
          code = `Thread.sleep(${waitTimeout});`;
        } else if (waitType === 'custom') {
          code = `WebDriverWait wait = new WebDriverWait(driver, Duration.ofMillis(${waitTimeout}));
wait.until(driver -> ${customWaitCondition});`;
        }
      } else {
        if (waitType === 'visible') {
          code = `const wait = new WebDriverWait(driver, ${waitTimeout});
await wait.until(until.elementIsVisible(driver.findElement(${element ? `By.${element.id ? `id("${element.id}")` : `xpath("${element.xpath}")`}` : 'locator'})));`;
        } else if (waitType === 'clickable') {
          code = `const wait = new WebDriverWait(driver, ${waitTimeout});
await wait.until(until.elementIsEnabled(driver.findElement(${element ? `By.${element.id ? `id("${element.id}")` : `xpath("${element.xpath}")`}` : 'locator'})));`;
        } else if (waitType === 'present') {
          code = `const wait = new WebDriverWait(driver, ${waitTimeout});
await wait.until(until.elementLocated(${element ? `By.${element.id ? `id("${element.id}")` : `xpath("${element.xpath}")`}` : 'locator'}));`;
        } else if (waitType === 'text') {
          code = `const wait = new WebDriverWait(driver, ${waitTimeout});
await wait.until(until.elementTextContains(driver.findElement(By.css("body")), "${waitText}"));`;
        } else if (waitType === 'time') {
          code = `await driver.sleep(${waitTimeout});`;
        } else if (waitType === 'custom') {
          code = `const wait = new WebDriverWait(driver, ${waitTimeout});
await wait.until(async (driver) => ${customWaitCondition});`;
        }
      }
    } else {
      if (language === 'java') {
        if (waitType === 'visible') {
          code = `page.waitForSelector(${element ? `"${element.selector}"` : '"selector"'}, new WaitForSelectorOptions().setState(WaitForSelectorState.VISIBLE).setTimeout(${waitTimeout}));`;
        } else if (waitType === 'clickable') {
          code = `page.waitForSelector(${element ? `"${element.selector}"` : '"selector"'}, new WaitForSelectorOptions().setState(WaitForSelectorState.VISIBLE).setTimeout(${waitTimeout}));`;
        } else if (waitType === 'present') {
          code = `page.waitForSelector(${element ? `"${element.selector}"` : '"selector"'}, new WaitForSelectorOptions().setTimeout(${waitTimeout}));`;
        } else if (waitType === 'text') {
          code = `page.waitForCondition(() -> page.content().contains("${waitText}"), new WaitForConditionOptions().setTimeout(${waitTimeout}));`;
        } else if (waitType === 'time') {
          code = `page.waitForTimeout(${waitTimeout});`;
        } else if (waitType === 'custom') {
          code = `page.waitForCondition(() -> ${customWaitCondition}, new WaitForConditionOptions().setTimeout(${waitTimeout}));`;
        }
      } else {
        if (waitType === 'visible') {
          code = `await page.waitForSelector(${element ? `"${element.selector}"` : '"selector"'}, { state: 'visible', timeout: ${waitTimeout} });`;
        } else if (waitType === 'clickable') {
          code = `await page.waitForSelector(${element ? `"${element.selector}"` : '"selector"'}, { state: 'visible', timeout: ${waitTimeout} });`;
        } else if (waitType === 'present') {
          code = `await page.waitForSelector(${element ? `"${element.selector}"` : '"selector"'}, { timeout: ${waitTimeout} });`;
        } else if (waitType === 'text') {
          code = `await page.waitForFunction(text => document.body.textContent.includes(text), "${waitText}", { timeout: ${waitTimeout} });`;
        } else if (waitType === 'time') {
          code = `await page.waitForTimeout(${waitTimeout});`;
        } else if (waitType === 'custom') {
          code = `await page.waitForFunction(async () => ${customWaitCondition}, { timeout: ${waitTimeout} });`;
        }
      }
    }
    
    return (
      <div className="cs-form-group">
        <label>Code Preview</label>
        <pre className="cs-code-preview">
          {code}
        </pre>
      </div>
    );
  };
  
  return (
    <div className={`cs-action-config ${disabled ? 'disabled' : ''}`}>
      <div className="cs-action-config-header">
        <h2 className="cs-action-config-title">Configure Wait Action</h2>
      </div>
      
      <div className="cs-action-config-content">
        <div className="cs-form-group">
          <label htmlFor="action-description">Action Description</label>
          <input
            type="text"
            id="action-description"
            className="cs-input"
            value={actionDescription}
            onChange={(e) => setActionDescription(e.target.value)}
            placeholder="Enter action description"
            disabled={disabled}
          />
        </div>
        
        <div className="cs-form-group">
          <label>Wait Type</label>
          <div className="cs-wait-options">
            <button
              type="button"
              className={`cs-wait-option ${waitType === 'visible' ? 'active' : ''}`}
              onClick={() => handleWaitTypeChange('visible')}
              disabled={disabled}
            >
              Visible
            </button>
            <button
              type="button"
              className={`cs-wait-option ${waitType === 'clickable' ? 'active' : ''}`}
              onClick={() => handleWaitTypeChange('clickable')}
              disabled={disabled}
            >
              Clickable
            </button>
            <button
              type="button"
              className={`cs-wait-option ${waitType === 'present' ? 'active' : ''}`}
              onClick={() => handleWaitTypeChange('present')}
              disabled={disabled}
            >
              Present
            </button>
            <button
              type="button"
              className={`cs-wait-option ${waitType === 'text' ? 'active' : ''}`}
              onClick={() => handleWaitTypeChange('text')}
              disabled={disabled}
            >
              Text
            </button>
            <button
              type="button"
              className={`cs-wait-option ${waitType === 'time' ? 'active' : ''}`}
              onClick={() => handleWaitTypeChange('time')}
              disabled={disabled}
            >
              Time
            </button>
            <button
              type="button"
              className={`cs-wait-option ${waitType === 'custom' ? 'active' : ''}`}
              onClick={() => handleWaitTypeChange('custom')}
              disabled={disabled}
            >
              Custom
            </button>
          </div>
          <small className="cs-input-help">{getHelpText()}</small>
        </div>
        
        {renderElementSelector()}
        {renderWaitTextInput()}
        {renderCustomWaitCondition()}
        {renderTimeoutInput()}
        {renderCodePreview()}
        
        <div className="cs-action-config-footer">
          <button
            type="button"
            className="cs-action-cancel-btn"
            onClick={onCancel}
            disabled={disabled}
          >
            Cancel
          </button>
          
          <button
            type="button"
            className="cs-action-save-btn"
            onClick={handleSave}
            disabled={disabled}
          >
            Save
          </button>
        </div>
      </div>
    </div>
  );
};

export default WaitActionConfig;



