#!/usr/bin/env node

/**
 * Debug wrapper for PTF tests
 * This file allows you to set breakpoints in your test code
 * and provides a workaround for VS Code debugger argument passing issues
 */

// Set your test configuration here
const testConfig = {
    project: 'orangehrm',
    features: 'test/orangehrm/features/orangehrm-login-navigation.feature',
    env: 'dev',
    headless: false,
    tags: '@TC501'
};

// Convert config to command line arguments
const args = [];
Object.entries(testConfig).forEach(([key, value]) => {
    if (value !== undefined && value !== null) {
        args.push(`--${key}=${value}`);
    }
});

console.log('[DEBUG] Running with arguments:', args);

// Set process.argv to simulate command line execution
process.argv = [
    process.argv[0], // node
    process.argv[1], // this script
    ...args
];

// Load and run the framework
require('@mdakhan.mak/cs-playwright-test-framework/dist/index.js');


{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "node",
      "request": "launch",
      "name": "Debug PTF Test (Wrapper)",
      "program": "${workspaceFolder}/debug-test.js",
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen",
      "skipFiles": [
        "<node_internals>/**"
      ],
      "env": {
        "NODE_ENV": "development",
        "LOG_LEVEL": "DEBUG"
      }
    }
  ]
}



{
  // Official Cucumber extension configuration
  "cucumber.features": [
    "**/*.feature"
  ],
  "cucumber.glue": [
    "test/**/*.ts",
    "test/**/*.js",
    "dist/test/**/*.js"
  ],

  // Cucumber (Gherkin) Full Support extension configuration
  "cucumberautocomplete.steps": [
    "test/**/*.ts",
    "dist/test/**/*.js"
  ],
  "cucumberautocomplete.syncfeatures": "**/*.feature",
  "cucumberautocomplete.strictGherkinCompletion": false,
  "cucumberautocomplete.strictGherkinValidation": false,
  "cucumberautocomplete.smartSnippets": true,
  "cucumberautocomplete.stepsInvariants": true,
  "cucumberautocomplete.customParameters": [
    {
      "parameter": "{string}",
      "value": "\"([^\"]*)\""
    },
    {
      "parameter": "{int}",
      "value": "(\\d+)"
    },
    {
      "parameter": "{float}",
      "value": "(\\d*\\.?\\d+)"
    }
  ],

  // Enable string suggestions in feature files
  "editor.quickSuggestions": {
    "comments": false,
    "strings": true,
    "other": true
  }
}

